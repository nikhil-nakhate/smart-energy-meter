###############################################################################
#                                                                             #
#                                                       26/Jan/2012  01:17:25 #
# IAR C/C++ Compiler V5.40.2.20380/W32, Evaluation edition for MSP430         #
# Copyright 1996-2011 IAR Systems AB.                                         #
#                                                                             #
#    __rt_version  =  3                                                       #
#    __double_size =  32                                                      #
#    __reg_r4      =  free                                                    #
#    __reg_r5      =  free                                                    #
#    __pic         =  no                                                      #
#    __core        =  430X                                                    #
#    __data_model  =  small                                                   #
#    Source file   =  C:\Texas Instruments\ZAP-MSP430-2.5.0\Components\stack\ #
#                     zcl\zcl_se.c                                            #
#    Command line  =  -f "C:\Texas Instruments\ZAP-MSP430-2.5.0\Projects\zsta #
#                     ck\ZAP\SE-SampleApp\EXP5438\..\..\Source\zap.cfg"       #
#                     (-DZAP_PHY_SPI=1 -DZAP_PHY_UART=!ZAP_PHY_SPI            #
#                     -DZAP_PHY_RESET_ZNP=TRUE -DZAP_ZNP_MT=FALSE             #
#                     -DZAP_APP_MSG=FALSE -DZAP_SBL_PROXY=FALSE               #
#                     -DZAP_AUTO_CFG=TRUE -DZAP_AUTO_START=TRUE               #
#                     -DZAP_NV_RESTORE=FALSE -DLCD_SUPPORTED                  #
#                     -DZAP_AF_DATA_REQ_FRAG=FALSE                            #
#                     -DZAP_AF_DATA_REQ_AREQ=!ZAP_AF_DATA_REQ_FRAG            #
#                     -DZAP_ZDO_STARTUP_AREQ=TRUE -DZAP_AF_FUNC               #
#                     -DZAP_SAPI_FUNC -DZAP_SYS_FUNC -DZAP_UTIL_FUNC          #
#                     -DZAP_ZDO_FUNC -DSECURE=0 -DZG_SECURE_DYNAMIC=0         #
#                     "-DDEFAULT_CHANLIST=(uint32)0x00000800"                 #
#                     -DZDAPP_CONFIG_PAN_ID=0xFFFF -DPOLL_RATE=1000           #
#                     -DNWK_START_DELAY=100 -DMAX_BINDING_CLUSTER_IDS=4) -f   #
#                     "C:\Texas Instruments\ZAP-MSP430-2.5.0\Projects\zstack\ #
#                     ZAP\SE-SampleApp\EXP5438\..\..\..\Tools\MSP5438\f8wZCL. #
#                     cfg" (-DZCL_READ -DZCL_WRITE -DZCL_BASIC                #
#                     -DZCL_IDENTIFY -DZCL_ON_OFF -DZCL_KEY_ESTABLISH         #
#                     -DZCL_KEY_ESTABLISHMENT_KEY_GENERATE_TIMEOUT=4          #
#                     -DZCL_KEY_ESTABLISHMENT_MAC_GENERATE_TIMEOUT=10         #
#                     -DZCL_KEY_ESTABLISHMENT_EKEY_GENERATE_TIMEOUT=10        #
#                     -DZCL_LOAD_CONTROL -DZCL_SIMPLE_METERING -DZCL_PRICING  #
#                     -DZCL_MESSAGE) "C:\Texas Instruments\ZAP-MSP430-2.5.0\C #
#                     omponents\stack\zcl\zcl_se.c" -D                        #
#                     ZAP_DEVICETYPE=ZG_DEVICETYPE_ENDDEVICE -D               #
#                     TC_LINKKEY_JOIN -D ZCL_REPORT -lC "C:\Texas             #
#                     Instruments\ZAP-MSP430-2.5.0\Projects\zstack\ZAP\SE-Sam #
#                     pleApp\EXP5438\Simple Metering - End Device\List\" -lA  #
#                     "C:\Texas Instruments\ZAP-MSP430-2.5.0\Projects\zstack\ #
#                     ZAP\SE-SampleApp\EXP5438\Simple Metering - End          #
#                     Device\List\" --remarks --diag_suppress                 #
#                     Pe001,Pe193,Pe236,Pe826 -o "C:\Texas                    #
#                     Instruments\ZAP-MSP430-2.5.0\Projects\zstack\ZAP\SE-Sam #
#                     pleApp\EXP5438\Simple Metering - End Device\Obj\"       #
#                     --debug -D__MSP430F5438__ -e --double=32 --clib -I      #
#                     "C:\Texas Instruments\ZAP-MSP430-2.5.0\Projects\zstack\ #
#                     ZAP\SE-SampleApp\EXP5438\" -I "C:\Texas                 #
#                     Instruments\ZAP-MSP430-2.5.0\Projects\zstack\ZAP\SE-Sam #
#                     pleApp\EXP5438\..\Source\" -I "C:\Texas                 #
#                     Instruments\ZAP-MSP430-2.5.0\Projects\zstack\ZAP\SE-Sam #
#                     pleApp\EXP5438\..\..\Source\" -I "C:\Texas              #
#                     Instruments\ZAP-MSP430-2.5.0\Projects\zstack\ZAP\SE-Sam #
#                     pleApp\EXP5438\..\..\..\..\..\Components\hal\target\MSP #
#                     5438ZAP\" -I "C:\Texas Instruments\ZAP-MSP430-2.5.0\Pro #
#                     jects\zstack\ZAP\SE-SampleApp\EXP5438\..\..\..\..\..\Co #
#                     mponents\hal\include\" -I "C:\Texas                     #
#                     Instruments\ZAP-MSP430-2.5.0\Projects\zstack\ZAP\SE-Sam #
#                     pleApp\EXP5438\..\..\..\..\..\Components\mac\include\"  #
#                     -I "C:\Texas Instruments\ZAP-MSP430-2.5.0\Projects\zsta #
#                     ck\ZAP\SE-SampleApp\EXP5438\..\..\..\..\..\Components\m #
#                     t\" -I "C:\Texas Instruments\ZAP-MSP430-2.5.0\Projects\ #
#                     zstack\ZAP\SE-SampleApp\EXP5438\..\..\..\..\..\Componen #
#                     ts\osal\include\" -I "C:\Texas                          #
#                     Instruments\ZAP-MSP430-2.5.0\Projects\zstack\ZAP\SE-Sam #
#                     pleApp\EXP5438\..\..\..\..\..\Components\osal\mcu\msp43 #
#                     0\" -I "C:\Texas Instruments\ZAP-MSP430-2.5.0\Projects\ #
#                     zstack\ZAP\SE-SampleApp\EXP5438\..\..\..\..\..\Componen #
#                     ts\services\saddr\" -I "C:\Texas                        #
#                     Instruments\ZAP-MSP430-2.5.0\Projects\zstack\ZAP\SE-Sam #
#                     pleApp\EXP5438\..\..\..\..\..\Components\services\sdata #
#                     \" -I "C:\Texas Instruments\ZAP-MSP430-2.5.0\Projects\z #
#                     stack\ZAP\SE-SampleApp\EXP5438\..\..\..\..\..\Component #
#                     s\stack\af\" -I "C:\Texas Instruments\ZAP-MSP430-2.5.0\ #
#                     Projects\zstack\ZAP\SE-SampleApp\EXP5438\..\..\..\..\.. #
#                     \Components\stack\nwk\" -I "C:\Texas                    #
#                     Instruments\ZAP-MSP430-2.5.0\Projects\zstack\ZAP\SE-Sam #
#                     pleApp\EXP5438\..\..\..\..\..\Components\stack\sapi\"   #
#                     -I "C:\Texas Instruments\ZAP-MSP430-2.5.0\Projects\zsta #
#                     ck\ZAP\SE-SampleApp\EXP5438\..\..\..\..\..\Components\s #
#                     tack\sec\" -I "C:\Texas Instruments\ZAP-MSP430-2.5.0\Pr #
#                     ojects\zstack\ZAP\SE-SampleApp\EXP5438\..\..\..\..\..\C #
#                     omponents\stack\sys\" -I "C:\Texas                      #
#                     Instruments\ZAP-MSP430-2.5.0\Projects\zstack\ZAP\SE-Sam #
#                     pleApp\EXP5438\..\..\..\..\..\Components\stack\zcl\"    #
#                     -I "C:\Texas Instruments\ZAP-MSP430-2.5.0\Projects\zsta #
#                     ck\ZAP\SE-SampleApp\EXP5438\..\..\..\..\..\Components\s #
#                     tack\zdo\" -I "C:\Texas Instruments\ZAP-MSP430-2.5.0\Pr #
#                     ojects\zstack\ZAP\SE-SampleApp\EXP5438\..\..\..\..\..\C #
#                     omponents\zmac\" -I "C:\Texas                           #
#                     Instruments\ZAP-MSP430-2.5.0\Projects\zstack\ZAP\SE-Sam #
#                     pleApp\EXP5438\..\..\..\..\..\Components\zmac\f8w\"     #
#                     --core=430X --data_model=small -Ohz --multiplier=32     #
#                     --multiplier_location=4C0 --require_prototypes          #
#                     --hw_workaround=CPU40                                   #
#    List file     =  C:\Texas Instruments\ZAP-MSP430-2.5.0\Projects\zstack\Z #
#                     AP\SE-SampleApp\EXP5438\Simple Metering - End           #
#                     Device\List\zcl_se.lst                                  #
#    Object file   =  C:\Texas Instruments\ZAP-MSP430-2.5.0\Projects\zstack\Z #
#                     AP\SE-SampleApp\EXP5438\Simple Metering - End           #
#                     Device\Obj\zcl_se.r43                                   #
#                                                                             #
#                                                                             #
###############################################################################

C:\Texas Instruments\ZAP-MSP430-2.5.0\Components\stack\zcl\zcl_se.c
      1          /**************************************************************************************************
      2            Filename:       zcl_se.c
      3            Revised:        $Date: 2011-05-31 17:20:09 -0700 (Tue, 31 May 2011) $
      4            Revision:       $Revision: 26166 $
      5          
      6            Description:    Zigbee Cluster Library - SE (Smart Energy) Profile.
      7          
      8          
      9            Copyright 2007-2011 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          
     41          /*********************************************************************
     42           * INCLUDES
     43           */
     44          #include "ZComDef.h"
     45          #include "OSAL.h"
     46          #include "zcl.h"
     47          #include "zcl_general.h"
     48          #include "zcl_se.h"
     49          #include "DebugTrace.h"
     50          
     51          #if defined ( INTER_PAN )
     52            #include "stub_aps.h"
     53          #endif
     54          
     55          
     56          #include "zcl_key_establish.h"
     57          
     58          
     59          /*********************************************************************
     60           * MACROS
     61           */
     62          // Clusters that are supported thru Inter-PAN communication
     63          #define INTER_PAN_CLUSTER( id )  ( (id) == ZCL_CLUSTER_ID_SE_PRICING || \
     64                                             (id) == ZCL_CLUSTER_ID_SE_MESSAGE )
     65          
     66          /*********************************************************************
     67           * CONSTANTS
     68           */
     69          
     70          /*********************************************************************
     71           * TYPEDEFS
     72           */
     73          typedef struct zclSECBRec
     74          {
     75            struct zclSECBRec          *next;
     76            uint8                       endpoint; // Used to link it into the endpoint descriptor
     77            zclSE_AppCallbacks_t       *CBs;     // Pointer to Callback function
     78          } zclSECBRec_t;
     79          
     80          /*********************************************************************
     81           * GLOBAL VARIABLES
     82           */
     83          
     84          /*********************************************************************
     85           * GLOBAL FUNCTIONS
     86           */
     87          
     88          /*********************************************************************
     89           * LOCAL VARIABLES
     90           */

   \                                 In  segment DATA16_Z, align 2, align-sorted
   \   000000                REQUIRE ?cstart_init_zero
     91          static zclSECBRec_t *zclSECBs = (zclSECBRec_t *)NULL;
   \                     zclSECBs:
   \   000000                DS8 2

   \                                 In  segment DATA16_Z, align 1, align-sorted
   \   000000                REQUIRE ?cstart_init_zero
     92          static uint8 zclSEPluginRegisted = FALSE;
   \                     zclSEPluginRegisted:
   \   000000                DS8 1
     93          
     94          /*********************************************************************
     95           * LOCAL FUNCTIONS
     96           */
     97          
     98          static ZStatus_t zclSE_HdlIncoming(  zclIncoming_t *pInMsg );
     99          static ZStatus_t zclSE_HdlInSpecificCommands( zclIncoming_t *pInMsg );
    100          
    101          #ifdef ZCL_SIMPLE_METERING
    102          static ZStatus_t zclSE_ProcessInSimpleMeteringCmds( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    103          static ZStatus_t zclSE_ProcessInCmd_SimpleMeter_GetProfileCmd( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    104          static ZStatus_t zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    105          static ZStatus_t zclSE_ProcessInCmd_SimpleMeter_ReqMirrorCmd( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    106          static ZStatus_t zclSE_ProcessInCmd_SimpleMeter_ReqMirrorRsp( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    107          static ZStatus_t zclSE_ProcessInCmd_SimpleMeter_MirrorRemCmd( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    108          static ZStatus_t zclSE_ProcessInCmd_SimpleMeter_MirrorRemRsp( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    109          static ZStatus_t zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeCmd( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    110          static ZStatus_t zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeRsp( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    111          #endif  // ZCL_SIMPLE_METERING
    112          
    113          #ifdef ZCL_PRICING
    114          static ZStatus_t zclSE_ProcessInPricingCmds( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    115          static ZStatus_t zclSE_ProcessInCmd_Pricing_GetCurrentPrice( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    116          static ZStatus_t zclSE_ProcessInCmd_Pricing_GetScheduledPrice( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    117          static ZStatus_t zclSE_ProcessInCmd_Pricing_PublishPrice( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    118          static ZStatus_t zclSE_ProcessInCmd_Pricing_PriceAcknowledgement( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    119          static ZStatus_t zclSE_ProcessInCmd_Pricing_GetBlockPeriod( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    120          static ZStatus_t zclSE_ProcessInCmd_Pricing_PublishBlockPeriod( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    121          #endif  // ZCL_PRICING
    122          
    123          #ifdef ZCL_MESSAGE
    124          static ZStatus_t zclSE_ProcessInMessageCmds( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    125          static ZStatus_t zclSE_ProcessInCmd_Message_DisplayMessage( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    126          static ZStatus_t zclSE_ProcessInCmd_Message_CancelMessage( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    127          static ZStatus_t zclSE_ProcessInCmd_Message_GetLastMessage( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    128          static ZStatus_t zclSE_ProcessInCmd_Message_MessageConfirmation( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    129          #endif  // ZCL_MESSAGE
    130          
    131          #ifdef ZCL_LOAD_CONTROL
    132          static ZStatus_t zclSE_ProcessInLoadControlCmds( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    133          static ZStatus_t zclSE_ProcessInCmd_LoadControl_LoadControlEvent( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    134          static ZStatus_t zclSE_ProcessInCmd_LoadControl_CancelLoadControlEvent( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    135          static ZStatus_t zclSE_ProcessInCmd_LoadControl_CancelAllLoadControlEvents( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    136          static ZStatus_t zclSE_ProcessInCmd_LoadControl_ReportEventStatus( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    137          static ZStatus_t zclSE_ProcessInCmd_LoadControl_GetScheduledEvents( zclIncoming_t *pInMsg,
    138                                                                              zclSE_AppCallbacks_t *pCBs );
    139          #endif  // ZCL_LOAD_CONTROL
    140          
    141          #ifdef ZCL_PREPAYMENT
    142          static ZStatus_t zclSE_ProcessInPrepaymentCmds( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    143          static ZStatus_t zclSE_ProcessInCmd_Prepayment_SelAvailEmergencyCredit( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs) ;
    144          static ZStatus_t zclSE_ProcessInCmd_Prepayment_ChangeSupply( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    145          static ZStatus_t zclSE_ProcessInCmd_Prepayment_SupplyStatusResponse( zclIncoming_t *pInMsg, zclSE_AppCallbacks_t *pCBs );
    146          #endif // ZCL_PREPAYMENT
    147          
    148          #ifdef ZCL_SIMPLE_METERING
    149          /*********************************************************************
    150           * @fn      zclSE_SimpleMetering_Send_GetProfileCmd
    151           *
    152           * @brief   Call to send out a Get Profile Command
    153           *
    154           * @param   srcEP - Sending application's endpoint
    155           * @param   dstAddr - where you want the message to go
    156           * @param   channel - returned inteval (delivered @ 0; received @ 1)
    157           * @param   endTime - UTC time for the starting time of requested interval
    158           * @param   numOfPeriods - number of periods requested
    159           * @param   disableDefaultRsp - disable default response
    160           * @param   seqNum - ZCL sequence number
    161           *
    162           * @return  ZStatus_t
    163           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ??Subroutine0_0:
   \   000000   ........     CALLA   #??Subroutine27_0
   \                     ??CrossCallReturnLabel_131:
   \   000004   31501400     ADD.W   #0x14, SP
   \   000008   3817         POPM.W  #0x4, R11
   \   00000A   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ??Subroutine52_0:
   \   000000   4C4A         MOV.B   R10, R12
   \   000002   ........     BRA     #zcl_SendCommand

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ??Subroutine27_0:
   \   000000   0D48         MOV.W   R8, R13
   \   000002   ........     BRA     #??Subroutine52_0

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine7:
   \   000000   3E400207     MOV.W   #0x702, R14
   \   000004   ........     BRA     #??Subroutine0_0

   \                                 In  segment CODE, align 2
    164          ZStatus_t zclSE_SimpleMetering_Send_GetProfileCmd( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_SimpleMetering_Send_GetProfileCmd:
    165                                                                uint8 channel, uint32 endTime, uint8 numOfPeriods,
    166                                                                uint8 disableDefaultRsp, uint8 seqNum )
    167          {
   \   000000   3B15         PUSHM.W #0x4, R11
   \   000002   31800600     SUB.W   #0x6, SP
   \   000006   4A4C         MOV.B   R12, R10
   \   000008   084D         MOV.W   R13, R8
   \   00000A   4B4F         MOV.B   R15, R11
    168            uint8 buf[6];
    169          
    170            buf[0] = channel;
   \   00000C   C14E0000     MOV.B   R14, 0(SP)
    171            osal_buffer_uint32( &buf[1], endTime );
   \   000010   1E411200     MOV.W   0x12(SP), R14
   \   000014   1F411400     MOV.W   0x14(SP), R15
   \   000018   0C41         MOV.W   SP, R12
   \   00001A   1C53         ADD.W   #0x1, R12
   \   00001C   ........     CALLA   #osal_buffer_uint32
    172            buf[5] = numOfPeriods;
   \   000020   C14B0500     MOV.B   R11, 0x5(SP)
    173          
    174            return zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_SIMPLE_METERING,
    175                                    COMMAND_SE_GET_PROFILE_CMD, TRUE,
    176                                    ZCL_FRAME_CLIENT_SERVER_DIR, disableDefaultRsp, 0, seqNum, 6, buf );
   \   000024   0F41         MOV.W   SP, R15
   \   000026   0F12         PUSH.W  R15
   \   000028   30120600     PUSH.W  #0x6
   \   00002C   51121E00     PUSH.B  0x1e(SP)
   \   000030   0312         PUSH.W  #0x0
   \   000032   51122000     PUSH.B  0x20(SP)
   \   000036   4312         PUSH.B  #0x0
   \   000038   5312         PUSH.B  #0x1
   \   00003A   4F43         MOV.B   #0x0, R15
   \   00003C   ....         JMP     ?Subroutine7
   \   00003E   0343         NOP
    177          }
    178          
    179          /*********************************************************************
    180           * @fn      zclSE_SimpleMetering_Send_GetProfileRsp
    181           *
    182           * @brief   Call to send out a Get Profile Response
    183           *
    184           * @param   srcEP - Sending application's endpoint
    185           * @param   dstAddr - where you want the message to go
    186           * @param   endTime - UTC time for the starting time of requested interval
    187           * @param   intervals - data buffer holding an array of interval data captured
    188           *          using the period
    189           *          specified by the ProfileIntervalPeriod attribute. Data is organized
    190           *          in a reverse chronological order, the most recent interval is
    191           *          transmitted first and the oldest interval is transmitted last.
    192           *          Invalid intervals intervals should be marked as 0xFFFFFF
    193           * @param   len - length of the intervals buffer
    194           * @param   disableDefaultRsp - disable default response
    195           * @param   seqNum - ZCL sequence number
    196           *
    197           * @return  ZStatus_t
    198           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine56:
   \   000000   ........     CALLA   #osal_mem_free
   \   000004   4C4A         MOV.B   R10, R12
   \   000006   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine25:
   \   000000   4A4C         MOV.B   R12, R10
   \   000002   0C48         MOV.W   R8, R12
   \   000004   ....         JMP     ?Subroutine56
   \   000006   0343         NOP

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine22:
   \   000000   0C47         MOV.W   R7, R12
   \   000002                REQUIRE ??Subroutine65_0
   \   000002                // Fall through to label ??Subroutine65_0

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ??Subroutine65_0:
   \   000000   ........     CALLA   #osal_mem_alloc
   \   000004   084C         MOV.W   R12, R8
   \   000006   0C93         CMP.W   #0x0, R12
   \   000008   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
    199          ZStatus_t zclSE_SimpleMetering_Send_GetProfileRsp( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_SimpleMetering_Send_GetProfileRsp:
    200                                                             uint32 endTime, uint8 rspStatus, uint8 profileIntervalPeriod,
    201                                                             uint8 numOfPeriodDelivered, uint24 *intervals,
    202                                                             uint8 disableDefaultRsp, uint8 seqNum )
    203          {
   \   000000   7B15         PUSHM.W #0x8, R11
   \   000002   444C         MOV.B   R12, R4
   \   000004   094D         MOV.W   R13, R9
   \   000006   0A4E         MOV.W   R14, R10
   \   000008   0B4F         MOV.W   R15, R11
   \   00000A   56411800     MOV.B   0x18(SP), R6
    204            uint8 *buf;
    205            uint8 *pBuf;
    206            uint8 i;
    207            uint8 len;
    208            ZStatus_t status;
    209          
    210            // endTime + status + profileIntervalPeriod + numOfEntry + array
    211            len = 4 + 1 + 1 + 1 + (3 * numOfPeriodDelivered);
   \   00000E   77400700     MOV.B   #0x7, R7
   \   000012                RPT     #0x3
   \   000012   42184756     ADDX.B  R6, R7
    212            buf = osal_mem_alloc( len );
   \   000016   4747         MOV.B   R7, R7
   \   000018   ........     CALLA   #?Subroutine22
    213            if ( buf == NULL )
   \                     ??CrossCallReturnLabel_140:
   \   00001C   0320         JNE     ??zclSE_SimpleMetering_Send_GetProfileRsp_1
    214            {
    215              return (ZMemError);
   \   00001E   7C401000     MOV.B   #0x10, R12
   \   000022   313C         JMP     ??zclSE_SimpleMetering_Send_GetProfileRsp_2
    216            }
    217          
    218            osal_buffer_uint32( buf, endTime );
   \                     ??zclSE_SimpleMetering_Send_GetProfileRsp_1:
   \   000024   0E4A         MOV.W   R10, R14
   \   000026   0F4B         MOV.W   R11, R15
   \   000028   ........     CALLA   #osal_buffer_uint32
    219            buf[4] = rspStatus;
   \   00002C   D84114000400 MOV.B   0x14(SP), 0x4(R8)
    220            buf[5] = profileIntervalPeriod;
   \   000032   D84116000500 MOV.B   0x16(SP), 0x5(R8)
    221          
    222            // Starting of the array of uint24
    223            buf[6] = numOfPeriodDelivered;   // Number of entries in the array
   \   000038   C8460600     MOV.B   R6, 0x6(R8)
    224            pBuf = &buf[7];
   \   00003C   0C48         MOV.W   R8, R12
   \   00003E   3C500700     ADD.W   #0x7, R12
    225            for( i = 0; i< numOfPeriodDelivered; i++ )
   \   000042   4A43         MOV.B   #0x0, R10
   \   000044   0A3C         JMP     ??zclSE_SimpleMetering_Send_GetProfileRsp_3
    226            {
    227              pBuf = osal_buffer_uint24( pBuf, *intervals++ );
   \                     ??zclSE_SimpleMetering_Send_GetProfileRsp_0:
   \   000046   1F411A00     MOV.W   0x1a(SP), R15
   \   00004A   A1521A00     ADD.W   #0x4, 0x1a(SP)
   \   00004E   2E4F         MOV.W   @R15, R14
   \   000050   1F4F0200     MOV.W   0x2(R15), R15
   \   000054   ........     CALLA   #osal_buffer_uint24
    228            }
   \   000058   5A53         ADD.B   #0x1, R10
   \                     ??zclSE_SimpleMetering_Send_GetProfileRsp_3:
   \   00005A   4A96         CMP.B   R6, R10
   \   00005C   F42B         JNC     ??zclSE_SimpleMetering_Send_GetProfileRsp_0
    229          
    230            status = zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_SIMPLE_METERING,
    231                                    COMMAND_SE_GET_PROFILE_RSP, TRUE,
    232                                    ZCL_FRAME_SERVER_CLIENT_DIR, disableDefaultRsp, 0, seqNum, len, buf );
   \   00005E   0812         PUSH.W  R8
   \   000060   0712         PUSH.W  R7
   \   000062   51122400     PUSH.B  0x24(SP)
   \   000066   0312         PUSH.W  #0x0
   \   000068   51122600     PUSH.B  0x26(SP)
   \   00006C   5312         PUSH.B  #0x1
   \   00006E   5312         PUSH.B  #0x1
   \   000070   4F43         MOV.B   #0x0, R15
   \   000072   3E400207     MOV.W   #0x702, R14
   \   000076   0D49         MOV.W   R9, R13
   \   000078   4C44         MOV.B   R4, R12
   \   00007A   ........     CALLA   #zcl_SendCommand
   \   00007E   ........     CALLA   #?Subroutine25
    233            osal_mem_free( buf );
    234            return status;
   \                     ??CrossCallReturnLabel_97:
   \   000082   31500E00     ADD.W   #0xe, SP
   \                     ??zclSE_SimpleMetering_Send_GetProfileRsp_2:
   \   000086   7417         POPM.W  #0x8, R11
   \   000088   1001         RETA
    235          }
    236          
    237          /*********************************************************************
    238           * @fn      zclSE_SimpleMetering_Send_ReqMirrorRsp
    239           *
    240           * @brief   Call to send out a Request Mirror Response
    241           *
    242           * @param   srcEP - Sending application's endpoint
    243           * @param   dstAddr - where you want the message to go
    244           *
    245           * @return  ZStatus_t
    246           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine1:
   \   000000   3E400207     MOV.W   #0x702, R14
   \   000004   ........     CALLA   #zcl_SendCommand
   \   000008   31501000     ADD.W   #0x10, SP
   \   00000C   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
    247          ZStatus_t zclSE_SimpleMetering_Send_ReqMirrorRsp( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_SimpleMetering_Send_ReqMirrorRsp:
    248                                                                uint16 endpointId,
    249                                                                uint8 disableDefaultRsp, uint8 seqNum )
    250          {
   \   000000   2183         SUB.W   #0x2, SP
    251            ZStatus_t status;
    252            uint8 buf[2];
    253          
    254            buf[0] = (uint8) endpointId ;
   \   000002   ........     CALLA   #?Subroutine43
    255            buf[1] = (uint8)( endpointId >> 8 );
    256          
    257            status = zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_SIMPLE_METERING,
    258                                    COMMAND_SE_REQ_MIRROR_RSP, TRUE,
    259                                    ZCL_FRAME_CLIENT_SERVER_DIR, disableDefaultRsp, 0, seqNum, 2, buf );
    260          
    261            return status ;
   \                     ??CrossCallReturnLabel_72:
   \   000006   0E41         MOV.W   SP, R14
   \   000008   0E12         PUSH.W  R14
   \   00000A   2312         PUSH.W  #0x2
   \   00000C   51120C00     PUSH.B  0xc(SP)
   \   000010   0312         PUSH.W  #0x0
   \   000012   4F12         PUSH.B  R15
   \   000014   4312         PUSH.B  #0x0
   \   000016   5312         PUSH.B  #0x1
   \   000018   5F43         MOV.B   #0x1, R15
   \   00001A   ....         JMP     ?Subroutine1
   \   00001C   0343         NOP
    262          }

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine43:
   \   000000   C14E0400     MOV.B   R14, 0x4(SP)
   \   000004                RPT     #0x8
   \   000004   47190E10     RRUX.W  R14
   \   000008   C14E0500     MOV.B   R14, 0x5(SP)
   \   00000C   1001         RETA
    263          
    264          /*********************************************************************
    265           * @fn      zclSE_SimpleMetering_Send_RemMirrorRsp
    266           *
    267           * @brief   Call to send out a Remove Mirror Response
    268           *
    269           * @param   srcEP - Sending application's endpoint
    270           * @param   dstAddr - where you want the message to go
    271           *
    272           * @return  ZStatus_t
    273           */

   \                                 In  segment CODE, align 2, keep-with-next
    274          ZStatus_t zclSE_SimpleMetering_Send_RemMirrorRsp( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_SimpleMetering_Send_RemMirrorRsp:
    275                                                                uint16 endpointId,
    276                                                                uint8 disableDefaultRsp, uint8 seqNum )
    277          {
   \   000000   2183         SUB.W   #0x2, SP
    278            ZStatus_t status;
    279            uint8 buf[2];
    280          
    281            buf[0] = (uint8) endpointId ;
   \   000002   ........     CALLA   #?Subroutine43
    282            buf[1] = (uint8)( endpointId >> 8 );
    283          
    284            status = zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_SIMPLE_METERING,
    285                                    COMMAND_SE_MIRROR_REM_RSP, TRUE,
    286                                    ZCL_FRAME_CLIENT_SERVER_DIR, disableDefaultRsp, 0, seqNum, 2, buf );
    287          
    288            return status ;
   \                     ??CrossCallReturnLabel_71:
   \   000006   0E41         MOV.W   SP, R14
   \   000008   0E12         PUSH.W  R14
   \   00000A   2312         PUSH.W  #0x2
   \   00000C   51120C00     PUSH.B  0xc(SP)
   \   000010   0312         PUSH.W  #0x0
   \   000012   4F12         PUSH.B  R15
   \   000014   4312         PUSH.B  #0x0
   \   000016   5312         PUSH.B  #0x1
   \   000018   6F43         MOV.B   #0x2, R15
   \   00001A   ....         JMP     ?Subroutine1
   \   00001C   0343         NOP
    289          }
    290          
    291          
    292          /*********************************************************************
    293           * @fn      zclSE_SimpleMetering_Send_ReqFastPollModeCmd
    294           *
    295           * @brief   Call to send out a Request Fast Poll Mode Command
    296           *
    297           * @param   srcEP - Sending application's endpoint
    298           * @param   dstAddr - where you want the message to go
    299           * @param   cmd - zclCCReqFastPollModeCmd_t command
    300           * @param   disableDefaultRsp - disable default response
    301           * @param   seqNum - ZCL sequence number
    302           *
    303           * @return  ZStatus_t
    304           */

   \                                 In  segment CODE, align 2, keep-with-next
    305          ZStatus_t zclSE_SimpleMetering_Send_ReqFastPollModeCmd( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_SimpleMetering_Send_ReqFastPollModeCmd:
    306                                                                  zclCCReqFastPollModeCmd_t *cmd,
    307                                                                  uint8 disableDefaultRsp, uint8 seqNum )
    308          {
   \   000000   2183         SUB.W   #0x2, SP
    309            ZStatus_t status;
    310            uint8 buf[PACKET_LEN_SE_METERING_FAST_POLLING_REQ];
    311          
    312            buf[0] = cmd->fastPollUpdatePeriod;
   \   000002   E14E0000     MOV.B   @R14, 0(SP)
    313            buf[1] = cmd->duration;
   \   000006   D14E01000100 MOV.B   0x1(R14), 0x1(SP)
    314          
    315            status = zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_SIMPLE_METERING,
    316                                    COMMAND_SE_REQ_FAST_POLL_MODE_CMD, TRUE,
    317                                    ZCL_FRAME_CLIENT_SERVER_DIR, disableDefaultRsp, 0, seqNum,
    318                                    PACKET_LEN_SE_METERING_FAST_POLLING_REQ, buf );
    319          
    320            return status ;
   \   00000C   0E41         MOV.W   SP, R14
   \   00000E   0E12         PUSH.W  R14
   \   000010   2312         PUSH.W  #0x2
   \   000012   51120C00     PUSH.B  0xc(SP)
   \   000016   0312         PUSH.W  #0x0
   \   000018   4F12         PUSH.B  R15
   \   00001A   4312         PUSH.B  #0x0
   \   00001C   5312         PUSH.B  #0x1
   \   00001E   7F400300     MOV.B   #0x3, R15
   \   000022                REQUIRE ?Subroutine1
   \   000022                // Fall through to label ?Subroutine1
    321          }
    322          
    323          /*********************************************************************
    324           * @fn      zclSE_SimpleMetering_Send_ReqFastPollModeRsp
    325           *
    326           * @brief   Call to send out a Request Fast Poll Mode Response
    327           *
    328           * @param   srcEP - Sending application's endpoint
    329           * @param   dstAddr - where you want the message to go
    330           * @param   cmd - zclCCReqFastPollModeRsp_t command
    331           * @param   disableDefaultRsp - disable default response
    332           * @param   seqNum - ZCL sequence number
    333           *
    334           * @return  ZStatus_t
    335           */

   \                                 In  segment CODE, align 2, keep-with-next
    336          ZStatus_t zclSE_SimpleMetering_Send_ReqFastPollModeRsp( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_SimpleMetering_Send_ReqFastPollModeRsp:
    337                                                                  zclCCReqFastPollModeRsp_t *cmd,
    338                                                                  uint8 disableDefaultRsp, uint8 seqNum )
    339          {
   \   000000   3B15         PUSHM.W #0x4, R11
   \   000002   31800600     SUB.W   #0x6, SP
   \   000006   4A4C         MOV.B   R12, R10
   \   000008   084D         MOV.W   R13, R8
   \   00000A   4B4F         MOV.B   R15, R11
    340            ZStatus_t status;
    341            uint8 buf[PACKET_LEN_SE_METERING_FAST_POLLING_RSP];
    342          
    343            buf[0] = cmd->appliedUpdatePeriod;
   \   00000C   E14E0000     MOV.B   @R14, 0(SP)
    344            osal_buffer_uint32( &buf[1], cmd->fastPollModeEndTime );
   \   000010   0F4E         MOV.W   R14, R15
   \   000012   1E4F0200     MOV.W   0x2(R15), R14
   \   000016   1F4F0400     MOV.W   0x4(R15), R15
   \   00001A   0C41         MOV.W   SP, R12
   \   00001C   1C53         ADD.W   #0x1, R12
   \   00001E   ........     CALLA   #osal_buffer_uint32
    345          
    346            status = zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_SIMPLE_METERING,
    347                                    COMMAND_SE_REQ_FAST_POLL_MODE_RSP, TRUE,
    348                                    ZCL_FRAME_SERVER_CLIENT_DIR, disableDefaultRsp, 0, seqNum,
    349                                    PACKET_LEN_SE_METERING_FAST_POLLING_RSP, buf );
    350          
    351            return status ;
   \   000022   0F41         MOV.W   SP, R15
   \   000024   0F12         PUSH.W  R15
   \   000026   30120500     PUSH.W  #0x5
   \   00002A   51121800     PUSH.B  0x18(SP)
   \   00002E   0312         PUSH.W  #0x0
   \   000030   4B12         PUSH.B  R11
   \   000032   5312         PUSH.B  #0x1
   \   000034   5312         PUSH.B  #0x1
   \   000036   7F400300     MOV.B   #0x3, R15
   \   00003A                REQUIRE ?Subroutine7
   \   00003A                // Fall through to label ?Subroutine7
    352          }
    353          
    354          #endif  // ZCL_SIMPLE_METERING
    355          
    356          
    357          #ifdef ZCL_PRICING
    358          
    359          /*********************************************************************
    360           * Call to send out a Get Scheduled Price Command
    361           *
    362           * @param   srcEP - Sending application's endpoint
    363           * @param   dstAddr - where you want the message to go
    364           * @param   cmd - command payload
    365           * @param   disableDefaultRsp - disable default response
    366           * @param   seqNum - ZCL sequence number
    367           *
    368           * @return  ZStatus_t
    369           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine0:
   \   000000   3E400007     MOV.W   #0x700, R14
   \   000004                REQUIRE ??Subroutine0_0
   \   000004                // Fall through to label ??Subroutine0_0

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine39:
   \   000000   ........     CALLA   #osal_buffer_uint32
   \   000004   D14904000800 MOV.B   0x4(R9), 0x8(SP)
   \   00000A   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine24:
   \   000000   4A4C         MOV.B   R12, R10
   \   000002   084D         MOV.W   R13, R8
   \   000004   094E         MOV.W   R14, R9
   \   000006   4B4F         MOV.B   R15, R11
   \   000008   2E49         MOV.W   @R9, R14
   \   00000A   1F490200     MOV.W   0x2(R9), R15
   \   00000E   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
    370          ZStatus_t zclSE_Pricing_Send_GetScheduledPrice( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_Pricing_Send_GetScheduledPrice:
    371                                                      zclCCGetScheduledPrice_t *cmd,
    372                                                      uint8 disableDefaultRsp, uint8 seqNum )
    373          {
   \   000000   3B15         PUSHM.W #0x4, R11
   \   000002   31800600     SUB.W   #0x6, SP
   \   000006   ........     CALLA   #?Subroutine24
    374            uint8 buf[5];
    375            ZStatus_t status;
    376          
    377            osal_buffer_uint32( buf, cmd->startTime );
   \                     ??CrossCallReturnLabel_29:
   \   00000A   0C41         MOV.W   SP, R12
   \   00000C   ........     CALLA   #?Subroutine39
    378            buf[4] = cmd->numEvents;
    379          
    380            status = zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_PRICING,
    381                                    COMMAND_SE_GET_SCHEDULED_PRICE, TRUE,
    382                                    ZCL_FRAME_CLIENT_SERVER_DIR, disableDefaultRsp, 0,
    383                                    seqNum, 5, buf );
    384          
    385            return status;
   \                     ??CrossCallReturnLabel_62:
   \   000010   0F41         MOV.W   SP, R15
   \   000012   0F12         PUSH.W  R15
   \   000014   30120500     PUSH.W  #0x5
   \   000018   51121800     PUSH.B  0x18(SP)
   \   00001C   0312         PUSH.W  #0x0
   \   00001E   4B12         PUSH.B  R11
   \   000020   4312         PUSH.B  #0x0
   \   000022   5312         PUSH.B  #0x1
   \   000024   5F43         MOV.B   #0x1, R15
   \   000026   ........     BRA     #?Subroutine0
    386          }
    387          
    388          /*********************************************************************
    389           * @fn      zclSE_Pricing_Send_PublishPrice
    390           *
    391           * @brief   Call to send out a Publish Price Command
    392           *
    393           * @param   srcEP - Sending application's endpoint
    394           * @param   dstAddr - where you want the message to go
    395           * @param   cmd - command payload
    396           * @param   disableDefaultRsp - disable default response
    397           * @param   seqNum - ZCL sequence number
    398           *
    399           * @return  ZStatus_t
    400           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine52:
   \   000000   0D49         MOV.W   R9, R13
   \   000002                REQUIRE ??Subroutine52_0
   \   000002                // Fall through to label ??Subroutine52_0

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine41:
   \   000000   2E46         MOV.W   @R6, R14
   \   000002   1F460200     MOV.W   0x2(R6), R15
   \   000006   ........     BRA     #osal_buffer_uint32

   \                                 In  segment CODE, align 2, keep-with-next
    401          ZStatus_t zclSE_Pricing_Send_PublishPrice( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_Pricing_Send_PublishPrice:
    402                                                      zclCCPublishPrice_t *cmd,
    403                                                      uint8 disableDefaultRsp, uint8 seqNum )
    404          {
   \   000000   5B15         PUSHM.W #0x6, R11
   \   000002   4A4C         MOV.B   R12, R10
   \   000004   094D         MOV.W   R13, R9
   \   000006   064E         MOV.W   R14, R6
   \   000008   4B4F         MOV.B   R15, R11
    405            uint8 *buf;
    406            uint8 *pBuf;
    407            uint16 bufLen;
    408            ZStatus_t status;
    409          
    410            bufLen = PACKET_LEN_SE_PUBLISH_PRICE + cmd->rateLabel.strLen;
   \   00000A   574E0400     MOV.B   0x4(R14), R7
   \   00000E   37502A00     ADD.W   #0x2a, R7
    411            buf = osal_mem_alloc( bufLen );
   \   000012   ........     CALLA   #?Subroutine22
    412            if ( buf == NULL )
   \                     ??CrossCallReturnLabel_139:
   \   000016   0320         JNE     ??zclSE_Pricing_Send_PublishPrice_0
    413            {
    414              return (ZMemError);
   \   000018   7C401000     MOV.B   #0x10, R12
   \   00001C   703C         JMP     ??zclSE_Pricing_Send_PublishPrice_1
    415            }
    416          
    417            pBuf = buf;
    418          
    419            pBuf = osal_buffer_uint32( pBuf, cmd->providerId );
   \                     ??zclSE_Pricing_Send_PublishPrice_0:
   \   00001E   ........     CALLA   #?Subroutine41
    420            *pBuf++ = cmd->rateLabel.strLen;
   \                     ??CrossCallReturnLabel_66:
   \   000022   DC4604000000 MOV.B   0x4(R6), 0(R12)
   \   000028   1C53         ADD.W   #0x1, R12
    421            pBuf = osal_memcpy( pBuf, cmd->rateLabel.pStr, cmd->rateLabel.strLen );
   \   00002A   5E460400     MOV.B   0x4(R6), R14
   \   00002E   1D460600     MOV.W   0x6(R6), R13
   \   000032   ........     CALLA   #osal_memcpy
    422            pBuf = osal_buffer_uint32( pBuf, cmd->issuerEventId );
   \   000036   ........     CALLA   #?Subroutine42
    423            pBuf = osal_buffer_uint32( pBuf, cmd->currentTime );
   \                     ??CrossCallReturnLabel_69:
   \   00003A   1E460C00     MOV.W   0xc(R6), R14
   \   00003E   1F460E00     MOV.W   0xe(R6), R15
   \   000042   ........     CALLA   #osal_buffer_uint32
    424            *pBuf++ = cmd->unitOfMeasure;
   \   000046   DC4610000000 MOV.B   0x10(R6), 0(R12)
   \   00004C   1C53         ADD.W   #0x1, R12
    425            *pBuf++ = LO_UINT16( cmd->currency );
   \   00004E   DC4612000000 MOV.B   0x12(R6), 0(R12)
   \   000054   1C53         ADD.W   #0x1, R12
    426            *pBuf++ = HI_UINT16( cmd->currency );
   \   000056   DC4613000000 MOV.B   0x13(R6), 0(R12)
   \   00005C   1C53         ADD.W   #0x1, R12
    427            *pBuf++ = cmd->priceTrailingDigit;
   \   00005E   DC4614000000 MOV.B   0x14(R6), 0(R12)
   \   000064   1C53         ADD.W   #0x1, R12
    428            *pBuf++ = cmd->numberOfPriceTiers;
   \   000066   DC4615000000 MOV.B   0x15(R6), 0(R12)
   \   00006C   1C53         ADD.W   #0x1, R12
    429            pBuf = osal_buffer_uint32( pBuf, cmd->startTime );
   \   00006E   1E461600     MOV.W   0x16(R6), R14
   \   000072   1F461800     MOV.W   0x18(R6), R15
   \   000076   ........     CALLA   #osal_buffer_uint32
    430            *pBuf++ = LO_UINT16( cmd->durationInMinutes );
   \   00007A   DC461A000000 MOV.B   0x1a(R6), 0(R12)
   \   000080   1C53         ADD.W   #0x1, R12
    431            *pBuf++ = HI_UINT16( cmd->durationInMinutes );
   \   000082   DC461B000000 MOV.B   0x1b(R6), 0(R12)
   \   000088   1C53         ADD.W   #0x1, R12
    432            pBuf = osal_buffer_uint32( pBuf, cmd->price );
   \   00008A   1E461C00     MOV.W   0x1c(R6), R14
   \   00008E   1F461E00     MOV.W   0x1e(R6), R15
   \   000092   ........     CALLA   #osal_buffer_uint32
    433            *pBuf++ = cmd->priceRatio;
   \   000096   DC4620000000 MOV.B   0x20(R6), 0(R12)
   \   00009C   1C53         ADD.W   #0x1, R12
    434            pBuf = osal_buffer_uint32( pBuf, cmd->generationPrice );
   \   00009E   1E462200     MOV.W   0x22(R6), R14
   \   0000A2   1F462400     MOV.W   0x24(R6), R15
   \   0000A6   ........     CALLA   #osal_buffer_uint32
    435            *pBuf++ = cmd->generationPriceRatio;
   \   0000AA   DC4626000000 MOV.B   0x26(R6), 0(R12)
   \   0000B0   1C53         ADD.W   #0x1, R12
    436            pBuf = osal_buffer_uint32( pBuf, cmd->alternateCostDelivered );
   \   0000B2   1E462800     MOV.W   0x28(R6), R14
   \   0000B6   1F462A00     MOV.W   0x2a(R6), R15
   \   0000BA   ........     CALLA   #osal_buffer_uint32
    437            *pBuf++ = cmd->alternateCostUnit;
   \   0000BE   DC462C000000 MOV.B   0x2c(R6), 0(R12)
   \   0000C4   1C53         ADD.W   #0x1, R12
    438            *pBuf++ = cmd->alternateCostTrailingDigit;
   \   0000C6   DC462D000000 MOV.B   0x2d(R6), 0(R12)
   \   0000CC   1C53         ADD.W   #0x1, R12
    439            *pBuf++ = cmd->numberOfBlockThresholds;
   \   0000CE   DC462E000000 MOV.B   0x2e(R6), 0(R12)
   \   0000D4   1C53         ADD.W   #0x1, R12
    440            *pBuf = cmd->priceControl;
   \   0000D6   DC462F000000 MOV.B   0x2f(R6), 0(R12)
    441          
    442            status = zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_PRICING,
    443                                    COMMAND_SE_PUBLISH_PRICE, TRUE,
    444                                    ZCL_FRAME_SERVER_CLIENT_DIR, disableDefaultRsp, 0,
    445                                    seqNum, bufLen, buf );
   \   0000DC   0812         PUSH.W  R8
   \   0000DE   0712         PUSH.W  R7
   \   0000E0   51121600     PUSH.B  0x16(SP)
   \   0000E4   0312         PUSH.W  #0x0
   \   0000E6   4B12         PUSH.B  R11
   \   0000E8   5312         PUSH.B  #0x1
   \   0000EA   5312         PUSH.B  #0x1
   \   0000EC   4F43         MOV.B   #0x0, R15
   \   0000EE   3E400007     MOV.W   #0x700, R14
   \   0000F2   ........     CALLA   #?Subroutine52
   \                     ??CrossCallReturnLabel_136:
   \   0000F6   ........     CALLA   #?Subroutine25
    446            osal_mem_free(buf);
    447          
    448            return status;
   \                     ??CrossCallReturnLabel_96:
   \   0000FA   31500E00     ADD.W   #0xe, SP
   \                     ??zclSE_Pricing_Send_PublishPrice_1:
   \   0000FE   5617         POPM.W  #0x6, R11
   \   000100   1001         RETA
    449          }

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine42:
   \   000000   1E460800     MOV.W   0x8(R6), R14
   \   000004   1F460A00     MOV.W   0xa(R6), R15
   \   000008   ........     BRA     #osal_buffer_uint32
    450          
    451          /*********************************************************************
    452           * @fn      zclSE_Pricing_Send_PriceAcknowledgement
    453           *
    454           * @brief   Call to send out a Price Acknowledgement
    455           *
    456           * @param   srcEP - Sending application's endpoint
    457           * @param   dstAddr - where you want the message to go
    458           * @param   cmd - command payload
    459           * @param   disableDefaultRsp - disable default response
    460           * @param   seqNum - ZCL sequence number
    461           *
    462           * @return  ZStatus_t
    463           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine40:
   \   000000   4A4C         MOV.B   R12, R10
   \   000002   084D         MOV.W   R13, R8
   \   000004   094E         MOV.W   R14, R9
   \   000006   464F         MOV.B   R15, R6
   \   000008   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine23:
   \   000000   ........     CALLA   #osal_mem_alloc
   \   000004   0B4C         MOV.W   R12, R11
   \   000006   0C93         CMP.W   #0x0, R12
   \   000008   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine16:
   \   000000   4A4C         MOV.B   R12, R10
   \   000002   0C4B         MOV.W   R11, R12
   \   000004                REQUIRE ?Subroutine56
   \   000004                // Fall through to label ?Subroutine56

   \                                 In  segment CODE, align 2, keep-with-next
    464          ZStatus_t zclSE_Pricing_Send_PriceAcknowledgement( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_Pricing_Send_PriceAcknowledgement:
    465                                                      zclCCPriceAcknowledgement_t *cmd,
    466                                                      uint8 disableDefaultRsp, uint8 seqNum )
    467          {
   \   000000   5B15         PUSHM.W #0x6, R11
   \   000002   ........     CALLA   #?Subroutine40
    468            uint8 *buf;
    469            uint8 *pBuf;
    470            ZStatus_t status;
    471          
    472            buf = osal_mem_alloc( PACKET_LEN_SE_PRICE_ACKNOWLEDGEMENT );
   \                     ??CrossCallReturnLabel_65:
   \   000006   3C400D00     MOV.W   #0xd, R12
   \   00000A   ........     CALLA   #?Subroutine23
    473            if ( buf == NULL )
   \                     ??CrossCallReturnLabel_25:
   \   00000E   0320         JNE     ??zclSE_Pricing_Send_PriceAcknowledgement_0
    474            {
    475              return (ZMemError);
   \   000010   7C401000     MOV.B   #0x10, R12
   \   000014   173C         JMP     ??zclSE_Pricing_Send_PriceAcknowledgement_1
    476            }
    477          
    478            pBuf = buf;
    479          
    480            pBuf = osal_buffer_uint32( pBuf, cmd->providerId );
   \                     ??zclSE_Pricing_Send_PriceAcknowledgement_0:
   \   000016   ........     CALLA   #?Subroutine37
    481            pBuf = osal_buffer_uint32( pBuf, cmd->issuerEventId );
    482            pBuf = osal_buffer_uint32( pBuf, cmd->priceAckTime );
    483            *pBuf = cmd->control;
   \                     ??CrossCallReturnLabel_86:
   \   00001A   DC490C000000 MOV.B   0xc(R9), 0(R12)
    484          
    485            status = zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_PRICING,
    486                                    COMMAND_SE_PRICE_ACKNOWLEDGEMENT, TRUE,
    487                                    ZCL_FRAME_CLIENT_SERVER_DIR, disableDefaultRsp, 0,
    488                                    seqNum, PACKET_LEN_SE_PRICE_ACKNOWLEDGEMENT, buf );
   \   000020   0B12         PUSH.W  R11
   \   000022   30120D00     PUSH.W  #0xd
   \   000026   51121600     PUSH.B  0x16(SP)
   \   00002A   0312         PUSH.W  #0x0
   \   00002C   4612         PUSH.B  R6
   \   00002E   4312         PUSH.B  #0x0
   \   000030   5312         PUSH.B  #0x1
   \   000032   6F43         MOV.B   #0x2, R15
   \   000034   3E400007     MOV.W   #0x700, R14
   \   000038   ........     CALLA   #??Subroutine27_0
   \                     ??CrossCallReturnLabel_133:
   \   00003C   ........     CALLA   #?Subroutine16
    489          
    490            osal_mem_free(buf);
    491          
    492            return status;
   \                     ??CrossCallReturnLabel_100:
   \   000040   31500E00     ADD.W   #0xe, SP
   \                     ??zclSE_Pricing_Send_PriceAcknowledgement_1:
   \   000044   5617         POPM.W  #0x6, R11
   \   000046   1001         RETA
    493          }

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine37:
   \   000000   2E49         MOV.W   @R9, R14
   \   000002   1F490200     MOV.W   0x2(R9), R15
   \   000006   ........     CALLA   #?Subroutine50
   \                     ??CrossCallReturnLabel_84:
   \   00000A   ........     CALLA   #osal_buffer_uint32
   \   00000E                REQUIRE ?Subroutine51
   \   00000E                // Fall through to label ?Subroutine51

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine51:
   \   000000   1E490800     MOV.W   0x8(R9), R14
   \   000004   1F490A00     MOV.W   0xa(R9), R15
   \   000008   ........     BRA     #osal_buffer_uint32

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine50:
   \   000000   ........     CALLA   #osal_buffer_uint32
   \   000004   1E490400     MOV.W   0x4(R9), R14
   \   000008   1F490600     MOV.W   0x6(R9), R15
   \   00000C   1001         RETA
    494          
    495          /*********************************************************************
    496           * @fn      zclSE_Pricing_Send_GetBlockPeriod
    497           *
    498           * @brief   Call to send out a Get Block Period
    499           *
    500           * @param   srcEP - Sending application's endpoint
    501           * @param   dstAddr - where you want the message to go
    502           * @param   cmd - command payload
    503           * @param   disableDefaultRsp - disable default response
    504           * @param   seqNum - ZCL sequence number
    505           *
    506           * @return  ZStatus_t
    507           */

   \                                 In  segment CODE, align 2, keep-with-next
    508          ZStatus_t zclSE_Pricing_Send_GetBlockPeriod( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_Pricing_Send_GetBlockPeriod:
    509                                                       zclCCGetBlockPeriod_t *cmd,
    510                                                       uint8 disableDefaultRsp, uint8 seqNum )
    511          {
   \   000000   3B15         PUSHM.W #0x4, R11
   \   000002   31800600     SUB.W   #0x6, SP
   \   000006   ........     CALLA   #?Subroutine24
    512            uint8 buf[5];
    513            ZStatus_t status;
    514          
    515            osal_buffer_uint32( buf, cmd->startTime );
   \                     ??CrossCallReturnLabel_28:
   \   00000A   0C41         MOV.W   SP, R12
   \   00000C   ........     CALLA   #?Subroutine39
    516            buf[4] = cmd->numEvents;
    517          
    518            status = zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_PRICING,
    519                                    COMMAND_SE_GET_BLOCK_PERIOD, TRUE,
    520                                    ZCL_FRAME_CLIENT_SERVER_DIR, disableDefaultRsp, 0,
    521                                    seqNum, 5, buf );
    522          
    523            return status;
   \                     ??CrossCallReturnLabel_61:
   \   000010   0F41         MOV.W   SP, R15
   \   000012   0F12         PUSH.W  R15
   \   000014   30120500     PUSH.W  #0x5
   \   000018   51121800     PUSH.B  0x18(SP)
   \   00001C   0312         PUSH.W  #0x0
   \   00001E   4B12         PUSH.B  R11
   \   000020   4312         PUSH.B  #0x0
   \   000022   5312         PUSH.B  #0x1
   \   000024   7F400300     MOV.B   #0x3, R15
   \   000028   ....         JMP     ?Subroutine0
   \   00002A   0343         NOP
    524          }
    525          
    526          /*********************************************************************
    527           * @fn      zclSE_Pricing_Send_PublishBlockPeriod
    528           *
    529           * @brief   Call to send out a Publish Block Period
    530           *
    531           * @param   srcEP - Sending application's endpoint
    532           * @param   dstAddr - where you want the message to go
    533           * @param   cmd - command payload
    534           * @param   disableDefaultRsp - disable default response
    535           * @param   seqNum - ZCL sequence number
    536           *
    537           * @return  ZStatus_t
    538           */

   \                                 In  segment CODE, align 2, keep-with-next
    539          ZStatus_t zclSE_Pricing_Send_PublishBlockPeriod( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_Pricing_Send_PublishBlockPeriod:
    540                                                      zclCCPublishBlockPeriod_t *cmd,
    541                                                      uint8 disableDefaultRsp, uint8 seqNum )
    542          {
   \   000000   5B15         PUSHM.W #0x6, R11
   \   000002   ........     CALLA   #?Subroutine40
    543            uint8 *buf;
    544            uint8 *pBuf;
    545            uint16 bufLen;
    546            ZStatus_t status;
    547          
    548            bufLen = PACKET_LEN_SE_PUBLISH_BLOCK_PERIOD;
    549            buf = osal_mem_alloc( bufLen );
   \                     ??CrossCallReturnLabel_64:
   \   000006   3C401100     MOV.W   #0x11, R12
   \   00000A   ........     CALLA   #?Subroutine23
    550            if ( buf == NULL )
   \                     ??CrossCallReturnLabel_24:
   \   00000E   0320         JNE     ??zclSE_Pricing_Send_PublishBlockPeriod_0
    551            {
    552              return (ZMemError);
   \   000010   7C401000     MOV.B   #0x10, R12
   \   000014   213C         JMP     ??zclSE_Pricing_Send_PublishBlockPeriod_1
    553            }
    554          
    555            pBuf = buf;
    556          
    557            pBuf = osal_buffer_uint32( pBuf, cmd->providerId );
   \                     ??zclSE_Pricing_Send_PublishBlockPeriod_0:
   \   000016   ........     CALLA   #?Subroutine37
    558            pBuf = osal_buffer_uint32( pBuf, cmd->issuerEventId );
    559            pBuf = osal_buffer_uint32( pBuf, cmd->blockPeriodStartTime );
    560            pBuf = osal_buffer_uint24( pBuf, cmd->blockPeriodDurInMins );
   \                     ??CrossCallReturnLabel_85:
   \   00001A   1E490C00     MOV.W   0xc(R9), R14
   \   00001E   1F490E00     MOV.W   0xe(R9), R15
   \   000022   ........     CALLA   #osal_buffer_uint24
    561            *pBuf++ = cmd->numPriceTiersAndBlock;
   \   000026   DC4910000000 MOV.B   0x10(R9), 0(R12)
   \   00002C   1C53         ADD.W   #0x1, R12
    562            *pBuf = cmd->blockPeriodControl;
   \   00002E   DC4911000000 MOV.B   0x11(R9), 0(R12)
    563          
    564            status = zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_PRICING,
    565                                    COMMAND_SE_PUBLISH_BLOCK_PERIOD, TRUE,
    566                                    ZCL_FRAME_SERVER_CLIENT_DIR, disableDefaultRsp, 0,
    567                                    seqNum, bufLen, buf );
   \   000034   0B12         PUSH.W  R11
   \   000036   30121100     PUSH.W  #0x11
   \   00003A   51121600     PUSH.B  0x16(SP)
   \   00003E   0312         PUSH.W  #0x0
   \   000040   4612         PUSH.B  R6
   \   000042   5312         PUSH.B  #0x1
   \   000044   5312         PUSH.B  #0x1
   \   000046   5F43         MOV.B   #0x1, R15
   \   000048   3E400007     MOV.W   #0x700, R14
   \   00004C   ........     CALLA   #??Subroutine27_0
   \                     ??CrossCallReturnLabel_132:
   \   000050   ........     CALLA   #?Subroutine16
    568            osal_mem_free(buf);
    569          
    570            return status;
   \                     ??CrossCallReturnLabel_99:
   \   000054   31500E00     ADD.W   #0xe, SP
   \                     ??zclSE_Pricing_Send_PublishBlockPeriod_1:
   \   000058   5617         POPM.W  #0x6, R11
   \   00005A   1001         RETA
    571          }
    572          #endif  // ZCL_PRICING
    573          
    574          
    575          #ifdef ZCL_MESSAGE
    576          /*********************************************************************
    577           * @fn      zclSE_Message_Send_DisplayMessage
    578           *
    579           * @brief   Call to send out a Display Message Command
    580           *
    581           * @param   srcEP - Sending application's endpoint
    582           * @param   dstAddr - where you want the message to go
    583           * @param   cmd - command
    584           * @param   disableDefaultRsp - disable default response
    585           * @param   seqNum - ZCL sequence number
    586           *
    587           * @return  ZStatus_t
    588           */

   \                                 In  segment CODE, align 2, keep-with-next
    589          ZStatus_t zclSE_Message_Send_DisplayMessage( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_Message_Send_DisplayMessage:
    590                                                       zclCCDisplayMessage_t *cmd,
    591                                                       uint8 disableDefaultRsp, uint8 seqNum )
    592          {
   \   000000   5B15         PUSHM.W #0x6, R11
   \   000002   4A4C         MOV.B   R12, R10
   \   000004   094D         MOV.W   R13, R9
   \   000006   064E         MOV.W   R14, R6
   \   000008   4B4F         MOV.B   R15, R11
    593            uint8 *buf;
    594            uint8 *pBuf;
    595            uint16 bufLen;
    596            ZStatus_t status;
    597          
    598            // msgId + msgCtrl + start time + duration + msgLen + msg
    599            bufLen = 4 + 1 + 4 + 2 + 1 + cmd->msgString.strLen;
   \   00000A   574E0E00     MOV.B   0xe(R14), R7
   \   00000E   37500C00     ADD.W   #0xc, R7
    600          
    601            buf = osal_mem_alloc( bufLen );
   \   000012   ........     CALLA   #?Subroutine22
    602          
    603            if ( buf == NULL )
   \                     ??CrossCallReturnLabel_138:
   \   000016   0320         JNE     ??zclSE_Message_Send_DisplayMessage_0
    604            {
    605              return (ZMemError);
   \   000018   7C401000     MOV.B   #0x10, R12
   \   00001C   2C3C         JMP     ??zclSE_Message_Send_DisplayMessage_1
    606            }
    607          
    608            pBuf = buf;
    609            pBuf = osal_buffer_uint32( buf, cmd->messageId );  // Streamline the uint32 data
   \                     ??zclSE_Message_Send_DisplayMessage_0:
   \   00001E   ........     CALLA   #?Subroutine41
    610            *pBuf++ = cmd->messageCtrl.transmissionMode |
    611                     (cmd->messageCtrl.importance << SE_PROFILE_MSGCTRL_IMPORTANCE)|
    612                     (cmd->messageCtrl.confirmationRequired << SE_PROFILE_MSGCTRL_CONFREQUIRED);
   \                     ??CrossCallReturnLabel_67:
   \   000022   5E460600     MOV.B   0x6(R6), R14
   \   000026   4E11         RRA.B   R14
   \   000028   4E43         MOV.B   #0x0, R14
   \   00002A   4E10         RRC.B   R14
   \   00002C   5F460500     MOV.B   0x5(R6), R15
   \   000030                RPT     #0x2
   \   000030   41184F5F     RLAX.B  R15
   \   000034   5FD60400     BIS.B   0x4(R6), R15
   \   000038   4FDE         BIS.B   R14, R15
   \   00003A   CC4F0000     MOV.B   R15, 0(R12)
   \   00003E   1C53         ADD.W   #0x1, R12
    613            pBuf = osal_buffer_uint32( pBuf, cmd->startTime );
   \   000040   ........     CALLA   #?Subroutine42
    614            *pBuf++ = LO_UINT16( cmd->durationInMinutes );
   \                     ??CrossCallReturnLabel_70:
   \   000044   ........     CALLA   #?Subroutine34
    615            *pBuf++ = HI_UINT16( cmd->durationInMinutes );
    616            *pBuf++ = cmd->msgString.strLen;
    617          
    618            osal_memcpy( pBuf, cmd->msgString.pStr, cmd->msgString.strLen );
   \                     ??CrossCallReturnLabel_53:
   \   000048   5E460E00     MOV.B   0xe(R6), R14
   \   00004C   1D461000     MOV.W   0x10(R6), R13
   \   000050   ........     CALLA   #osal_memcpy
    619          
    620            status = zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_MESSAGE,
    621                                    COMMAND_SE_DISPLAY_MESSAGE, TRUE,
    622                                    ZCL_FRAME_SERVER_CLIENT_DIR, disableDefaultRsp, 0, seqNum, bufLen, buf );
   \   000054   0812         PUSH.W  R8
   \   000056   0712         PUSH.W  R7
   \   000058   51121600     PUSH.B  0x16(SP)
   \   00005C   0312         PUSH.W  #0x0
   \   00005E   4B12         PUSH.B  R11
   \   000060   5312         PUSH.B  #0x1
   \   000062   5312         PUSH.B  #0x1
   \   000064   4F43         MOV.B   #0x0, R15
   \   000066   3E400307     MOV.W   #0x703, R14
   \   00006A   ........     CALLA   #?Subroutine52
   \                     ??CrossCallReturnLabel_137:
   \   00006E   ........     CALLA   #?Subroutine25
    623            osal_mem_free(buf);
    624            return status;
   \                     ??CrossCallReturnLabel_95:
   \   000072   31500E00     ADD.W   #0xe, SP
   \                     ??zclSE_Message_Send_DisplayMessage_1:
   \   000076   5617         POPM.W  #0x6, R11
   \   000078   1001         RETA
    625          }

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine34:
   \   000000   DC460C000000 MOV.B   0xc(R6), 0(R12)
   \   000006   1C53         ADD.W   #0x1, R12
   \   000008   DC460D000000 MOV.B   0xd(R6), 0(R12)
   \   00000E   1C53         ADD.W   #0x1, R12
   \   000010   DC460E000000 MOV.B   0xe(R6), 0(R12)
   \   000016   1C53         ADD.W   #0x1, R12
   \   000018   1001         RETA
    626          
    627          /*********************************************************************
    628           * @fn      zclSE_Message_Send_CancelMessage
    629           *
    630           * @brief   Call to send out a Cancel Message Command
    631           *
    632           * @param   srcEP - Sending application's endpoint
    633           * @param   dstAddr - where you want the message to go
    634           * @param   msgId - Message ID
    635           * @param   msgCtrl - Message Control
    636           * @param   disableDefaultRsp - disable default response
    637           * @param   seqNum - ZCL sequence number
    638           *
    639           * @return  ZStatus_t
    640           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine21:
   \   000000   5F43         MOV.B   #0x1, R15
   \   000002   3E400307     MOV.W   #0x703, R14
   \   000006                REQUIRE ??Subroutine62_0
   \   000006                // Fall through to label ??Subroutine62_0

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ??Subroutine62_0:
   \   000000   0D4B         MOV.W   R11, R13
   \   000002   ........     BRA     #??Subroutine52_0

   \                                 In  segment CODE, align 2, keep-with-next
    641          ZStatus_t zclSE_Message_Send_CancelMessage( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_Message_Send_CancelMessage:
    642                                                                uint32 msgId, uint8 msgCtrl,
    643                                                                uint8 disableDefaultRsp, uint8 seqNum )
    644          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   31800600     SUB.W   #0x6, SP
   \   000006   4A4C         MOV.B   R12, R10
   \   000008   0B4D         MOV.W   R13, R11
    645            uint8 buf[5];
    646          
    647            osal_buffer_uint32( buf, msgId );  // Streamline the uint32 data
   \   00000A   0C41         MOV.W   SP, R12
   \   00000C   ........     CALLA   #osal_buffer_uint32
    648            buf[4] = msgCtrl;
   \   000010   D1410E000400 MOV.B   0xe(SP), 0x4(SP)
    649          
    650            return zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_MESSAGE,
    651                                    COMMAND_SE_CANCEL_MESSAGE, TRUE,
    652                                    ZCL_FRAME_SERVER_CLIENT_DIR, disableDefaultRsp, 0, seqNum, 5, buf );
   \   000016   0F41         MOV.W   SP, R15
   \   000018   0F12         PUSH.W  R15
   \   00001A   30120500     PUSH.W  #0x5
   \   00001E   51121800     PUSH.B  0x18(SP)
   \   000022   0312         PUSH.W  #0x0
   \   000024   51121A00     PUSH.B  0x1a(SP)
   \   000028   5312         PUSH.B  #0x1
   \   00002A   5312         PUSH.B  #0x1
   \   00002C   ........     CALLA   #?Subroutine21
   \                     ??CrossCallReturnLabel_130:
   \   000030   31501400     ADD.W   #0x14, SP
   \   000034   1A17         POPM.W  #0x2, R11
   \   000036   1001         RETA
    653          }
    654          
    655          /*********************************************************************
    656           * @fn      zclSE_Message_Send_MessageConfirmation
    657           *
    658           * @brief   Call to send out a Message Confirmation
    659           *
    660           * @param   srcEP - Sending application's endpoint
    661           * @param   dstAddr - where you want the message to go
    662           * @param   msgId - Message ID
    663           * @param   confirmTime - Confirmation Time
    664           *
    665           * @return  ZStatus_t
    666           */

   \                                 In  segment CODE, align 2, keep-with-next
    667          ZStatus_t zclSE_Message_Send_MessageConfirmation( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_Message_Send_MessageConfirmation:
    668                                                                uint32 msgId, uint32 confirmTime,
    669                                                                uint8 disableDefaultRsp, uint8 seqNum )
    670          {
   \   000000   3B15         PUSHM.W #0x4, R11
   \   000002   3182         SUB.W   #0x8, SP
   \   000004   4A4C         MOV.B   R12, R10
   \   000006   0B4D         MOV.W   R13, R11
    671            uint8 buf[8];
    672          
    673            osal_buffer_uint32( buf, msgId );  // Streamline the uint32 data
   \   000008   0841         MOV.W   SP, R8
   \   00000A   0C41         MOV.W   SP, R12
   \   00000C   ........     CALLA   #osal_buffer_uint32
    674            osal_buffer_uint32( &buf[4], confirmTime );  // Streamline the uint32 data
   \   000010   1E411400     MOV.W   0x14(SP), R14
   \   000014   1F411600     MOV.W   0x16(SP), R15
   \   000018   0C41         MOV.W   SP, R12
   \   00001A   2C52         ADD.W   #0x4, R12
   \   00001C   ........     CALLA   #osal_buffer_uint32
    675          
    676            return zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_MESSAGE,
    677                                    COMMAND_SE_MESSAGE_CONFIRMATION, TRUE,
    678                                    ZCL_FRAME_CLIENT_SERVER_DIR, disableDefaultRsp, 0, seqNum, 8, buf );
   \   000020   0812         PUSH.W  R8
   \   000022   30120800     PUSH.W  #0x8
   \   000026   51122000     PUSH.B  0x20(SP)
   \   00002A   0312         PUSH.W  #0x0
   \   00002C   51122200     PUSH.B  0x22(SP)
   \   000030   4312         PUSH.B  #0x0
   \   000032   5312         PUSH.B  #0x1
   \   000034   ........     CALLA   #?Subroutine21
   \                     ??CrossCallReturnLabel_129:
   \   000038   31501600     ADD.W   #0x16, SP
   \   00003C   3817         POPM.W  #0x4, R11
   \   00003E   1001         RETA
    679          }
    680          #endif  // ZCL_MESSAGE
    681          
    682          #ifdef ZCL_LOAD_CONTROL
    683          /*********************************************************************
    684           * @fn      zclSE_LoadControl_Send_LoadControlEvent
    685           *
    686           * @brief   Call to send out a Load Control Event
    687           *
    688           * @param   srcEP - Sending application's endpoint
    689           * @param   dstAddr - where you want the message to go
    690           * @param   cmd - zclCCLoadControlEvent_t
    691           * @param   disableDefaultRsp - disable default response
    692           * @param   seqNum - ZCL sequence number
    693           *
    694           * @return  ZStatus_t
    695           */

   \                                 In  segment CODE, align 2, keep-with-next
    696          ZStatus_t zclSE_LoadControl_Send_LoadControlEvent( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_LoadControl_Send_LoadControlEvent:
    697                                                                zclCCLoadControlEvent_t* cmd,
    698                                                                uint8 disableDefaultRsp, uint8 seqNum )
    699          {
   \   000000   5B15         PUSHM.W #0x6, R11
   \   000002   ........     CALLA   #?Subroutine40
    700            uint8 *buf;
    701            uint8 *pBuf;
    702            ZStatus_t status;
    703          
    704            buf = osal_mem_alloc( PACKET_LEN_SE_LOAD_CONTROL_EVENT );
   \                     ??CrossCallReturnLabel_63:
   \   000006   3C401700     MOV.W   #0x17, R12
   \   00000A   ........     CALLA   #?Subroutine23
    705          
    706            if ( buf == NULL )
   \                     ??CrossCallReturnLabel_23:
   \   00000E   0320         JNE     ??zclSE_LoadControl_Send_LoadControlEvent_0
    707            {
    708              return (ZMemError);
   \   000010   7C401000     MOV.B   #0x10, R12
   \   000014   463C         JMP     ??zclSE_LoadControl_Send_LoadControlEvent_1
    709            }
    710          
    711            pBuf = buf;
    712            pBuf = osal_buffer_uint32( pBuf, cmd->issuerEvent );
   \                     ??zclSE_LoadControl_Send_LoadControlEvent_0:
   \   000016   2E49         MOV.W   @R9, R14
   \   000018   1F490200     MOV.W   0x2(R9), R15
   \   00001C   ........     CALLA   #?Subroutine38
    713            pBuf = osal_buffer_uint24( pBuf, cmd->deviceGroupClass );
    714            pBuf = osal_buffer_uint32( pBuf, cmd->startTime );
   \                     ??CrossCallReturnLabel_58:
   \   000020   ........     CALLA   #?Subroutine51
    715            *pBuf++ = LO_UINT16( cmd->durationInMinutes );
   \                     ??CrossCallReturnLabel_87:
   \   000024   DC490C000000 MOV.B   0xc(R9), 0(R12)
   \   00002A   1C53         ADD.W   #0x1, R12
    716            *pBuf++ = HI_UINT16( cmd->durationInMinutes );
   \   00002C   DC490D000000 MOV.B   0xd(R9), 0(R12)
   \   000032   1C53         ADD.W   #0x1, R12
    717            *pBuf++ = cmd->criticalityLevel;
   \   000034   DC490E000000 MOV.B   0xe(R9), 0(R12)
   \   00003A   1C53         ADD.W   #0x1, R12
    718            *pBuf++ = cmd->coolingTemperatureOffset;
   \   00003C   DC490F000000 MOV.B   0xf(R9), 0(R12)
   \   000042   1C53         ADD.W   #0x1, R12
    719            *pBuf++ = cmd->heatingTemperatureOffset;
   \   000044   DC4910000000 MOV.B   0x10(R9), 0(R12)
   \   00004A   1C53         ADD.W   #0x1, R12
    720            *pBuf++ = LO_UINT16( cmd->coolingTemperatureSetPoint );
   \   00004C   DC4912000000 MOV.B   0x12(R9), 0(R12)
   \   000052   1C53         ADD.W   #0x1, R12
    721            *pBuf++ = HI_UINT16( cmd->coolingTemperatureSetPoint );
   \   000054   DC4913000000 MOV.B   0x13(R9), 0(R12)
   \   00005A   1C53         ADD.W   #0x1, R12
    722            *pBuf++ = LO_UINT16( cmd->heatingTemperatureSetPoint );
   \   00005C   DC4914000000 MOV.B   0x14(R9), 0(R12)
   \   000062   1C53         ADD.W   #0x1, R12
    723            *pBuf++ = HI_UINT16( cmd->heatingTemperatureSetPoint );
   \   000064   DC4915000000 MOV.B   0x15(R9), 0(R12)
   \   00006A   1C53         ADD.W   #0x1, R12
    724            *pBuf++ = cmd->averageLoadAdjustmentPercentage;
   \   00006C   DC4916000000 MOV.B   0x16(R9), 0(R12)
   \   000072   1C53         ADD.W   #0x1, R12
    725            *pBuf++ = cmd->dutyCycle;
   \   000074   DC4917000000 MOV.B   0x17(R9), 0(R12)
   \   00007A   1C53         ADD.W   #0x1, R12
    726            *pBuf = cmd->eventControl;
   \   00007C   DC4918000000 MOV.B   0x18(R9), 0(R12)
    727          
    728            status = zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_LOAD_CONTROL,
    729                                    COMMAND_SE_LOAD_CONTROL_EVENT, TRUE,
    730                                    ZCL_FRAME_SERVER_CLIENT_DIR, disableDefaultRsp, 0, seqNum,
    731                                    PACKET_LEN_SE_LOAD_CONTROL_EVENT, buf );
   \   000082   0B12         PUSH.W  R11
   \   000084   30121700     PUSH.W  #0x17
   \   000088   51121600     PUSH.B  0x16(SP)
   \   00008C   0312         PUSH.W  #0x0
   \   00008E   4612         PUSH.B  R6
   \   000090   5312         PUSH.B  #0x1
   \   000092   5312         PUSH.B  #0x1
   \   000094   4F43         MOV.B   #0x0, R15
   \   000096   ........     CALLA   #?Subroutine27
   \                     ??CrossCallReturnLabel_135:
   \   00009A   ........     CALLA   #?Subroutine16
    732            osal_mem_free(buf);
    733          
    734            return status;
   \                     ??CrossCallReturnLabel_98:
   \   00009E   31500E00     ADD.W   #0xe, SP
   \                     ??zclSE_LoadControl_Send_LoadControlEvent_1:
   \   0000A2   5617         POPM.W  #0x6, R11
   \   0000A4   1001         RETA
    735          }

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine38:
   \   000000   ........     CALLA   #?Subroutine50
   \                     ??CrossCallReturnLabel_83:
   \   000004   ........     BRA     #osal_buffer_uint24

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine27:
   \   000000   3E400107     MOV.W   #0x701, R14
   \   000004                REQUIRE ??Subroutine27_0
   \   000004                // Fall through to label ??Subroutine27_0
    736          
    737          /*********************************************************************
    738           * @fn      zclSE_LoadControl_Send_CancelLoadControlEvent
    739           *
    740           * @brief   Call to send out a Cancel Load Control Event
    741           *
    742           * @param   srcEP - Sending application's endpoint
    743           * @param   dstAddr - where you want the message to go
    744           * @param   disableDefaultRsp - disable default response
    745           * @param   seqNum - ZCL sequence number
    746           *
    747           * @return  ZStatus_t
    748           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine3:
   \   000000   31501A00     ADD.W   #0x1a, SP
   \   000004   3817         POPM.W  #0x4, R11
   \   000006   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
    749          ZStatus_t zclSE_LoadControl_Send_CancelLoadControlEvent( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_LoadControl_Send_CancelLoadControlEvent:
    750                                                                zclCCCancelLoadControlEvent_t *cmd,
    751                                                                uint8 disableDefaultRsp, uint8 seqNum )
    752          {
   \   000000   3B15         PUSHM.W #0x4, R11
   \   000002   31800C00     SUB.W   #0xc, SP
   \   000006   ........     CALLA   #?Subroutine24
    753            uint8 buf[PACKET_LEN_SE_CANCEL_LOAD_CONTROL_EVENT];
    754            uint8 *pBuf;
    755          
    756            pBuf = buf;
    757          
    758            pBuf = osal_buffer_uint32( pBuf, cmd->issuerEventID );
   \                     ??CrossCallReturnLabel_27:
   \   00000A   0C41         MOV.W   SP, R12
   \   00000C   ........     CALLA   #?Subroutine38
    759            pBuf = osal_buffer_uint24( pBuf, cmd->deviceGroupClass );
    760            *pBuf++ = cmd->cancelControl;
   \                     ??CrossCallReturnLabel_59:
   \   000010   DC4908000000 MOV.B   0x8(R9), 0(R12)
   \   000016   1C53         ADD.W   #0x1, R12
    761            pBuf = osal_buffer_uint32( pBuf, cmd->effectiveTime );
   \   000018   1E490A00     MOV.W   0xa(R9), R14
   \   00001C   1F490C00     MOV.W   0xc(R9), R15
   \   000020   ........     CALLA   #osal_buffer_uint32
    762          
    763            return zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_LOAD_CONTROL,
    764                                    COMMAND_SE_CANCEL_LOAD_CONTROL_EVENT, TRUE,
    765                                    ZCL_FRAME_SERVER_CLIENT_DIR, disableDefaultRsp, 0, seqNum,
    766                                    PACKET_LEN_SE_CANCEL_LOAD_CONTROL_EVENT, buf );
   \   000024   0F41         MOV.W   SP, R15
   \   000026   0F12         PUSH.W  R15
   \   000028   30120C00     PUSH.W  #0xc
   \   00002C   51121E00     PUSH.B  0x1e(SP)
   \   000030   0312         PUSH.W  #0x0
   \   000032   4B12         PUSH.B  R11
   \   000034   5312         PUSH.B  #0x1
   \   000036   5312         PUSH.B  #0x1
   \   000038   5F43         MOV.B   #0x1, R15
   \   00003A   ........     CALLA   #?Subroutine27
   \                     ??CrossCallReturnLabel_134:
   \   00003E   ........     BRA     #?Subroutine3
    767          }
    768          
    769          /*********************************************************************
    770           * @fn      zclSE_LoadControl_Send_ReportEventStatus
    771           *
    772           * @brief   Call to send out a Report Event Status
    773           *
    774           * @param   srcEP - Sending application's endpoint
    775           * @param   dstAddr - where you want the message to go
    776           * @param   cmd - zclCCReportEventStatus_t
    777           * @param   disableDefaultRsp - disable default response
    778           * @param   seqNum - ZCL sequence number
    779           *
    780           * @return  ZStatus_t
    781           */

   \                                 In  segment CODE, align 2, keep-with-next
    782          ZStatus_t zclSE_LoadControl_Send_ReportEventStatus( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_LoadControl_Send_ReportEventStatus:
    783                                                                zclCCReportEventStatus_t* cmd,
    784                                                                uint8 disableDefaultRsp, uint8 seqNum )
    785          {
   \   000000   5B15         PUSHM.W #0x6, R11
   \   000002   4A4C         MOV.B   R12, R10
   \   000004   0B4D         MOV.W   R13, R11
   \   000006   064E         MOV.W   R14, R6
   \   000008   494F         MOV.B   R15, R9
    786            uint8 *buf;
    787            uint8 *pBuf;
    788            ZStatus_t status;
    789          
    790            buf = osal_mem_alloc( PACKET_LEN_SE_REPORT_EVENT_STATUS );
   \   00000A   3C403C00     MOV.W   #0x3c, R12
   \   00000E   ........     CALLA   #??Subroutine65_0
    791          
    792            if ( buf == NULL )
   \                     ??CrossCallReturnLabel_141:
   \   000012   0320         JNE     ??zclSE_LoadControl_Send_ReportEventStatus_0
    793            {
    794              return (ZMemError);
   \   000014   7C401000     MOV.B   #0x10, R12
   \   000018   3E3C         JMP     ??zclSE_LoadControl_Send_ReportEventStatus_1
    795            }
    796          
    797            pBuf = buf;
    798            pBuf = osal_buffer_uint32( pBuf, cmd->issuerEventID );
   \                     ??zclSE_LoadControl_Send_ReportEventStatus_0:
   \   00001A   ........     CALLA   #?Subroutine41
    799            *pBuf++ = cmd->eventStatus;
   \                     ??CrossCallReturnLabel_68:
   \   00001E   DC4608000000 MOV.B   0x8(R6), 0(R12)
   \   000024   1C53         ADD.W   #0x1, R12
    800            pBuf = osal_buffer_uint32( pBuf, cmd->eventStartTime );
   \   000026   1E460400     MOV.W   0x4(R6), R14
   \   00002A   1F460600     MOV.W   0x6(R6), R15
   \   00002E   ........     CALLA   #osal_buffer_uint32
    801            *pBuf++ = cmd->criticalityLevelApplied;
   \   000032   DC4609000000 MOV.B   0x9(R6), 0(R12)
   \   000038   1C53         ADD.W   #0x1, R12
    802            *pBuf++ = LO_UINT16( cmd->coolingTemperatureSetPointApplied );
   \   00003A   DC460A000000 MOV.B   0xa(R6), 0(R12)
   \   000040   1C53         ADD.W   #0x1, R12
    803            *pBuf++ = HI_UINT16( cmd->coolingTemperatureSetPointApplied );
   \   000042   DC460B000000 MOV.B   0xb(R6), 0(R12)
   \   000048   1C53         ADD.W   #0x1, R12
    804            *pBuf++ = LO_UINT16( cmd->heatingTemperatureSetPointApplied );
   \   00004A   ........     CALLA   #?Subroutine34
    805            *pBuf++ = HI_UINT16( cmd->heatingTemperatureSetPointApplied );
    806            *pBuf++ = cmd->averageLoadAdjustment;
    807            *pBuf++ = cmd->dutyCycleApplied;
   \                     ??CrossCallReturnLabel_52:
   \   00004E   DC460F000000 MOV.B   0xf(R6), 0(R12)
   \   000054   1C53         ADD.W   #0x1, R12
    808            *pBuf++ = cmd->eventControl;
   \   000056   DC4610000000 MOV.B   0x10(R6), 0(R12)
   \   00005C   1C53         ADD.W   #0x1, R12
    809            *pBuf++ = cmd->signatureType;
   \   00005E   DC4611000000 MOV.B   0x11(R6), 0(R12)
   \   000064   1C53         ADD.W   #0x1, R12
    810          
    811            zclGeneral_KeyEstablishment_ECDSASign( buf, PACKET_LEN_SE_REPORT_EVENT_STATUS_ONLY, pBuf);
   \   000066   0E4C         MOV.W   R12, R14
   \   000068   7D401200     MOV.B   #0x12, R13
   \   00006C   0C48         MOV.W   R8, R12
   \   00006E   ........     CALLA   #zclGeneral_KeyEstablishment_ECDSASign
    812          
    813            status = zcl_SendCommand(srcEP, dstAddr, ZCL_CLUSTER_ID_SE_LOAD_CONTROL,
    814                                     COMMAND_SE_REPORT_EVENT_STATUS, TRUE,
    815                                     ZCL_FRAME_CLIENT_SERVER_DIR, disableDefaultRsp, 0, seqNum,
    816                                     PACKET_LEN_SE_REPORT_EVENT_STATUS, buf );
   \   000072   0812         PUSH.W  R8
   \   000074   30123C00     PUSH.W  #0x3c
   \   000078   51121600     PUSH.B  0x16(SP)
   \   00007C   0312         PUSH.W  #0x0
   \   00007E   4912         PUSH.B  R9
   \   000080   4312         PUSH.B  #0x0
   \   000082   5312         PUSH.B  #0x1
   \   000084   4F43         MOV.B   #0x0, R15
   \   000086   3E400107     MOV.W   #0x701, R14
   \   00008A   ........     CALLA   #??Subroutine62_0
   \                     ??CrossCallReturnLabel_128:
   \   00008E   ........     CALLA   #?Subroutine25
    817            osal_mem_free(buf);
    818          
    819            return status;
   \                     ??CrossCallReturnLabel_94:
   \   000092   31500E00     ADD.W   #0xe, SP
   \                     ??zclSE_LoadControl_Send_ReportEventStatus_1:
   \   000096   5617         POPM.W  #0x6, R11
   \   000098   1001         RETA
    820          }
    821          
    822          /*********************************************************************
    823           * @fn      zclSE_LoadControl_Send_GetScheduledEvent
    824           *
    825           * @brief   Call to send out a Get Scheduled Event
    826           *
    827           * @param   srcEP - Sending application's endpoint
    828           * @param   dstAddr - where you want the message to go
    829           * @param   cmd - command format
    830           * @param   disableDefaultRsp - disable default response
    831           * @param   seqNum - ZCL sequence number
    832           *
    833           * @return  ZStatus_t
    834           */

   \                                 In  segment CODE, align 2, keep-with-next
    835          ZStatus_t zclSE_LoadControl_Send_GetScheduledEvent( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclSE_LoadControl_Send_GetScheduledEvent:
    836                                                                zclCCGetScheduledEvent_t *cmd,
    837                                                                uint8 disableDefaultRsp, uint8 seqNum )
    838          {
   \   000000   3B15         PUSHM.W #0x4, R11
   \   000002   31800600     SUB.W   #0x6, SP
   \   000006   ........     CALLA   #?Subroutine24
    839            uint8 buf[PACKET_LEN_SE_GET_SCHEDULED_EVENT];
    840          
    841            osal_buffer_uint32( buf, cmd->startTime );
   \                     ??CrossCallReturnLabel_26:
   \   00000A   0C41         MOV.W   SP, R12
   \   00000C   ........     CALLA   #?Subroutine39
    842            buf[4] = cmd->numEvents;
    843          
    844            return zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_LOAD_CONTROL,
    845                                    COMMAND_SE_GET_SCHEDULED_EVENT, TRUE,
    846                                    ZCL_FRAME_CLIENT_SERVER_DIR, disableDefaultRsp, 0, seqNum,
    847                                    PACKET_LEN_SE_GET_SCHEDULED_EVENT, buf );
   \                     ??CrossCallReturnLabel_60:
   \   000010   0F41         MOV.W   SP, R15
   \   000012   0F12         PUSH.W  R15
   \   000014   30120500     PUSH.W  #0x5
   \   000018   51121800     PUSH.B  0x18(SP)
   \   00001C   0312         PUSH.W  #0x0
   \   00001E   4B12         PUSH.B  R11
   \   000020   4312         PUSH.B  #0x0
   \   000022   5312         PUSH.B  #0x1
   \   000024   5F43         MOV.B   #0x1, R15
   \   000026   3E400107     MOV.W   #0x701, R14
   \   00002A   ....         JMP     ??Subroutine0_0
   \   00002C   0343         NOP
    848          }
    849          
    850          #endif  // ZCL_LOAD_CONTROL
    851          
    852          #ifdef ZCL_PREPAYMENT
    853          /*********************************************************************
    854           * Call to send out a Select Available Emergency Credit command
    855           *
    856           * @param   srcEP - Sending application's endpoint
    857           * @param   dstAddr - where you want the message to go
    858           * @param   cmd - command payload
    859           * @param   disableDefaultRsp - disable default response
    860           * @param   seqNum - ZCL sequence number
    861           *
    862           * @return  ZStatus_t
    863           */
    864          ZStatus_t zclSE_Prepayment_Send_SelAvailEmergencyCredit( uint8 srcEP,
    865                                                                   afAddrType_t *dstAddr,
    866                                                                   zclCCSelAvailEmergencyCredit_t *cmd,
    867                                                                   uint8 disableDefaultRsp,
    868                                                                   uint8 seqNum )
    869          {
    870            uint8 *buf;
    871            uint8 *pBuf;
    872            uint8 bufLen;
    873            ZStatus_t status;
    874          
    875            // include in length all variable length fields
    876            bufLen = PACKET_LEN_SE_SEL_AVAIL_EMERGENCY_CREDIT +
    877                     cmd->siteId.strLen +
    878                     cmd->meterSerialNumber.strLen;
    879          
    880            buf = osal_mem_alloc( bufLen );
    881            if ( buf == NULL )
    882            {
    883              return (ZMemError);
    884            }
    885          
    886            pBuf = buf;
    887          
    888            pBuf = osal_buffer_uint32( pBuf, cmd->commandDateTime );
    889            *pBuf++ = cmd->originatingDevice;
    890            *pBuf++ = cmd->siteId.strLen;
    891            pBuf = osal_memcpy( pBuf, cmd->siteId.pStr, cmd->siteId.strLen );
    892            *pBuf++ = cmd->meterSerialNumber.strLen;
    893            osal_memcpy( pBuf, cmd->meterSerialNumber.pStr, cmd->meterSerialNumber.strLen );
    894          
    895            status = zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_PREPAYMENT,
    896                                      COMMAND_SE_SEL_AVAIL_EMERGENCY_CREDIT, TRUE,
    897                                      ZCL_FRAME_CLIENT_SERVER_DIR, disableDefaultRsp, 0,
    898                                      seqNum, bufLen, buf );
    899          
    900            osal_mem_free(buf);
    901          
    902            return status;
    903          }
    904          
    905          /*********************************************************************
    906           * Call to send out a Change Supply command
    907           *
    908           * @param   srcEP - Sending application's endpoint
    909           * @param   dstAddr - where you want the message to go
    910           * @param   cmd - command payload
    911           * @param   disableDefaultRsp - disable default response
    912           * @param   seqNum - ZCL sequence number
    913           *
    914           * @return  ZStatus_t
    915           */
    916          ZStatus_t zclSE_Prepayment_Send_ChangeSupply( uint8 srcEP, afAddrType_t *dstAddr,
    917                                                        zclCCChangeSupply_t *cmd,
    918                                                        uint8 disableDefaultRsp,
    919                                                        uint8 seqNum )
    920          {
    921            uint8 *buf;
    922            uint8 *pBuf;
    923            uint8 bufLen;
    924            ZStatus_t status;
    925          
    926            // include in length all variable length fields
    927            bufLen = PACKET_LEN_SE_CHANGE_SUPPLY +
    928                     cmd->siteId.strLen +
    929                     cmd->meterSerialNumber.strLen;
    930          
    931            buf = osal_mem_alloc( bufLen );
    932            if ( buf == NULL )
    933            {
    934              return (ZMemError);
    935            }
    936          
    937            pBuf = buf;
    938          
    939            pBuf = osal_buffer_uint32( pBuf, cmd->providerId );
    940            pBuf = osal_buffer_uint32( pBuf, cmd->requestDateTime );
    941            *pBuf++ = cmd->siteId.strLen;
    942            pBuf = osal_memcpy( pBuf, cmd->siteId.pStr, cmd->siteId.strLen );
    943            *pBuf++ = cmd->meterSerialNumber.strLen;
    944            pBuf = osal_memcpy( pBuf, cmd->meterSerialNumber.pStr, cmd->meterSerialNumber.strLen );
    945            pBuf = osal_buffer_uint32( pBuf, cmd->implementationDateTime );
    946            *pBuf++ = cmd->proposedSupplyStatus;
    947            *pBuf = cmd->origIdSupplyControlBits;
    948          
    949            status = zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_PREPAYMENT,
    950                                      COMMAND_SE_CHANGE_SUPPLY, TRUE,
    951                                      ZCL_FRAME_CLIENT_SERVER_DIR, disableDefaultRsp, 0,
    952                                      seqNum, bufLen, buf );
    953          
    954            osal_mem_free(buf);
    955          
    956            return status;
    957          }
    958          
    959          /*********************************************************************
    960           * Call to send out a Supply Status Response
    961           *
    962           * @param   srcEP - Sending application's endpoint
    963           * @param   dstAddr - where you want the message to go
    964           * @param   cmd - command payload
    965           * @param   disableDefaultRsp - disable default response
    966           * @param   seqNum - ZCL sequence number
    967           *
    968           * @return  ZStatus_t
    969           */
    970          ZStatus_t zclSE_Prepayment_Send_SupplyStatusResponse( uint8 srcEP,
    971                                                                afAddrType_t *dstAddr,
    972                                                                zclCCSupplyStatusResponse_t *cmd,
    973                                                                uint8 disableDefaultRsp,
    974                                                                uint8 seqNum )
    975          {
    976            uint8 *buf;
    977            uint8 *pBuf;
    978            ZStatus_t status;
    979          
    980            buf = osal_mem_alloc( PACKET_LEN_SE_SUPPLY_STATUS_RESPONSE );
    981            if ( buf == NULL )
    982            {
    983              return (ZMemError);
    984            }
    985          
    986            pBuf = buf;
    987          
    988            pBuf = osal_buffer_uint32( pBuf, cmd->providerId );
    989            pBuf = osal_buffer_uint32( pBuf, cmd->implementationDateTime );
    990            *pBuf = cmd->supplyStatus;
    991          
    992            status = zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_SE_PREPAYMENT,
    993                                      COMMAND_SE_SUPPLY_STATUS_RESPONSE, TRUE,
    994                                      ZCL_FRAME_SERVER_CLIENT_DIR, disableDefaultRsp, 0,
    995                                      seqNum, PACKET_LEN_SE_SUPPLY_STATUS_RESPONSE, buf );
    996          
    997            osal_mem_free(buf);
    998          
    999            return status;
   1000          }
   1001          #endif // ZCL_PREPAYMENT
   1002          
   1003          /*********************************************************************
   1004           * @fn      zclSE_RegisterCmdCallbacks
   1005           *
   1006           * @brief   Register an applications command callbacks
   1007           *
   1008           * @param   endpoint - application's endpoint
   1009           * @param   callbacks - pointer to the callback record.
   1010           *
   1011           * @return  ZMemError if not able to allocate
   1012           */

   \                                 In  segment CODE, align 2, keep-with-next
   1013          ZStatus_t zclSE_RegisterCmdCallbacks( uint8 endpoint, zclSE_AppCallbacks_t *callbacks )
   \                     zclSE_RegisterCmdCallbacks:
   1014          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   4A4C         MOV.B   R12, R10
   \   000004   0B4D         MOV.W   R13, R11
   1015            zclSECBRec_t *pNewItem;
   1016            zclSECBRec_t *pLoop;
   1017          
   1018            // Register as a ZCL Plugin
   1019            if ( !zclSEPluginRegisted )
   \   000006   C293....     CMP.B   #0x0, &zclSEPluginRegisted
   \   00000A   0C20         JNE     ??zclSE_RegisterCmdCallbacks_3
   1020            {
   1021              zcl_registerPlugin( ZCL_CLUSTER_ID_SE_PRICING,
   1022                                  ZCL_CLUSTER_ID_SE_PREPAYMENT,
   1023                                  zclSE_HdlIncoming );
   \   00000C   3E40....     MOV.W   #LWRD(zclSE_HdlIncoming), R14
   \   000010   3F40....     MOV.W   #HWRD(zclSE_HdlIncoming), R15
   \   000014   3D400507     MOV.W   #0x705, R13
   \   000018   3C400007     MOV.W   #0x700, R12
   \   00001C   ........     CALLA   #zcl_registerPlugin
   1024              zclSEPluginRegisted = TRUE;
   \   000020   D243....     MOV.B   #0x1, &zclSEPluginRegisted
   1025            }
   1026          
   1027            // Fill in the new profile list
   1028            pNewItem = osal_mem_alloc( sizeof( zclSECBRec_t ) );
   \                     ??zclSE_RegisterCmdCallbacks_3:
   \   000024   3C400600     MOV.W   #0x6, R12
   \   000028   ........     CALLA   #osal_mem_alloc
   1029            if ( pNewItem == NULL )
   \   00002C   0C93         CMP.W   #0x0, R12
   \   00002E   0320         JNE     ??zclSE_RegisterCmdCallbacks_4
   1030            {
   1031              return (ZMemError);
   \   000030   7C401000     MOV.B   #0x10, R12
   \   000034   143C         JMP     ??zclSE_RegisterCmdCallbacks_5
   1032            }
   1033          
   1034            pNewItem->next = (zclSECBRec_t *)NULL;
   \                     ??zclSE_RegisterCmdCallbacks_4:
   \   000036   8C430000     MOV.W   #0x0, 0(R12)
   1035            pNewItem->endpoint = endpoint;
   \   00003A   CC4A0200     MOV.B   R10, 0x2(R12)
   1036            pNewItem->CBs = callbacks;
   \   00003E   8C4B0400     MOV.W   R11, 0x4(R12)
   1037          
   1038            // Find spot in list
   1039            if ( zclSECBs == NULL )
   \   000042   1F42....     MOV.W   &zclSECBs, R15
   \   000046   0F93         CMP.W   #0x0, R15
   \   000048   0420         JNE     ??zclSE_RegisterCmdCallbacks_2
   1040            {
   1041              zclSECBs = pNewItem;
   \   00004A   824C....     MOV.W   R12, &zclSECBs
   \   00004E   063C         JMP     ??zclSE_RegisterCmdCallbacks_6
   1042            }
   1043            else
   1044            {
   1045              // Look for end of list
   1046              pLoop = zclSECBs;
   1047              while ( pLoop->next != NULL )
   1048                pLoop = pLoop->next;
   \                     ??zclSE_RegisterCmdCallbacks_0:
   \   000050   0F4B         MOV.W   R11, R15
   \                     ??zclSE_RegisterCmdCallbacks_2:
   \   000052   2B4F         MOV.W   @R15, R11
   \   000054   0B93         CMP.W   #0x0, R11
   \   000056   FC23         JNE     ??zclSE_RegisterCmdCallbacks_0
   1049          
   1050              // Put new item at end of list
   1051              pLoop->next = pNewItem;
   \   000058   8F4C0000     MOV.W   R12, 0(R15)
   1052            }
   1053          
   1054            return ( ZSuccess );
   \                     ??zclSE_RegisterCmdCallbacks_6:
   \   00005C   4C43         MOV.B   #0x0, R12
   \                     ??zclSE_RegisterCmdCallbacks_5:
   \   00005E   1A17         POPM.W  #0x2, R11
   \   000060   1001         RETA
   1055          }
   1056          
   1057          #if defined( ZCL_LOAD_CONTROL ) || defined( ZCL_SIMPLE_METERING ) || \
   1058              defined( ZCL_PRICING ) || defined( ZCL_MESSAGE ) || \
   1059              defined( ZCL_PREPAYMENT )
   1060          /*********************************************************************
   1061           * @fn      zclSE_FindCallbacks
   1062           *
   1063           * @brief   Find the callbacks for an endpoint
   1064           *
   1065           * @param   endpoint
   1066           *
   1067           * @return  pointer to the callbacks
   1068           */
   1069          static zclSE_AppCallbacks_t *zclSE_FindCallbacks( uint8 endpoint )
   1070          {
   1071            zclSECBRec_t *pCBs;
   1072          
   1073            pCBs = zclSECBs;
   1074            while ( pCBs )
   1075            {
   1076              if ( pCBs->endpoint == endpoint )
   1077              {
   1078                return ( pCBs->CBs );
   1079              }
   1080              pCBs = pCBs->next;
   1081            }
   1082            return ( (zclSE_AppCallbacks_t *)NULL );
   1083          }
   1084          #endif
   1085          
   1086          /*********************************************************************
   1087           * @fn      zclSE_HdlIncoming
   1088           *
   1089           * @brief   Callback from ZCL to process incoming Commands specific
   1090           *          to this cluster library or Profile commands for attributes
   1091           *          that aren't in the attribute list
   1092           *
   1093           * @param   pInMsg - pointer to the incoming message
   1094           *
   1095           * @return  ZStatus_t
   1096           */

   \                                 In  segment CODE, align 2, keep-with-next
   1097          static ZStatus_t zclSE_HdlIncoming(  zclIncoming_t *pInMsg )
   \                     zclSE_HdlIncoming:
   1098          {
   1099            ZStatus_t stat = ZSuccess;
   1100          
   1101          #if defined ( INTER_PAN )
   1102            if ( StubAPS_InterPan( pInMsg->msg->srcAddr.panId, pInMsg->msg->srcAddr.endPoint ) &&
   1103                 !INTER_PAN_CLUSTER(pInMsg->msg->clusterId) )
   1104            {
   1105              return ( stat ); // Cluster not supported thru Inter-PAN
   1106            }
   1107          #endif
   1108            if ( zcl_ClusterCmd( pInMsg->hdr.fc.type ) )
   \   000000   5E4C0200     MOV.B   0x2(R12), R14
   \   000004   7EF00700     AND.B   #0x7, R14
   \   000008   5E93         CMP.B   #0x1, R14
   \   00000A   0220         JNE     ??zclSE_HdlIncoming_0
   1109            {
   1110              // Is this a manufacturer specific command?
   1111              if ( pInMsg->hdr.fc.manuSpecific == 0 )
   1112              {
   1113                stat = zclSE_HdlInSpecificCommands( pInMsg );
   \   00000C   ........     BRA     #zclSE_HdlInSpecificCommands
   1114              }
   1115              else
   1116              {
   1117                // We don't support any manufacturer specific command.
   1118                stat = ZFailure;
   1119              }
   1120            }
   1121            else
   1122            {
   1123              // Handle all the normal (Read, Write...) commands -- should never get here
   1124              stat = ZFailure;
   \                     ??zclSE_HdlIncoming_0:
   \   000010   5C43         MOV.B   #0x1, R12
   1125            }
   1126          
   1127            return ( stat );
   \   000012   1001         RETA
   1128          }
   1129          
   1130          /*********************************************************************
   1131           * @fn      zclSE_HdlInSpecificCommands
   1132           *
   1133           * @brief   Function to process incoming Commands specific
   1134           *          to this cluster library
   1135          
   1136           * @param   pInMsg - pointer to the incoming message
   1137           *
   1138           * @return  ZStatus_t
   1139           */

   \                                 In  segment CODE, align 2, keep-with-next
   1140          static ZStatus_t zclSE_HdlInSpecificCommands( zclIncoming_t *pInMsg )
   \                     zclSE_HdlInSpecificCommands:
   1141          {
   1142            ZStatus_t stat;
   1143            zclSE_AppCallbacks_t *pCBs;
   1144          
   1145            // make sure endpoint exists
   1146          
   1147          #if defined( ZCL_LOAD_CONTROL ) || defined( ZCL_SIMPLE_METERING ) || \
   1148              defined( ZCL_PRICING ) || defined( ZCL_MESSAGE ) || \
   1149              defined( ZCL_PREPAYMENT )
   1150          
   1151            pCBs = zclSE_FindCallbacks( pInMsg->msg->endPoint );
   \   000000   2F4C         MOV.W   @R12, R15
   \   000002   5E4F1400     MOV.B   0x14(R15), R14
   \   000006   1D42....     MOV.W   &zclSECBs, R13
   \   00000A   013C         JMP     ??zclSE_HdlInSpecificCommands_2
   \                     ??zclSE_HdlInSpecificCommands_0:
   \   00000C   2D4D         MOV.W   @R13, R13
   \                     ??zclSE_HdlInSpecificCommands_2:
   \   00000E   0D93         CMP.W   #0x0, R13
   \   000010   0724         JEQ     ??zclSE_HdlInSpecificCommands_3
   \   000012   CD9E0200     CMP.B   R14, 0x2(R13)
   \   000016   FA23         JNE     ??zclSE_HdlInSpecificCommands_0
   \   000018   1D4D0400     MOV.W   0x4(R13), R13
   1152            if ( pCBs == NULL )
   \   00001C   0D93         CMP.W   #0x0, R13
   \   00001E   0220         JNE     ??zclSE_HdlInSpecificCommands_4
   1153            {
   1154              return ( ZFailure );
   \                     ??zclSE_HdlInSpecificCommands_3:
   \   000020   5C43         MOV.B   #0x1, R12
   \   000022   1001         RETA
   1155            }
   1156          
   1157          #endif
   1158            switch ( pInMsg->msg->clusterId )			
   \                     ??zclSE_HdlInSpecificCommands_4:
   \   000024   1F4F0400     MOV.W   0x4(R15), R15
   \   000028   3F800007     SUB.W   #0x700, R15
   \   00002C   0924         JEQ     ??zclSE_HdlInSpecificCommands_5
   \   00002E   1F83         SUB.W   #0x1, R15
   \   000030   0B24         JEQ     ??zclSE_HdlInSpecificCommands_6
   \   000032   1F83         SUB.W   #0x1, R15
   \   000034   0324         JEQ     ??zclSE_HdlInSpecificCommands_7
   \   000036   1F83         SUB.W   #0x1, R15
   \   000038   0524         JEQ     ??zclSE_HdlInSpecificCommands_8
   \   00003A   083C         JMP     ??zclSE_HdlInSpecificCommands_9
   1159            {
   1160          #ifdef ZCL_SIMPLE_METERING
   1161              case ZCL_CLUSTER_ID_SE_SIMPLE_METERING:
   1162                stat = zclSE_ProcessInSimpleMeteringCmds( pInMsg, pCBs );
   \                     ??zclSE_HdlInSpecificCommands_7:
   \   00003C   ........     BRA     #zclSE_ProcessInSimpleMeteringCmds
   1163                break;
   1164          #endif
   1165          
   1166          #ifdef ZCL_PRICING
   1167              case ZCL_CLUSTER_ID_SE_PRICING:
   1168                stat = zclSE_ProcessInPricingCmds( pInMsg, pCBs );
   \                     ??zclSE_HdlInSpecificCommands_5:
   \   000040   ........     BRA     #zclSE_ProcessInPricingCmds
   1169                break;
   1170          #endif
   1171          
   1172          #ifdef ZCL_MESSAGE
   1173              case ZCL_CLUSTER_ID_SE_MESSAGE:
   1174                stat = zclSE_ProcessInMessageCmds( pInMsg, pCBs );
   \                     ??zclSE_HdlInSpecificCommands_8:
   \   000044   ........     BRA     #zclSE_ProcessInMessageCmds
   1175                break;
   1176          #endif
   1177          
   1178          #ifdef ZCL_LOAD_CONTROL
   1179              case ZCL_CLUSTER_ID_SE_LOAD_CONTROL:
   1180                stat = zclSE_ProcessInLoadControlCmds( pInMsg, pCBs );
   \                     ??zclSE_HdlInSpecificCommands_6:
   \   000048   ........     BRA     #zclSE_ProcessInLoadControlCmds
   1181                break;
   1182          #endif
   1183          
   1184          #ifdef ZCL_PREPAYMENT
   1185            case ZCL_CLUSTER_ID_SE_PREPAYMENT:
   1186              stat = zclSE_ProcessInPrepaymentCmds( pInMsg, pCBs );
   1187              break;
   1188          #endif // ZCL_PREPAYMENT
   1189          
   1190              default:
   1191                stat = ZFailure;
   \                     ??zclSE_HdlInSpecificCommands_9:
   \   00004C   5C43         MOV.B   #0x1, R12
   1192                break;
   1193            }
   1194          
   1195            return ( stat );
   \   00004E   1001         RETA
   1196          }
   1197          
   1198          #ifdef ZCL_SIMPLE_METERING
   1199          /*********************************************************************
   1200           * @fn      zclSE_ProcessInSimpleMeteringCmds
   1201           *
   1202           * @brief   Callback from ZCL to process incoming Commands specific
   1203           *          to this cluster library on a command ID basis
   1204           *
   1205           * @param   pInMsg - pointer to the incoming message
   1206           * @param   pCBs - pointer to the application call back function
   1207           *
   1208           * @return  ZStatus_t
   1209           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ??Subroutine33_0:
   \   000000   5E4C0700     MOV.B   0x7(R12), R14
   \   000004   BCB20200     BIT.W   #0x8, 0x2(R12)
   \   000008   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   1210          static ZStatus_t zclSE_ProcessInSimpleMeteringCmds( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInSimpleMeteringCmds:
   1211                                                               zclSE_AppCallbacks_t *pCBs )
   1212          {
   1213            ZStatus_t stat;
   1214          
   1215            if ( zcl_ServerCmd( pInMsg->hdr.fc.direction ) )
   \   000000   ........     CALLA   #??Subroutine33_0
   \                     ??CrossCallReturnLabel_108:
   \   000004   112C         JC      ??zclSE_ProcessInSimpleMeteringCmds_1
   1216            {
   1217              // Process Client commands, received by server
   1218              switch ( pInMsg->hdr.commandID )
   \   000006   4E83         SUB.B   #0x0, R14
   \   000008   0724         JEQ     ??zclSE_ProcessInSimpleMeteringCmds_2
   \   00000A   5E83         SUB.B   #0x1, R14
   \   00000C   0724         JEQ     ??zclSE_ProcessInSimpleMeteringCmds_3
   \   00000E   5E83         SUB.B   #0x1, R14
   \   000010   0724         JEQ     ??zclSE_ProcessInSimpleMeteringCmds_4
   \   000012   5E83         SUB.B   #0x1, R14
   \   000014   0724         JEQ     ??zclSE_ProcessInSimpleMeteringCmds_5
   \   000016   183C         JMP     ??zclSE_ProcessInSimpleMeteringCmds_0
   1219              {
   1220                case COMMAND_SE_GET_PROFILE_CMD:
   1221                  stat = zclSE_ProcessInCmd_SimpleMeter_GetProfileCmd( pInMsg, pCBs );
   \                     ??zclSE_ProcessInSimpleMeteringCmds_2:
   \   000018   ........     BRA     #zclSE_ProcessInCmd_SimpleMeter_GetProfileCmd
   1222                  break;
   1223          
   1224                case COMMAND_SE_REQ_MIRROR_RSP:
   1225                  stat = zclSE_ProcessInCmd_SimpleMeter_ReqMirrorRsp( pInMsg, pCBs );
   \                     ??zclSE_ProcessInSimpleMeteringCmds_3:
   \   00001C   ........     BRA     #zclSE_ProcessInCmd_SimpleMeter_ReqMirrorRsp
   1226                  break;
   1227          
   1228                case COMMAND_SE_MIRROR_REM_RSP:
   1229                  stat = zclSE_ProcessInCmd_SimpleMeter_MirrorRemRsp( pInMsg, pCBs );
   \                     ??zclSE_ProcessInSimpleMeteringCmds_4:
   \   000020   ........     BRA     #zclSE_ProcessInCmd_SimpleMeter_MirrorRemRsp
   1230                  break;
   1231          
   1232                case COMMAND_SE_REQ_FAST_POLL_MODE_CMD:
   1233                  stat = zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeCmd( pInMsg, pCBs );
   \                     ??zclSE_ProcessInSimpleMeteringCmds_5:
   \   000024   ........     BRA     #zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeCmd
   1234                  break;
   1235          
   1236                default:
   1237                  stat = ZFailure;
   1238                  break;
   1239              }
   1240            }
   1241            else
   1242            {
   1243              // Process Server commands, received by client
   1244              switch ( pInMsg->hdr.commandID )
   \                     ??zclSE_ProcessInSimpleMeteringCmds_1:
   \   000028   4E83         SUB.B   #0x0, R14
   \   00002A   0724         JEQ     ??zclSE_ProcessInSimpleMeteringCmds_6
   \   00002C   5E83         SUB.B   #0x1, R14
   \   00002E   0724         JEQ     ??zclSE_ProcessInSimpleMeteringCmds_7
   \   000030   5E83         SUB.B   #0x1, R14
   \   000032   0C24         JEQ     ??zclSE_ProcessInSimpleMeteringCmds_8
   \   000034   5E83         SUB.B   #0x1, R14
   \   000036   1624         JEQ     ??zclSE_ProcessInSimpleMeteringCmds_9
   \   000038   073C         JMP     ??zclSE_ProcessInSimpleMeteringCmds_0
   1245              {
   1246                case COMMAND_SE_GET_PROFILE_RSP:
   1247                  stat = zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp( pInMsg, pCBs );
   \                     ??zclSE_ProcessInSimpleMeteringCmds_6:
   \   00003A   ........     BRA     #zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp
   1248                  break;
   1249          
   1250                case COMMAND_SE_REQ_MIRROR_CMD:
   1251                  stat = zclSE_ProcessInCmd_SimpleMeter_ReqMirrorCmd( pInMsg, pCBs );
   \                     ??zclSE_ProcessInSimpleMeteringCmds_7:
   \   00003E   1E4D0800     MOV.W   0x8(R13), R14
   \   000042   1F4D0A00     MOV.W   0xa(R13), R15
   \   000046   063C         JMP     ??zclSE_ProcessInSimpleMeteringCmds_10
   \                     ??zclSE_ProcessInSimpleMeteringCmds_0:
   \   000048   5C43         MOV.B   #0x1, R12
   \   00004A   1001         RETA
   1252                  break;
   1253          
   1254                case COMMAND_SE_MIRROR_REM_CMD:
   1255                  stat = zclSE_ProcessInCmd_SimpleMeter_MirrorRemCmd( pInMsg, pCBs );
   \                     ??zclSE_ProcessInSimpleMeteringCmds_8:
   \   00004C   1E4D1000     MOV.W   0x10(R13), R14
   \   000050   1F4D1200     MOV.W   0x12(R13), R15
   \                     ??zclSE_ProcessInSimpleMeteringCmds_10:
   \   000054   0D4E         MOV.W   R14, R13
   \   000056   0DDF         BIS.W   R15, R13
   \   000058   0D93         CMP.W   #0x0, R13
   \   00005A   F627         JEQ     ??zclSE_ProcessInSimpleMeteringCmds_0
   \   00005C   ........     CALLA   #?Subroutine35
   \                     ??CrossCallReturnLabel_55:
   \   000060   4C43         MOV.B   #0x0, R12
   \   000062   1001         RETA
   1256                  break;
   1257          
   1258                case COMMAND_SE_REQ_FAST_POLL_MODE_RSP:
   1259                  stat = zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeRsp( pInMsg, pCBs );
   \                     ??zclSE_ProcessInSimpleMeteringCmds_9:
   \   000064   ........     BRA     #zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeRsp
   1260                  break;
   1261          
   1262                default:
   1263                  stat = ZFailure;
   1264                  break;
   1265              }
   1266            }
   1267          
   1268            return ( stat );
   1269          }

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine35:
   \   000000   5D4C0600     MOV.B   0x6(R12), R13
   \   000004   2C4C         MOV.W   @R12, R12
   \   000006   3C500600     ADD.W   #0x6, R12
   \   00000A   ........     BRA     #?IndCallR15
   1270          
   1271          /*********************************************************************
   1272           * @fn      zclSE_ProcessInCmd_SimpleMeter_GetProfileCmd
   1273           *
   1274           * @brief   Process in the received Get Profile Command.
   1275           *
   1276           * @param   pInMsg - pointer to the incoming message
   1277           * @param   pCBs - pointer to the application call back function
   1278           *
   1279           * @return  ZStatus_t - ZFailure @ Unsupported
   1280           *                      ZCL_STATUS_CMD_HAS_RSP @ Supported and do
   1281           *                                           not need default rsp
   1282           *                      ZCL_STATUS_INVALID_FIELD @ Range checking
   1283           *                                           failure
   1284           *
   1285           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine6:
   \   000000   3152         ADD.W   #0x8, SP
   \   000002   1A17         POPM.W  #0x2, R11
   \   000004   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine54:
   \   000000   5E4A0600     MOV.B   0x6(R10), R14
   \   000004   2D4A         MOV.W   @R10, R13
   \   000006                REQUIRE ??Subroutine60_0
   \   000006                // Fall through to label ??Subroutine60_0

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ??Subroutine60_0:
   \   000000   3D500600     ADD.W   #0x6, R13
   \   000004   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine31:
   \   000000   ........     CALLA   #?IndCallR11
   \   000004   7C43         MOV.B   #0xff, R12
   \   000006   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   1286          static ZStatus_t zclSE_ProcessInCmd_SimpleMeter_GetProfileCmd( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_SimpleMeter_GetProfileCmd:
   1287                                                                          zclSE_AppCallbacks_t *pCBs )
   1288          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   3182         SUB.W   #0x8, SP
   \   000004   0A4C         MOV.W   R12, R10
   \   000006   0B4D         MOV.W   R13, R11
   1289            if ( pCBs->pfnSimpleMeter_GetProfileCmd )
   \   000008   2F4D         MOV.W   @R13, R15
   \   00000A   1FDD0200     BIS.W   0x2(R13), R15
   \   00000E   0F93         CMP.W   #0x0, R15
   \   000010   1524         JEQ     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileCmd_0
   1290            {
   1291              zclCCGetProfileCmd_t cmd;
   1292          
   1293              cmd.channel = pInMsg->pData[0];
   \   000012   ........     CALLA   #?Subroutine12
   1294              cmd.endTime = osal_build_uint32( &pInMsg->pData[1], 4 );
   1295              cmd.numOfPeriods = pInMsg->pData[5];
   \                     ??CrossCallReturnLabel_10:
   \   000016   1F4A0800     MOV.W   0x8(R10), R15
   \   00001A   D14F05000600 MOV.B   0x5(R15), 0x6(SP)
   1296          
   1297              // Range checking
   1298              if ( cmd.channel > MAX_INTERVAL_CHANNEL_SE_SIMPLE_METERING )
   \   000020   E1930000     CMP.B   #0x2, 0(SP)
   \   000024   0328         JNC     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileCmd_1
   1299              {
   1300                return ZCL_STATUS_INVALID_FIELD;
   \   000026   7C408500     MOV.B   #0x85, R12
   \   00002A   093C         JMP     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileCmd_2
   1301              }
   1302              pCBs->pfnSimpleMeter_GetProfileCmd( &cmd, &(pInMsg->msg->srcAddr),
   1303                                                 pInMsg->hdr.transSeqNum  );
   \                     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileCmd_1:
   \   00002C   ........     CALLA   #?Subroutine54
   1304          
   1305              return ZCL_STATUS_CMD_HAS_RSP;
   1306            }
   \                     ??CrossCallReturnLabel_123:
   \   000030   0C41         MOV.W   SP, R12
   \   000032   3A4B         MOV.W   @R11+, R10
   \   000034   3B4B         MOV.W   @R11+, R11
   \   000036   ........     CALLA   #?Subroutine31
   \                     ??CrossCallReturnLabel_50:
   \   00003A   013C         JMP     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileCmd_2
   1307            else
   1308            {
   1309              return ZFailure;
   \                     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileCmd_0:
   \   00003C   5C43         MOV.B   #0x1, R12
   1310            }
   \                     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileCmd_2:
   \   00003E   ........     BRA     #?Subroutine6
   1311          }

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine12:
   \   000000   1F4C0800     MOV.W   0x8(R12), R15
   \   000004   E14F0400     MOV.B   @R15, 0x4(SP)
   \   000008   6D42         MOV.B   #0x4, R13
   \   00000A   1C4A0800     MOV.W   0x8(R10), R12
   \   00000E   1C53         ADD.W   #0x1, R12
   \   000010   ........     CALLA   #osal_build_uint32
   \   000014   814C0600     MOV.W   R12, 0x6(SP)
   \   000018   814D0800     MOV.W   R13, 0x8(SP)
   \   00001C   1001         RETA
   1312          
   1313          /*********************************************************************
   1314           * @fn      zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp
   1315           *
   1316           * @brief   Process in the received Get Profile Response.
   1317           *
   1318           * @param   pInMsg - pointer to the incoming message
   1319           * @param   pCBs - pointer to the application call back function
   1320           *
   1321           * @return  ZStatus_t - ZFailure @ Unsupported
   1322           *                      ZSuccess @ Supported and send default rsp
   1323           *                      ZCL_STATUS_INVALID_FIELD @ Range checking
   1324           *                                           failure
   1325           *                      ZCL_STATUS_SOFTWARE_FAILURE @ ZStack memory allocation failure
   1326           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine45:
   \   000000   ........     CALLA   #osal_build_uint32
   \   000004   814C0800     MOV.W   R12, 0x8(SP)
   \   000008   814D0A00     MOV.W   R13, 0xa(SP)
   \   00000C   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   1327          static ZStatus_t zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp:
   1328                                                                          zclSE_AppCallbacks_t *pCBs )
   1329          {
   \   000000   5B15         PUSHM.W #0x6, R11
   \   000002   31800A00     SUB.W   #0xa, SP
   \   000006   0A4C         MOV.W   R12, R10
   \   000008   0B4D         MOV.W   R13, R11
   1330            if ( pCBs->pfnSimpleMeter_GetProfileRsp )
   \   00000A   1F4D0400     MOV.W   0x4(R13), R15
   \   00000E   1FDD0600     BIS.W   0x6(R13), R15
   \   000012   0F93         CMP.W   #0x0, R15
   \   000014   4324         JEQ     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp_1
   1331            {
   1332              uint24 *pBuf24;
   1333              uint8  *pBuf8;
   1334              uint8  i;
   1335              zclCCGetProfileRsp_t cmd;
   1336          
   1337              cmd.endTime = osal_build_uint32( &pInMsg->pData[0], 4 );
   \   000016   ........     CALLA   #?Subroutine15
   1338              cmd.status = pInMsg->pData[4];
   \                     ??CrossCallReturnLabel_16:
   \   00001A   D14F04000400 MOV.B   0x4(R15), 0x4(SP)
   1339              cmd.profileIntervalPeriod = pInMsg->pData[5];
   \   000020   2F48         MOV.W   @R8, R15
   \   000022   5E4F0500     MOV.B   0x5(R15), R14
   \   000026   C14E0500     MOV.B   R14, 0x5(SP)
   1340              cmd.numOfPeriodDelivered = pInMsg->pData[6];
   \   00002A   2F48         MOV.W   @R8, R15
   \   00002C   5C4F0600     MOV.B   0x6(R15), R12
   \   000030   C14C0600     MOV.B   R12, 0x6(SP)
   1341          
   1342              // Range Checking
   1343              if ( cmd.profileIntervalPeriod > MAX_PROFILE_INTERVAL_PERIOD_SE_SIMPLE_METERING )
   \   000034   7E92         CMP.B   #0x8, R14
   \   000036   0328         JNC     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp_2
   1344              {
   1345                 return ZCL_STATUS_INVALID_FIELD;
   \   000038   7C408500     MOV.B   #0x85, R12
   \   00003C   303C         JMP     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp_3
   1346              }
   1347          
   1348              // Convert the byte stream to array of uint24
   1349              pBuf8 = &pInMsg->pData[7];  // Pointer to the start of the array of bytes
   \                     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp_2:
   \   00003E   2848         MOV.W   @R8, R8
   \   000040   38500700     ADD.W   #0x7, R8
   1350          
   1351              // Pointer to the start of the array of uint24
   1352              pBuf24 = (uint24*)osal_mem_alloc( cmd.numOfPeriodDelivered *
   1353                                               sizeof(uint24) );
   \   000044   5C06         RLAM.W  #0x2, R12
   \   000046   ........     CALLA   #osal_mem_alloc
   \   00004A   094C         MOV.W   R12, R9
   1354              if ( pBuf24 == NULL )
   \   00004C   0C93         CMP.W   #0x0, R12
   \   00004E   0320         JNE     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp_4
   1355              {
   1356                return ZCL_STATUS_SOFTWARE_FAILURE;  // Memory allocation error
   \   000050   7C40C100     MOV.B   #0xc1, R12
   \   000054   243C         JMP     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp_3
   1357              }
   1358          
   1359              cmd.intervals = pBuf24;
   \                     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp_4:
   \   000056   814C0800     MOV.W   R12, 0x8(SP)
   1360              for( i = 0; i < cmd.numOfPeriodDelivered; i++ )
   \   00005A   4643         MOV.B   #0x0, R6
   \   00005C   0D3C         JMP     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp_5
   1361              {
   1362                *(pBuf24++) = osal_build_uint32( pBuf8, 3 );
   \                     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp_0:
   \   00005E   7D400300     MOV.B   #0x3, R13
   \   000062   0C48         MOV.W   R8, R12
   \   000064   ........     CALLA   #osal_build_uint32
   \   000068   894C0000     MOV.W   R12, 0(R9)
   \   00006C   894D0200     MOV.W   R13, 0x2(R9)
   \   000070   2952         ADD.W   #0x4, R9
   1363                pBuf8 += 3;
   \   000072   38500300     ADD.W   #0x3, R8
   1364              }
   \   000076   5653         ADD.B   #0x1, R6
   \                     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp_5:
   \   000078   56910600     CMP.B   0x6(SP), R6
   \   00007C   F02B         JNC     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp_0
   1365          
   1366              pCBs->pfnSimpleMeter_GetProfileRsp( &cmd, &(pInMsg->msg->srcAddr),
   1367                                                 pInMsg->hdr.transSeqNum );
   \   00007E   ........     CALLA   #?Subroutine54
   \                     ??CrossCallReturnLabel_122:
   \   000082   0C41         MOV.W   SP, R12
   \   000084   1A4B0400     MOV.W   0x4(R11), R10
   \   000088   1B4B0600     MOV.W   0x6(R11), R11
   \   00008C   ........     CALLA   #?IndCallR11
   1368          
   1369              osal_mem_free( cmd.intervals );
   \   000090   1C410800     MOV.W   0x8(SP), R12
   \   000094   ........     CALLA   #osal_mem_free
   1370          
   1371              return ZSuccess;
   \   000098   4C43         MOV.B   #0x0, R12
   \   00009A   013C         JMP     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp_3
   1372            }
   1373            else
   1374            {
   1375              return ZFailure;
   \                     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp_1:
   \   00009C   5C43         MOV.B   #0x1, R12
   \                     ??zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp_3:
   \   00009E   31500A00     ADD.W   #0xa, SP
   \   0000A2   5617         POPM.W  #0x6, R11
   \   0000A4   1001         RETA
   1376            }
   1377          }

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine15:
   \   000000   084C         MOV.W   R12, R8
   \   000002   3852         ADD.W   #0x8, R8
   \   000004   6D42         MOV.B   #0x4, R13
   \   000006   2C48         MOV.W   @R8, R12
   \   000008   ........     CALLA   #?Subroutine45
   \                     ??CrossCallReturnLabel_78:
   \   00000C   2F48         MOV.W   @R8, R15
   \   00000E   1001         RETA
   1378          
   1379          /*********************************************************************
   1380           * @fn      zclSE_ProcessInCmd_SimpleMeter_ReqMirrorCmd
   1381           *
   1382           * @brief   Process in the received Request Mirror Command.
   1383           *
   1384           * @param   pInMsg - pointer to the incoming message
   1385           * @param   pCBs - pointer to the application call back function
   1386           *
   1387           * @return  ZStatus_t - ZFailure @ Unsupported
   1388           *                      ZSuccess @ Supported and send default rsp
   1389           */
   1390          static ZStatus_t zclSE_ProcessInCmd_SimpleMeter_ReqMirrorCmd( zclIncoming_t *pInMsg,
   1391                                                                            zclSE_AppCallbacks_t *pCBs )
   1392          {
   1393            if ( pCBs->pfnSimpleMeter_ReqMirrorCmd )
   1394            {
   1395              pCBs->pfnSimpleMeter_ReqMirrorCmd( &(pInMsg->msg->srcAddr),
   1396                                                 pInMsg->hdr.transSeqNum );
   1397              return ZSuccess;
   1398            }
   1399            else
   1400            {
   1401              return ZFailure;
   1402            }
   1403          }
   1404          
   1405          /*********************************************************************
   1406           * @fn      zclSE_ProcessInCmd_SimpleMeter_ReqMirrorRsp
   1407           *
   1408           * @brief   Process in the received Request Mirror Response.
   1409           *
   1410           * @param   pInMsg - pointer to the incoming message
   1411           * @param   pCBs - pointer to the application call back function
   1412           *
   1413           * @return  ZStatus_t - ZFailure @ Unsupported
   1414           *                      ZSuccess @ Supported and send default rsp
   1415           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ??Subroutine32_0:
   \   000000   5E4C0600     MOV.B   0x6(R12), R14
   \   000004   2D4C         MOV.W   @R12, R13
   \   000006   ....         JMP     ??Subroutine60_0
   \   000008   0343         NOP

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine30:
   \   000000   ........     CALLA   #?IndCallR11
   \   000004   4C43         MOV.B   #0x0, R12
   \   000006   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine5:
   \   000000   2153         ADD.W   #0x2, SP
   \   000002   1A17         POPM.W  #0x2, R11
   \   000004   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   1416          static ZStatus_t zclSE_ProcessInCmd_SimpleMeter_ReqMirrorRsp( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_SimpleMeter_ReqMirrorRsp:
   1417                                                                            zclSE_AppCallbacks_t *pCBs )
   1418          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   2183         SUB.W   #0x2, SP
   1419            if ( pCBs->pfnSimpleMeter_ReqMirrorRsp )
   \   000004   1A4D0C00     MOV.W   0xc(R13), R10
   \   000008   1B4D0E00     MOV.W   0xe(R13), R11
   \   00000C   0F4A         MOV.W   R10, R15
   \   00000E   0FDB         BIS.W   R11, R15
   \   000010   0F93         CMP.W   #0x0, R15
   \   000012   0B24         JEQ     ??zclSE_ProcessInCmd_SimpleMeter_ReqMirrorRsp_0
   1420            {
   1421              zclCCReqMirrorRsp_t cmd;
   1422          
   1423              cmd.endpointId = BUILD_UINT16( pInMsg->pData[0], pInMsg->pData[1] );
   \   000014   ........     CALLA   #?Subroutine36
   \                     ??CrossCallReturnLabel_57:
   \   000018   0E5F         ADD.W   R15, R14
   \   00001A   814E0000     MOV.W   R14, 0(SP)
   1424          
   1425              pCBs->pfnSimpleMeter_ReqMirrorRsp( &cmd, &(pInMsg->msg->srcAddr),
   1426                                                 pInMsg->hdr.transSeqNum );
   \   00001E   ........     CALLA   #??Subroutine32_0
   1427              return ZSuccess ;
   1428            }
   \                     ??CrossCallReturnLabel_125:
   \   000022   0C41         MOV.W   SP, R12
   \   000024   ........     CALLA   #?Subroutine30
   \                     ??CrossCallReturnLabel_44:
   \   000028   013C         JMP     ??zclSE_ProcessInCmd_SimpleMeter_ReqMirrorRsp_1
   1429            else
   1430            {
   1431              return ZFailure;
   \                     ??zclSE_ProcessInCmd_SimpleMeter_ReqMirrorRsp_0:
   \   00002A   5C43         MOV.B   #0x1, R12
   1432            }
   \                     ??zclSE_ProcessInCmd_SimpleMeter_ReqMirrorRsp_1:
   \   00002C   ....         JMP     ?Subroutine5
   \   00002E   0343         NOP
   1433          }

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine36:
   \   000000   1F4C0800     MOV.W   0x8(R12), R15
   \   000004   6E4F         MOV.B   @R15, R14
   \   000006   5F4F0100     MOV.B   0x1(R15), R15
   \   00000A                RPT     #0x8
   \   00000A   47180F5F     RLAX.W  R15
   \   00000E   1001         RETA
   1434          
   1435          /*********************************************************************
   1436           * @fn      zclSE_ProcessInCmd_SimpleMeter_MirrorRemCmd
   1437           *
   1438           * @brief   Process in the received Mirror Removed Command.
   1439           *
   1440           * @param   pInMsg - pointer to the incoming message
   1441           * @param   pCBs - pointer to the application call back function
   1442           *
   1443           * @return  ZStatus_t - ZFailure @ Unsupported
   1444           *                      ZSuccess @ Supported and send default rsp
   1445           */
   1446          static ZStatus_t zclSE_ProcessInCmd_SimpleMeter_MirrorRemCmd( zclIncoming_t *pInMsg,
   1447                                                                            zclSE_AppCallbacks_t *pCBs )
   1448          {
   1449            if ( pCBs->pfnSimpleMeter_MirrorRemCmd )
   1450            {
   1451              pCBs->pfnSimpleMeter_MirrorRemCmd( &(pInMsg->msg->srcAddr),
   1452                                                 pInMsg->hdr.transSeqNum );
   1453              return ZSuccess;
   1454            }
   1455            else
   1456            {
   1457              return ZFailure;
   1458            }
   1459          }
   1460          
   1461          /*********************************************************************
   1462           * @fn      zclSE_ProcessInCmd_SimpleMeter_MirrorRemRsp
   1463           *
   1464           * @brief   Process in the received Mirror Removed Response.
   1465           *
   1466           * @param   pInMsg - pointer to the incoming message
   1467           * @param   pCBs - pointer to the application call back function
   1468           *
   1469           * @return  ZStatus_t - ZFailure @ Unsupported
   1470           *                      ZSuccess @ Supported and send default rsp
   1471           */

   \                                 In  segment CODE, align 2, keep-with-next
   1472          static ZStatus_t zclSE_ProcessInCmd_SimpleMeter_MirrorRemRsp( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_SimpleMeter_MirrorRemRsp:
   1473                                                                            zclSE_AppCallbacks_t *pCBs )
   1474          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   2183         SUB.W   #0x2, SP
   1475            if ( pCBs->pfnSimpleMeter_MirrorRemRsp )
   \   000004   1A4D1400     MOV.W   0x14(R13), R10
   \   000008   1B4D1600     MOV.W   0x16(R13), R11
   \   00000C   0F4A         MOV.W   R10, R15
   \   00000E   0FDB         BIS.W   R11, R15
   \   000010   0F93         CMP.W   #0x0, R15
   \   000012   0B24         JEQ     ??zclSE_ProcessInCmd_SimpleMeter_MirrorRemRsp_0
   1476            {
   1477              zclCCMirrorRemRsp_t cmd;
   1478          
   1479              cmd.endpointId = pInMsg->pData[0] | ( (uint16)pInMsg->pData[1] << 8 );
   \   000014   ........     CALLA   #?Subroutine36
   \                     ??CrossCallReturnLabel_56:
   \   000018   0EDF         BIS.W   R15, R14
   \   00001A   814E0000     MOV.W   R14, 0(SP)
   1480          
   1481              pCBs->pfnSimpleMeter_MirrorRemRsp( &cmd, &(pInMsg->msg->srcAddr),
   1482                                                 pInMsg->hdr.transSeqNum );
   \   00001E   ........     CALLA   #??Subroutine32_0
   1483              return ZSuccess;
   1484            }
   \                     ??CrossCallReturnLabel_124:
   \   000022   0C41         MOV.W   SP, R12
   \   000024   ........     CALLA   #?Subroutine30
   \                     ??CrossCallReturnLabel_43:
   \   000028   013C         JMP     ??zclSE_ProcessInCmd_SimpleMeter_MirrorRemRsp_1
   1485            else
   1486            {
   1487              return ZFailure;
   \                     ??zclSE_ProcessInCmd_SimpleMeter_MirrorRemRsp_0:
   \   00002A   5C43         MOV.B   #0x1, R12
   1488            }
   \                     ??zclSE_ProcessInCmd_SimpleMeter_MirrorRemRsp_1:
   \   00002C                REQUIRE ?Subroutine5
   \   00002C                // Fall through to label ?Subroutine5
   1489          }
   1490          
   1491          
   1492          /*********************************************************************
   1493           * @fn      zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeCmd
   1494           *
   1495           * @brief   Process in the received Request Fast Poll Mode Command
   1496           *
   1497           * @param   pInMsg - pointer to the incoming message
   1498           * @param   pCBs - pointer to the application call back function
   1499           *
   1500           * @return  ZStatus_t - ZFailure @ Unsupported
   1501           *                      ZCL_STATUS_CMD_HAS_RSP @ Supported and do
   1502           *                                           not need default rsp
   1503           */

   \                                 In  segment CODE, align 2, keep-with-next
   1504          static ZStatus_t zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeCmd( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeCmd:
   1505                                                                             zclSE_AppCallbacks_t *pCBs )
   1506          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   31800C00     SUB.W   #0xc, SP
   \   000006   0A4C         MOV.W   R12, R10
   \   000008   0B4D         MOV.W   R13, R11
   1507            if ( pCBs->pfnSimpleMeter_ReqFastPollModeCmd )
   \   00000A   1F4D4800     MOV.W   0x48(R13), R15
   \   00000E   1FDD4A00     BIS.W   0x4a(R13), R15
   \   000012   0F93         CMP.W   #0x0, R15
   \   000014   3824         JEQ     ??zclSE_ProcessInCmd_SimpleMeter_ReqFastPollMod_4
   1508            {
   1509              zclCCReqFastPollModeCmd_t cmd;
   1510              zclAttrRec_t attrRec;
   1511              uint8 fastPollUpdatePeriodAttr = 0;
   \   000016   C1430000     MOV.B   #0x0, 0(SP)
   1512          
   1513              // Retrieve Fast Poll Update Period Attribute Record and save value to local variable
   1514              if ( zclFindAttrRec( pInMsg->msg->endPoint, pInMsg->msg->clusterId,
   1515                                   ATTRID_SE_FAST_POLL_UPDATE_PERIOD, &attrRec ) )
   \   00001A   2C4A         MOV.W   @R10, R12
   \   00001C   0F41         MOV.W   SP, R15
   \   00001E   2F52         ADD.W   #0x4, R15
   \   000020   3E400B00     MOV.W   #0xb, R14
   \   000024   1D4C0400     MOV.W   0x4(R12), R13
   \   000028   5C4C1400     MOV.B   0x14(R12), R12
   \   00002C   ........     CALLA   #zclFindAttrRec
   \   000030   4C93         CMP.B   #0x0, R12
   \   000032   0624         JEQ     ??zclSE_ProcessInCmd_SimpleMeter_ReqFastPollMod_5
   1516              {
   1517                zclReadAttrData( (uint8 *)&fastPollUpdatePeriodAttr, &attrRec, NULL );
   \   000034   0E43         MOV.W   #0x0, R14
   \   000036   0D41         MOV.W   SP, R13
   \   000038   2D52         ADD.W   #0x4, R13
   \   00003A   0C41         MOV.W   SP, R12
   \   00003C   ........     CALLA   #zclReadAttrData
   \                     ??zclSE_ProcessInCmd_SimpleMeter_ReqFastPollMod_5:
   \   000040   1F4A0800     MOV.W   0x8(R10), R15
   \   000044   6E4F         MOV.B   @R15, R14
   \   000046   C1930000     CMP.B   #0x0, 0(SP)
   \   00004A   0524         JEQ     ??zclSE_ProcessInCmd_SimpleMeter_ReqFastPollMod_6
   \   00004C   6E91         CMP.B   @SP, R14
   \   00004E   032C         JC      ??zclSE_ProcessInCmd_SimpleMeter_ReqFastPollMod_6
   1518              }
   1519          
   1520              // Value has been set by application
   1521              if (( fastPollUpdatePeriodAttr > 0 ) && (pInMsg->pData[0] < fastPollUpdatePeriodAttr))
   1522              {
   1523                // the minimum acceptable value is defined by the attribute value
   1524                cmd.fastPollUpdatePeriod = fastPollUpdatePeriodAttr;
   \   000050   E1410200     MOV.B   @SP, 0x2(SP)
   \   000054   023C         JMP     ??zclSE_ProcessInCmd_SimpleMeter_ReqFastPollMod_7
   1525              }
   1526              else
   1527              {
   1528                // use received update period
   1529                cmd.fastPollUpdatePeriod = pInMsg->pData[0];
   \                     ??zclSE_ProcessInCmd_SimpleMeter_ReqFastPollMod_6:
   \   000056   C14E0200     MOV.B   R14, 0x2(SP)
   \                     ??zclSE_ProcessInCmd_SimpleMeter_ReqFastPollMod_7:
   \   00005A   1F4A0800     MOV.W   0x8(R10), R15
   \   00005E   5E4F0100     MOV.B   0x1(R15), R14
   \   000062   7E900F00     CMP.B   #0xf, R14
   \   000066   0228         JNC     ??zclSE_ProcessInCmd_SimpleMeter_ReqFastPollMod_1
   \   000068   7E400F00     MOV.B   #0xf, R14
   \                     ??zclSE_ProcessInCmd_SimpleMeter_ReqFastPollMod_1:
   \   00006C   C14E0300     MOV.B   R14, 0x3(SP)
   1530              }
   1531          
   1532              // As per SE 1.1 spec: maximum duration value will be used if received exceeds it
   1533              cmd.duration = MIN(pInMsg->pData[1], MAX_DURATION_IN_MINUTES_FAST_POLL_MODE);
   1534          
   1535              pCBs->pfnSimpleMeter_ReqFastPollModeCmd(&cmd, &(pInMsg->msg->srcAddr),
   1536                                                      pInMsg->hdr.transSeqNum );
   \   000070   ........     CALLA   #?Subroutine54
   1537          
   1538              return ZCL_STATUS_CMD_HAS_RSP;
   1539            }
   \                     ??CrossCallReturnLabel_121:
   \   000074   0C41         MOV.W   SP, R12
   \   000076   2C53         ADD.W   #0x2, R12
   \   000078   1A4B4800     MOV.W   0x48(R11), R10
   \   00007C   1B4B4A00     MOV.W   0x4a(R11), R11
   \   000080   ........     CALLA   #?Subroutine31
   \                     ??CrossCallReturnLabel_49:
   \   000084   013C         JMP     ??zclSE_ProcessInCmd_SimpleMeter_ReqFastPollMod_8
   1540            else
   1541            {
   1542              return ZFailure;
   \                     ??zclSE_ProcessInCmd_SimpleMeter_ReqFastPollMod_4:
   \   000086   5C43         MOV.B   #0x1, R12
   \                     ??zclSE_ProcessInCmd_SimpleMeter_ReqFastPollMod_8:
   \   000088   31500C00     ADD.W   #0xc, SP
   \   00008C   1A17         POPM.W  #0x2, R11
   \   00008E   1001         RETA
   1543            }
   1544          }
   1545          
   1546          /*********************************************************************
   1547           * @fn      zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeRsp
   1548           *
   1549           * @brief   Process in the received Request Fast Poll Mode Response
   1550           *
   1551           * @param   pInMsg - pointer to the incoming message
   1552           * @param   pCBs - pointer to the application call back function
   1553           *
   1554           * @return  ZStatus_t - ZFailure @ Unsupported
   1555           *                      ZSuccess @ Supported and send default rsp
   1556           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine2:
   \   000000   31500600     ADD.W   #0x6, SP
   \   000004   1A17         POPM.W  #0x2, R11
   \   000006   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   1557          static ZStatus_t zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeRsp( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeRsp:
   1558                                                                             zclSE_AppCallbacks_t *pCBs )
   1559          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   31800600     SUB.W   #0x6, SP
   \   000006   0A4C         MOV.W   R12, R10
   \   000008   0B4D         MOV.W   R13, R11
   1560            if ( pCBs->pfnSimpleMeter_ReqFastPollModeRsp )
   \   00000A   1F4D4C00     MOV.W   0x4c(R13), R15
   \   00000E   1FDD4E00     BIS.W   0x4e(R13), R15
   \   000012   0F93         CMP.W   #0x0, R15
   \   000014   0C24         JEQ     ??zclSE_ProcessInCmd_SimpleMeter_ReqFastPollMod_2
   1561            {
   1562              zclCCReqFastPollModeRsp_t cmd;
   1563          
   1564              cmd.appliedUpdatePeriod = pInMsg->pData[0];
   \   000016   ........     CALLA   #?Subroutine12
   1565          
   1566              cmd.fastPollModeEndTime = osal_build_uint32( &pInMsg->pData[1], 4 );
   1567          
   1568              pCBs->pfnSimpleMeter_ReqFastPollModeRsp(&cmd, &(pInMsg->msg->srcAddr),
   1569                                                      pInMsg->hdr.transSeqNum );
   \                     ??CrossCallReturnLabel_9:
   \   00001A   ........     CALLA   #?Subroutine54
   1570          
   1571              return ZSuccess;
   1572            }
   \                     ??CrossCallReturnLabel_120:
   \   00001E   0C41         MOV.W   SP, R12
   \   000020   1A4B4C00     MOV.W   0x4c(R11), R10
   \   000024   1B4B4E00     MOV.W   0x4e(R11), R11
   \   000028   ........     CALLA   #?Subroutine30
   \                     ??CrossCallReturnLabel_42:
   \   00002C   013C         JMP     ??zclSE_ProcessInCmd_SimpleMeter_ReqFastPollMod_3
   1573            else
   1574            {
   1575              return ZFailure;
   \                     ??zclSE_ProcessInCmd_SimpleMeter_ReqFastPollMod_2:
   \   00002E   5C43         MOV.B   #0x1, R12
   1576            }
   \                     ??zclSE_ProcessInCmd_SimpleMeter_ReqFastPollMod_3:
   \   000030   ....         JMP     ?Subroutine2
   \   000032   0343         NOP
   1577          }
   1578          
   1579          #endif  // ZCL_SIMPLE_METERING
   1580          
   1581          
   1582          #ifdef ZCL_PRICING
   1583          /*********************************************************************
   1584           * @fn      zclSE_ProcessInPricingCmds
   1585           *
   1586           * @brief   Callback from ZCL to process incoming Commands specific
   1587           *          to this cluster library on a command ID basis
   1588           *
   1589           * @param   pInMsg - pointer to the incoming message
   1590           * @param   pCBs - pointer to the application call back function
   1591           *
   1592           * @return  ZStatus_t
   1593           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine33:
   \   000000   0F4D         MOV.W   R13, R15
   \   000002                REQUIRE ??Subroutine33_0
   \   000002                // Fall through to label ??Subroutine33_0

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine32:
   \   000000   1E4C0800     MOV.W   0x8(R12), R14
   \   000004   E14E0400     MOV.B   @R14, 0x4(SP)
   \   000008                REQUIRE ??Subroutine32_0
   \   000008                // Fall through to label ??Subroutine32_0

   \                                 In  segment CODE, align 2, keep-with-next
   1594          static ZStatus_t zclSE_ProcessInPricingCmds( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInPricingCmds:
   1595                                                        zclSE_AppCallbacks_t *pCBs )
   1596          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   2183         SUB.W   #0x2, SP
   \   000004   ........     CALLA   #?Subroutine33
   1597            ZStatus_t stat;
   1598          
   1599            if ( zcl_ServerCmd( pInMsg->hdr.fc.direction ) )
   \                     ??CrossCallReturnLabel_106:
   \   000008   242C         JC      ??zclSE_ProcessInPricingCmds_1
   1600            {
   1601              // Process Client commands, received by server
   1602              switch ( pInMsg->hdr.commandID )
   \   00000A   4E83         SUB.B   #0x0, R14
   \   00000C   0724         JEQ     ??zclSE_ProcessInPricingCmds_2
   \   00000E   5E83         SUB.B   #0x1, R14
   \   000010   1724         JEQ     ??zclSE_ProcessInPricingCmds_3
   \   000012   5E83         SUB.B   #0x1, R14
   \   000014   1824         JEQ     ??zclSE_ProcessInPricingCmds_4
   \   000016   5E83         SUB.B   #0x1, R14
   \   000018   1924         JEQ     ??zclSE_ProcessInPricingCmds_5
   \   00001A   103C         JMP     ??zclSE_ProcessInPricingCmds_0
   1603              {
   1604                case COMMAND_SE_GET_CURRENT_PRICE:
   1605                  stat = zclSE_ProcessInCmd_Pricing_GetCurrentPrice( pInMsg, pCBs );
   \                     ??zclSE_ProcessInPricingCmds_2:
   \   00001C   1E4D1800     MOV.W   0x18(R13), R14
   \   000020   1EDD1A00     BIS.W   0x1a(R13), R14
   \   000024   0E93         CMP.W   #0x0, R14
   \   000026   0A24         JEQ     ??zclSE_ProcessInPricingCmds_0
   \   000028   ........     CALLA   #?Subroutine32
   \                     ??CrossCallReturnLabel_127:
   \   00002C   0C41         MOV.W   SP, R12
   \   00002E   1A4F1800     MOV.W   0x18(R15), R10
   \   000032   1B4F1A00     MOV.W   0x1a(R15), R11
   \   000036   ........     CALLA   #?Subroutine31
   \                     ??CrossCallReturnLabel_51:
   \   00003A   153C         JMP     ??zclSE_ProcessInPricingCmds_6
   \                     ??zclSE_ProcessInPricingCmds_0:
   \   00003C   5C43         MOV.B   #0x1, R12
   \   00003E   133C         JMP     ??zclSE_ProcessInPricingCmds_6
   1606                  break;
   1607          
   1608                case COMMAND_SE_GET_SCHEDULED_PRICE:
   1609                  stat = zclSE_ProcessInCmd_Pricing_GetScheduledPrice( pInMsg, pCBs );
   \                     ??zclSE_ProcessInPricingCmds_3:
   \   000040   ........     CALLA   #zclSE_ProcessInCmd_Pricing_GetScheduledPrice
   1610                  break;
   \   000044   103C         JMP     ??zclSE_ProcessInPricingCmds_6
   1611          
   1612                case COMMAND_SE_PRICE_ACKNOWLEDGEMENT:
   1613                  stat = zclSE_ProcessInCmd_Pricing_PriceAcknowledgement ( pInMsg, pCBs );
   \                     ??zclSE_ProcessInPricingCmds_4:
   \   000046   ........     CALLA   #zclSE_ProcessInCmd_Pricing_PriceAcknowledgement
   1614                  break;
   \   00004A   0D3C         JMP     ??zclSE_ProcessInPricingCmds_6
   1615          
   1616                case COMMAND_SE_GET_BLOCK_PERIOD:
   1617                  stat = zclSE_ProcessInCmd_Pricing_GetBlockPeriod ( pInMsg, pCBs );
   \                     ??zclSE_ProcessInPricingCmds_5:
   \   00004C   ........     CALLA   #zclSE_ProcessInCmd_Pricing_GetBlockPeriod
   1618                  break;
   \   000050   0A3C         JMP     ??zclSE_ProcessInPricingCmds_6
   1619          
   1620                default:
   1621                  stat = ZFailure;
   1622                  break;
   1623              }
   1624            }
   1625            else
   1626            {
   1627              // Process Server commands, received by client
   1628              switch ( pInMsg->hdr.commandID )
   \                     ??zclSE_ProcessInPricingCmds_1:
   \   000052   4E83         SUB.B   #0x0, R14
   \   000054   0324         JEQ     ??zclSE_ProcessInPricingCmds_7
   \   000056   5E83         SUB.B   #0x1, R14
   \   000058   0424         JEQ     ??zclSE_ProcessInPricingCmds_8
   \   00005A   F03F         JMP     ??zclSE_ProcessInPricingCmds_0
   1629              {
   1630                case COMMAND_SE_PUBLISH_PRICE:
   1631                  stat = zclSE_ProcessInCmd_Pricing_PublishPrice( pInMsg, pCBs );
   \                     ??zclSE_ProcessInPricingCmds_7:
   \   00005C   ........     CALLA   #zclSE_ProcessInCmd_Pricing_PublishPrice
   1632                  break;
   \   000060   023C         JMP     ??zclSE_ProcessInPricingCmds_6
   1633          
   1634                case COMMAND_SE_PUBLISH_BLOCK_PERIOD:
   1635                  stat = zclSE_ProcessInCmd_Pricing_PublishBlockPeriod( pInMsg, pCBs );
   \                     ??zclSE_ProcessInPricingCmds_8:
   \   000062   ........     CALLA   #zclSE_ProcessInCmd_Pricing_PublishBlockPeriod
   1636                  break;
   1637          
   1638                default:
   1639                  stat = ZFailure;
   1640                  break;
   1641              }
   1642            }
   1643          
   1644            return ( stat );
   \                     ??zclSE_ProcessInPricingCmds_6:
   \   000066   ....         JMP     ?Subroutine5
   \   000068   0343         NOP
   1645          }
   1646          
   1647          /*********************************************************************
   1648           * @fn      zclSE_ProcessInCmd_Pricing_GetCurrentPrice
   1649           *
   1650           * @brief   Process in the received Get Current Price.
   1651           *
   1652           * @param   pInMsg - pointer to the incoming message
   1653           * @param   pCBs - pointer to the application call back function
   1654           *
   1655           * @return  ZStatus_t - ZFailure @ Unsupported
   1656           *                      ZCL_STATUS_CMD_HAS_RSP @ Supported and do
   1657           *                                           not need default rsp
   1658           */
   1659          static ZStatus_t zclSE_ProcessInCmd_Pricing_GetCurrentPrice( zclIncoming_t *pInMsg,
   1660                                                                        zclSE_AppCallbacks_t *pCBs )
   1661          {
   1662            if ( pCBs->pfnPricing_GetCurrentPrice )
   1663            {
   1664              zclCCGetCurrentPrice_t cmd;
   1665          
   1666              cmd.option = pInMsg->pData[0];
   1667          
   1668              pCBs->pfnPricing_GetCurrentPrice( &cmd,  &(pInMsg->msg->srcAddr),
   1669                                               pInMsg->hdr.transSeqNum );
   1670          
   1671              return ZCL_STATUS_CMD_HAS_RSP;
   1672            }
   1673            else
   1674            {
   1675              return ZFailure;
   1676            }
   1677          }
   1678          
   1679          /*********************************************************************
   1680           * @fn      zclSE_ProcessInCmd_Pricing_GetScheduledPrice
   1681           *
   1682           * @brief   Process in the received Get Scheduled Price.
   1683           *
   1684           * @param   pInMsg - pointer to the incoming message
   1685           * @param   pCBs - pointer to the application call back function
   1686           *
   1687           * @return  ZStatus_t - ZFailure @ Unsupported
   1688           *                      ZCL_STATUS_CMD_HAS_RSP @ Supported and do
   1689           *                                           not need default rsp
   1690           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine8:
   \   000000   6D42         MOV.B   #0x4, R13
   \   000002   1C4A0800     MOV.W   0x8(R10), R12
   \   000006   ........     CALLA   #?Subroutine45
   \                     ??CrossCallReturnLabel_76:
   \   00000A   1F4A0800     MOV.W   0x8(R10), R15
   \   00000E   D14F04000800 MOV.B   0x4(R15), 0x8(SP)
   \   000014                REQUIRE ?Subroutine54
   \   000014                // Fall through to label ?Subroutine54

   \                                 In  segment CODE, align 2, keep-with-next
   1691          static ZStatus_t zclSE_ProcessInCmd_Pricing_GetScheduledPrice( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_Pricing_GetScheduledPrice:
   1692                                                                          zclSE_AppCallbacks_t *pCBs )
   1693          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   31800600     SUB.W   #0x6, SP
   \   000006   0A4C         MOV.W   R12, R10
   \   000008   0B4D         MOV.W   R13, R11
   1694            if ( pCBs->pfnPricing_GetScheduledPrice )
   \   00000A   1F4D1C00     MOV.W   0x1c(R13), R15
   \   00000E   1FDD1E00     BIS.W   0x1e(R13), R15
   \   000012   0F93         CMP.W   #0x0, R15
   \   000014   0A24         JEQ     ??zclSE_ProcessInCmd_Pricing_GetScheduledPrice_0
   1695            {
   1696              zclCCGetScheduledPrice_t cmd;
   1697          
   1698              cmd.startTime = osal_build_uint32( pInMsg->pData, 4 );
   \   000016   ........     CALLA   #?Subroutine8
   1699              cmd.numEvents = pInMsg->pData[4];
   1700          
   1701              pCBs->pfnPricing_GetScheduledPrice( &cmd, &(pInMsg->msg->srcAddr),
   1702                                                 pInMsg->hdr.transSeqNum );
   1703              return ZCL_STATUS_CMD_HAS_RSP;
   1704            }
   \                     ??CrossCallReturnLabel_111:
   \   00001A   0C41         MOV.W   SP, R12
   \   00001C   1A4B1C00     MOV.W   0x1c(R11), R10
   \   000020   1B4B1E00     MOV.W   0x1e(R11), R11
   \   000024   ........     CALLA   #?Subroutine31
   \                     ??CrossCallReturnLabel_48:
   \   000028   013C         JMP     ??zclSE_ProcessInCmd_Pricing_GetScheduledPrice_1
   1705            else
   1706            {
   1707              return ZFailure;
   \                     ??zclSE_ProcessInCmd_Pricing_GetScheduledPrice_0:
   \   00002A   5C43         MOV.B   #0x1, R12
   1708            }
   \                     ??zclSE_ProcessInCmd_Pricing_GetScheduledPrice_1:
   \   00002C                REQUIRE ?Subroutine2
   \   00002C                // Fall through to label ?Subroutine2
   1709          }
   1710          
   1711          /*********************************************************************
   1712           * @fn      zclSE_ProcessInCmd_Pricing_PublishPrice
   1713           *
   1714           * @brief   Process in the received Publish Price.
   1715           *
   1716           * @param   pInMsg - pointer to the incoming message
   1717           * @param   pCBs - pointer to the application call back function
   1718           *
   1719           * @return  ZStatus_t - ZFailure @ Unsupported
   1720           *                      ZSuccess @ Supported and need default rsp
   1721           *                      ZCL_STATUS_CMD_HAS_RSP @ Supported and do
   1722           *                                           not need default rsp
   1723           *                      ZCL_STATUS_SOFTWARE_FAILURE @ ZStack memory allocation failure
   1724           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine29:
   \   000000   5E4C0A00     MOV.B   0xa(R12), R14
   \   000004   1D4C0800     MOV.W   0x8(R12), R13
   \   000008   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   1725          static ZStatus_t zclSE_ProcessInCmd_Pricing_PublishPrice( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_Pricing_PublishPrice:
   1726                                                                     zclSE_AppCallbacks_t *pCBs )
   1727          {
   \   000000   3B15         PUSHM.W #0x4, R11
   \   000002   31803000     SUB.W   #0x30, SP
   \   000006   0A4C         MOV.W   R12, R10
   \   000008   0B4D         MOV.W   R13, R11
   1728            if ( pCBs->pfnPricing_PublishPrice )
   \   00000A   1F4D2000     MOV.W   0x20(R13), R15
   \   00000E   1FDD2200     BIS.W   0x22(R13), R15
   \   000012   0F93         CMP.W   #0x0, R15
   \   000014   2324         JEQ     ??zclSE_ProcessInCmd_Pricing_PublishPrice_0
   1729            {
   1730              zclCCPublishPrice_t cmd;
   1731          
   1732              // Parse the command and do range check
   1733              if ( zclSE_ParseInCmd_PublishPrice( &cmd, &(pInMsg->pData[0]),
   1734                                                  pInMsg->pDataLen ) == ZSuccess )
   \   000016   ........     CALLA   #?Subroutine29
   \                     ??CrossCallReturnLabel_35:
   \   00001A   0C41         MOV.W   SP, R12
   \   00001C   ........     CALLA   #zclSE_ParseInCmd_PublishPrice
   \   000020   4C93         CMP.B   #0x0, R12
   \   000022   1920         JNE     ??zclSE_ProcessInCmd_Pricing_PublishPrice_1
   1735              {
   1736                pCBs->pfnPricing_PublishPrice( &cmd, &(pInMsg->msg->srcAddr),
   1737                                              pInMsg->hdr.transSeqNum );
   \   000024   ........     CALLA   #?Subroutine54
   \                     ??CrossCallReturnLabel_119:
   \   000028   0C41         MOV.W   SP, R12
   \   00002A   184B2000     MOV.W   0x20(R11), R8
   \   00002E   194B2200     MOV.W   0x22(R11), R9
   \   000032   ........     CALLA   #?IndCallR9
   1738          
   1739                // Free the memory allocated in zclSE_ParseInCmd_PublishPrice()
   1740                if ( cmd.rateLabel.pStr != NULL )
   \   000036   1C410600     MOV.W   0x6(SP), R12
   \   00003A   0C93         CMP.W   #0x0, R12
   \   00003C   0224         JEQ     ??zclSE_ProcessInCmd_Pricing_PublishPrice_2
   1741                {
   1742                  osal_mem_free( cmd.rateLabel.pStr );
   \   00003E   ........     CALLA   #osal_mem_free
   1743                }
   1744          
   1745                // SE 1.1
   1746                if ((pInMsg->pDataLen - cmd.rateLabel.strLen) > PACKET_LEN_SE_PUBLISH_PRICE_SE_1_0)
   \                     ??zclSE_ProcessInCmd_Pricing_PublishPrice_2:
   \   000042   1B4A0A00     MOV.W   0xa(R10), R11
   \   000046   5F410400     MOV.B   0x4(SP), R15
   \   00004A   0B8F         SUB.W   R15, R11
   \   00004C   3B902300     CMP.W   #0x23, R11
   \   000050   4C7C         SUBC.B  R12, R12
   \   000052   7CE3         XOR.B   #0xff, R12
   1747                {
   1748                  return ZCL_STATUS_CMD_HAS_RSP;
   \   000054   043C         JMP     ??zclSE_ProcessInCmd_Pricing_PublishPrice_3
   1749                }
   1750                else
   1751                {
   1752                  // SE 1.0 backwards compatibility
   1753                  return ZSuccess;
   1754                }
   1755              }
   1756              else
   1757              {
   1758                return ZCL_STATUS_SOFTWARE_FAILURE;
   \                     ??zclSE_ProcessInCmd_Pricing_PublishPrice_1:
   \   000056   7C40C100     MOV.B   #0xc1, R12
   \   00005A   013C         JMP     ??zclSE_ProcessInCmd_Pricing_PublishPrice_3
   1759              }
   1760            }
   1761            else
   1762            {
   1763              return ZFailure;
   \                     ??zclSE_ProcessInCmd_Pricing_PublishPrice_0:
   \   00005C   5C43         MOV.B   #0x1, R12
   \                     ??zclSE_ProcessInCmd_Pricing_PublishPrice_3:
   \   00005E   31503000     ADD.W   #0x30, SP
   \   000062   3817         POPM.W  #0x4, R11
   \   000064   1001         RETA
   1764            }
   1765          }
   1766          
   1767          /*********************************************************************
   1768           * @fn      zclSE_ProcessInCmd_Pricing_PriceAcknowledgement
   1769           *
   1770           * @brief   Process in the received Price Acknowledgement
   1771           *
   1772           * @param   pInMsg - pointer to the incoming message
   1773           * @param   pCBs - pointer to the application call back function
   1774           *
   1775           * @return  ZStatus_t - ZFailure @ Unsupported
   1776           *                      ZSuccess @ Supported and need default rsp
   1777           */

   \                                 In  segment CODE, align 2, keep-with-next
   1778          static ZStatus_t zclSE_ProcessInCmd_Pricing_PriceAcknowledgement( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_Pricing_PriceAcknowledgement:
   1779                                                                            zclSE_AppCallbacks_t *pCBs )
   1780          {
   \   000000   3B15         PUSHM.W #0x4, R11
   \   000002   31800E00     SUB.W   #0xe, SP
   \   000006   0A4C         MOV.W   R12, R10
   \   000008   0B4D         MOV.W   R13, R11
   1781            if ( pCBs->pfnPricing_PriceAcknowledgement )
   \   00000A   1F4D5000     MOV.W   0x50(R13), R15
   \   00000E   1FDD5200     BIS.W   0x52(R13), R15
   \   000012   0F93         CMP.W   #0x0, R15
   \   000014   1C24         JEQ     ??zclSE_ProcessInCmd_Pricing_PriceAcknowledgeme_0
   1782            {
   1783              zclCCPriceAcknowledgement_t cmd;
   1784          
   1785              cmd.providerId = osal_build_uint32( pInMsg->pData, 4 );
   \   000016   084C         MOV.W   R12, R8
   \   000018   3852         ADD.W   #0x8, R8
   \   00001A   6D42         MOV.B   #0x4, R13
   \   00001C   2C48         MOV.W   @R8, R12
   \   00001E   ........     CALLA   #?Subroutine19
   1786              cmd.issuerEventId = osal_build_uint32( &pInMsg->pData[4], 4 );
   \                     ??CrossCallReturnLabel_20:
   \   000022   2C48         MOV.W   @R8, R12
   \   000024   ........     CALLA   #?Subroutine20
   1787              cmd.priceAckTime = osal_build_uint32( &pInMsg->pData[8], 4 );
   \                     ??CrossCallReturnLabel_22:
   \   000028   6D42         MOV.B   #0x4, R13
   \   00002A   2C48         MOV.W   @R8, R12
   \   00002C   3C52         ADD.W   #0x8, R12
   \   00002E   ........     CALLA   #?Subroutine47
   1788              cmd.control = pInMsg->pData[12];
   \                     ??CrossCallReturnLabel_79:
   \   000032   2F48         MOV.W   @R8, R15
   \   000034   D14F0C000C00 MOV.B   0xc(R15), 0xc(SP)
   1789          
   1790              pCBs->pfnPricing_PriceAcknowledgement( &cmd, &(pInMsg->msg->srcAddr),
   1791                                                 pInMsg->hdr.transSeqNum );
   \   00003A   ........     CALLA   #?Subroutine54
   1792              return ZSuccess;
   1793            }
   \                     ??CrossCallReturnLabel_118:
   \   00003E   0C41         MOV.W   SP, R12
   \   000040   1A4B5000     MOV.W   0x50(R11), R10
   \   000044   1B4B5200     MOV.W   0x52(R11), R11
   \   000048   ........     CALLA   #?Subroutine30
   \                     ??CrossCallReturnLabel_41:
   \   00004C   013C         JMP     ??zclSE_ProcessInCmd_Pricing_PriceAcknowledgeme_1
   1794            else
   1795            {
   1796              return ZFailure;
   \                     ??zclSE_ProcessInCmd_Pricing_PriceAcknowledgeme_0:
   \   00004E   5C43         MOV.B   #0x1, R12
   \                     ??zclSE_ProcessInCmd_Pricing_PriceAcknowledgeme_1:
   \   000050   31500E00     ADD.W   #0xe, SP
   \   000054   3817         POPM.W  #0x4, R11
   \   000056   1001         RETA
   1797            }
   1798          }

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine20:
   \   000000   2C52         ADD.W   #0x4, R12
   \   000002   ........     CALLA   #?Subroutine47
   \                     ??CrossCallReturnLabel_80:
   \   000006   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine47:
   \   000000   ........     CALLA   #osal_build_uint32
   \   000004   814C0C00     MOV.W   R12, 0xc(SP)
   \   000008   814D0E00     MOV.W   R13, 0xe(SP)
   \   00000C   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine19:
   \   000000   ........     CALLA   #?Subroutine45
   \                     ??CrossCallReturnLabel_77:
   \   000004   6D42         MOV.B   #0x4, R13
   \   000006   1001         RETA
   1799          
   1800          /*********************************************************************
   1801           * @fn      zclSE_ProcessInCmd_Pricing_GetBlockPeriod
   1802           *
   1803           * @brief   Process in the received Get Block Period.
   1804           *
   1805           * @param   pInMsg - pointer to the incoming message
   1806           * @param   pCBs - pointer to the application call back function
   1807           *
   1808           * @return  ZStatus_t - ZFailure @ Unsupported
   1809           *                      ZCL_STATUS_CMD_HAS_RSP @ Supported and do
   1810           *                                           not need default rsp
   1811           */

   \                                 In  segment CODE, align 2, keep-with-next
   1812          static ZStatus_t zclSE_ProcessInCmd_Pricing_GetBlockPeriod( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_Pricing_GetBlockPeriod:
   1813                                                                      zclSE_AppCallbacks_t *pCBs )
   1814          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   31800600     SUB.W   #0x6, SP
   \   000006   0A4C         MOV.W   R12, R10
   \   000008   0B4D         MOV.W   R13, R11
   1815            if ( pCBs->pfnPricing_GetBlockPeriod )
   \   00000A   1F4D5400     MOV.W   0x54(R13), R15
   \   00000E   1FDD5600     BIS.W   0x56(R13), R15
   \   000012   0F93         CMP.W   #0x0, R15
   \   000014   0A24         JEQ     ??zclSE_ProcessInCmd_Pricing_GetBlockPeriod_0
   1816            {
   1817              zclCCGetBlockPeriod_t cmd;
   1818          
   1819              cmd.startTime = osal_build_uint32( pInMsg->pData, 4 );
   \   000016   ........     CALLA   #?Subroutine8
   1820              cmd.numEvents = pInMsg->pData[4];
   1821          
   1822              pCBs->pfnPricing_GetBlockPeriod( &cmd, &(pInMsg->msg->srcAddr),
   1823                                               pInMsg->hdr.transSeqNum );
   1824              return ZCL_STATUS_CMD_HAS_RSP;
   1825            }
   \                     ??CrossCallReturnLabel_110:
   \   00001A   0C41         MOV.W   SP, R12
   \   00001C   1A4B5400     MOV.W   0x54(R11), R10
   \   000020   1B4B5600     MOV.W   0x56(R11), R11
   \   000024   ........     CALLA   #?Subroutine31
   \                     ??CrossCallReturnLabel_47:
   \   000028   013C         JMP     ??zclSE_ProcessInCmd_Pricing_GetBlockPeriod_1
   1826            else
   1827            {
   1828              return ZFailure;
   \                     ??zclSE_ProcessInCmd_Pricing_GetBlockPeriod_0:
   \   00002A   5C43         MOV.B   #0x1, R12
   1829            }
   \                     ??zclSE_ProcessInCmd_Pricing_GetBlockPeriod_1:
   \   00002C   ....         JMP     ?Subroutine2
   \   00002E   0343         NOP
   1830          }
   1831          
   1832          /*********************************************************************
   1833           * @fn      zclSE_ProcessInCmd_Pricing_PublishBlockPeriod
   1834           *
   1835           * @brief   Process in the received Publish Block Period.
   1836           *
   1837           * @param   pInMsg - pointer to the incoming message
   1838           * @param   pCBs - pointer to the application call back function
   1839           *
   1840           * @return  ZStatus_t - ZFailure @ Unsupported
   1841           *                      ZCL_STATUS_CMD_HAS_RSP @ Supported and do
   1842           *                                           not need default rsp
   1843           *                      ZCL_STATUS_SOFTWARE_FAILURE @ ZStack memory allocation failure
   1844           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine4:
   \   000000   31501200     ADD.W   #0x12, SP
   \   000004   1A17         POPM.W  #0x2, R11
   \   000006   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   1845          static ZStatus_t zclSE_ProcessInCmd_Pricing_PublishBlockPeriod( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_Pricing_PublishBlockPeriod:
   1846                                                                          zclSE_AppCallbacks_t *pCBs )
   1847          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   31801200     SUB.W   #0x12, SP
   \   000006   0A4C         MOV.W   R12, R10
   \   000008   0B4D         MOV.W   R13, R11
   1848            if ( pCBs->pfnPricing_PublishBlockPeriod )
   \   00000A   1F4D5800     MOV.W   0x58(R13), R15
   \   00000E   1FDD5A00     BIS.W   0x5a(R13), R15
   \   000012   0F93         CMP.W   #0x0, R15
   \   000014   1424         JEQ     ??zclSE_ProcessInCmd_Pricing_PublishBlockPeriod_0
   1849            {
   1850              zclCCPublishBlockPeriod_t cmd;
   1851          
   1852              // Parse the command and do range check
   1853              if ( zclSE_ParseInCmd_PublishBlockPeriod( &cmd, &(pInMsg->pData[0]),
   1854                                                        pInMsg->pDataLen ) == ZSuccess )
   \   000016   ........     CALLA   #?Subroutine29
   \                     ??CrossCallReturnLabel_34:
   \   00001A   0C41         MOV.W   SP, R12
   \   00001C   ........     CALLA   #zclSE_ParseInCmd_PublishBlockPeriod
   \   000020   4C93         CMP.B   #0x0, R12
   \   000022   0A20         JNE     ??zclSE_ProcessInCmd_Pricing_PublishBlockPeriod_1
   1855              {
   1856                pCBs->pfnPricing_PublishBlockPeriod( &cmd, &(pInMsg->msg->srcAddr),
   1857                                                     pInMsg->hdr.transSeqNum );
   \   000024   ........     CALLA   #?Subroutine54
   1858          
   1859                return ZCL_STATUS_CMD_HAS_RSP;
   1860              }
   \                     ??CrossCallReturnLabel_117:
   \   000028   0C41         MOV.W   SP, R12
   \   00002A   1A4B5800     MOV.W   0x58(R11), R10
   \   00002E   1B4B5A00     MOV.W   0x5a(R11), R11
   \   000032   ........     CALLA   #?Subroutine31
   \                     ??CrossCallReturnLabel_46:
   \   000036   043C         JMP     ??zclSE_ProcessInCmd_Pricing_PublishBlockPeriod_2
   1861              else
   1862              {
   1863                return ZCL_STATUS_SOFTWARE_FAILURE;
   \                     ??zclSE_ProcessInCmd_Pricing_PublishBlockPeriod_1:
   \   000038   7C40C100     MOV.B   #0xc1, R12
   \   00003C   013C         JMP     ??zclSE_ProcessInCmd_Pricing_PublishBlockPeriod_2
   1864              }
   1865            }
   1866            else
   1867            {
   1868              return ZFailure;
   \                     ??zclSE_ProcessInCmd_Pricing_PublishBlockPeriod_0:
   \   00003E   5C43         MOV.B   #0x1, R12
   1869            }
   \                     ??zclSE_ProcessInCmd_Pricing_PublishBlockPeriod_2:
   \   000040   ....         JMP     ?Subroutine4
   \   000042   0343         NOP
   1870          }
   1871          #endif  // ZCL_PRICING
   1872          
   1873          
   1874          #ifdef ZCL_MESSAGE
   1875          /*********************************************************************
   1876           * @fn      zclSE_ProcessInMessageCmds
   1877           *
   1878           * @brief   Callback from ZCL to process incoming Commands specific
   1879           *          to this cluster library on a command ID basis
   1880           *
   1881           * @param   pInMsg - pointer to the incoming message
   1882           * @param   pCBs - pointer to the application call back function
   1883           *
   1884           * @return  ZStatus_t
   1885           */

   \                                 In  segment CODE, align 2, keep-with-next
   1886          static ZStatus_t zclSE_ProcessInMessageCmds( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInMessageCmds:
   1887                                                        zclSE_AppCallbacks_t *pCBs )
   1888          {
   1889            ZStatus_t stat;
   1890          
   1891            if ( zcl_ServerCmd( pInMsg->hdr.fc.direction ) )
   \   000000   ........     CALLA   #??Subroutine33_0
   \                     ??CrossCallReturnLabel_107:
   \   000004   152C         JC      ??zclSE_ProcessInMessageCmds_1
   1892            {
   1893              // Process Client commands, received by server
   1894              switch ( pInMsg->hdr.commandID )
   \   000006   4E83         SUB.B   #0x0, R14
   \   000008   0324         JEQ     ??zclSE_ProcessInMessageCmds_2
   \   00000A   5E83         SUB.B   #0x1, R14
   \   00000C   0F24         JEQ     ??zclSE_ProcessInMessageCmds_3
   \   00000E   0C3C         JMP     ??zclSE_ProcessInMessageCmds_0
   1895              {
   1896                case COMMAND_SE_GET_LAST_MESSAGE:
   1897                  stat = zclSE_ProcessInCmd_Message_GetLastMessage( pInMsg, pCBs );
   \                     ??zclSE_ProcessInMessageCmds_2:
   \   000010   1E4D2C00     MOV.W   0x2c(R13), R14
   \   000014   1F4D2E00     MOV.W   0x2e(R13), R15
   \   000018   0D4E         MOV.W   R14, R13
   \   00001A   0DDF         BIS.W   R15, R13
   \   00001C   0D93         CMP.W   #0x0, R13
   \   00001E   0424         JEQ     ??zclSE_ProcessInMessageCmds_0
   \   000020   ........     CALLA   #?Subroutine35
   \                     ??CrossCallReturnLabel_54:
   \   000024   7C43         MOV.B   #0xff, R12
   \   000026   1001         RETA
   \                     ??zclSE_ProcessInMessageCmds_0:
   \   000028   5C43         MOV.B   #0x1, R12
   \   00002A   1001         RETA
   1898                  break;
   1899          
   1900                case COMMAND_SE_MESSAGE_CONFIRMATION:
   1901                  stat = zclSE_ProcessInCmd_Message_MessageConfirmation( pInMsg, pCBs );
   \                     ??zclSE_ProcessInMessageCmds_3:
   \   00002C   ........     BRA     #zclSE_ProcessInCmd_Message_MessageConfirmation
   1902                  break;
   1903          
   1904                default:
   1905                  stat = ZFailure;
   1906                  break;
   1907              }
   1908            }
   1909            else
   1910            {
   1911              // Process Server commands, received by client
   1912              switch ( pInMsg->hdr.commandID )
   \                     ??zclSE_ProcessInMessageCmds_1:
   \   000030   4E83         SUB.B   #0x0, R14
   \   000032   0324         JEQ     ??zclSE_ProcessInMessageCmds_4
   \   000034   5E83         SUB.B   #0x1, R14
   \   000036   0324         JEQ     ??zclSE_ProcessInMessageCmds_5
   \   000038   F73F         JMP     ??zclSE_ProcessInMessageCmds_0
   1913              {
   1914                case COMMAND_SE_DISPLAY_MESSAGE:
   1915                  stat = zclSE_ProcessInCmd_Message_DisplayMessage( pInMsg, pCBs );
   \                     ??zclSE_ProcessInMessageCmds_4:
   \   00003A   ........     BRA     #zclSE_ProcessInCmd_Message_DisplayMessage
   1916                  break;
   1917          
   1918                case COMMAND_SE_CANCEL_MESSAGE:
   1919                  stat = zclSE_ProcessInCmd_Message_CancelMessage( pInMsg, pCBs );
   \                     ??zclSE_ProcessInMessageCmds_5:
   \   00003E   ........     BRA     #zclSE_ProcessInCmd_Message_CancelMessage
   1920                  break;
   1921          
   1922                default:
   1923                  stat = ZFailure;
   1924                  break;
   1925              }
   1926            }
   1927          
   1928            return ( stat );
   1929          }
   1930          
   1931          /*********************************************************************
   1932           * @fn      zclSE_ProcessInCmd_Message_DisplayMessage
   1933           *
   1934           * @brief   Process in the received Display Message Command.
   1935           *
   1936           * @param   pInMsg - pointer to the incoming message
   1937           * @param   pCBs - pointer to the application call back function
   1938           *
   1939           * @return  ZStatus_t - ZFailure @ Unsupported
   1940           *                      ZSuccess @ Supported and send default rsp
   1941           *                      ZCL_STATUS_SOFTWARE_FAILURE @ ZStack memory allocation failure
   1942           */

   \                                 In  segment CODE, align 2, keep-with-next
   1943          static ZStatus_t zclSE_ProcessInCmd_Message_DisplayMessage( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_Message_DisplayMessage:
   1944                                                                       zclSE_AppCallbacks_t *pCBs )
   1945          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   31801200     SUB.W   #0x12, SP
   \   000006   0A4C         MOV.W   R12, R10
   \   000008   0B4D         MOV.W   R13, R11
   1946            if ( pCBs->pfnMessage_DisplayMessage )
   \   00000A   1F4D2400     MOV.W   0x24(R13), R15
   \   00000E   1FDD2600     BIS.W   0x26(R13), R15
   \   000012   0F93         CMP.W   #0x0, R15
   \   000014   1B24         JEQ     ??zclSE_ProcessInCmd_Message_DisplayMessage_0
   1947            {
   1948              zclCCDisplayMessage_t cmd;
   1949          
   1950              if ( zclSE_ParseInCmd_DisplayMessage( &cmd,  &(pInMsg->pData[0]), pInMsg->pDataLen ) == ZSuccess )
   \   000016   ........     CALLA   #?Subroutine29
   \                     ??CrossCallReturnLabel_33:
   \   00001A   0C41         MOV.W   SP, R12
   \   00001C   ........     CALLA   #zclSE_ParseInCmd_DisplayMessage
   \   000020   4C93         CMP.B   #0x0, R12
   \   000022   1120         JNE     ??zclSE_ProcessInCmd_Message_DisplayMessage_1
   1951              {
   1952                pCBs->pfnMessage_DisplayMessage( &cmd, &(pInMsg->msg->srcAddr),
   1953                                              pInMsg->hdr.transSeqNum );
   \   000024   ........     CALLA   #?Subroutine54
   \                     ??CrossCallReturnLabel_116:
   \   000028   0C41         MOV.W   SP, R12
   \   00002A   1A4B2400     MOV.W   0x24(R11), R10
   \   00002E   1B4B2600     MOV.W   0x26(R11), R11
   \   000032   ........     CALLA   #?IndCallR11
   1954          
   1955                // Free memory allocated in zclSE_ParseInCmd_DiplayMessage()
   1956                if ( cmd.msgString.pStr != NULL )
   \   000036   1C411000     MOV.W   0x10(SP), R12
   \   00003A   0C93         CMP.W   #0x0, R12
   \   00003C   0224         JEQ     ??zclSE_ProcessInCmd_Message_DisplayMessage_2
   1957                {
   1958                  osal_mem_free( cmd.msgString.pStr );
   \   00003E   ........     CALLA   #osal_mem_free
   1959                }
   1960          
   1961                return ZSuccess;
   \                     ??zclSE_ProcessInCmd_Message_DisplayMessage_2:
   \   000042   4C43         MOV.B   #0x0, R12
   \   000044   043C         JMP     ??zclSE_ProcessInCmd_Message_DisplayMessage_3
   1962              }
   1963              else
   1964              {
   1965                return ZCL_STATUS_SOFTWARE_FAILURE;
   \                     ??zclSE_ProcessInCmd_Message_DisplayMessage_1:
   \   000046   7C40C100     MOV.B   #0xc1, R12
   \   00004A   013C         JMP     ??zclSE_ProcessInCmd_Message_DisplayMessage_3
   1966              }
   1967            }
   1968          
   1969            return ZFailure;
   \                     ??zclSE_ProcessInCmd_Message_DisplayMessage_0:
   \   00004C   5C43         MOV.B   #0x1, R12
   \                     ??zclSE_ProcessInCmd_Message_DisplayMessage_3:
   \   00004E                REQUIRE ?Subroutine4
   \   00004E                // Fall through to label ?Subroutine4
   1970          
   1971          }
   1972          
   1973          /*********************************************************************
   1974           * @fn      zclSE_ProcessInCmd_Message_CancelMessage
   1975           *
   1976           * @brief   Process in the received Cancel Message Command.
   1977           *
   1978           * @param   pInMsg - pointer to the incoming message
   1979           * @param   pCBs - pointer to the application call back function
   1980           *
   1981           * @return  ZStatus_t - ZFailure @ Unsupported
   1982           *                      ZSuccess @ Supported and send default rsp
   1983           */

   \                                 In  segment CODE, align 2, keep-with-next
   1984          static ZStatus_t zclSE_ProcessInCmd_Message_CancelMessage( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_Message_CancelMessage:
   1985                                                                      zclSE_AppCallbacks_t *pCBs )
   1986          {
   \   000000   3B15         PUSHM.W #0x4, R11
   \   000002   3182         SUB.W   #0x8, SP
   \   000004   0A4C         MOV.W   R12, R10
   \   000006   0B4D         MOV.W   R13, R11
   1987            if ( pCBs->pfnMessage_CancelMessage )
   \   000008   1F4D2800     MOV.W   0x28(R13), R15
   \   00000C   1FDD2A00     BIS.W   0x2a(R13), R15
   \   000010   0F93         CMP.W   #0x0, R15
   \   000012   2324         JEQ     ??zclSE_ProcessInCmd_Message_CancelMessage_0
   1988            {
   1989              zclCCCancelMessage_t cmd;
   1990          
   1991              cmd.messageId = osal_build_uint32( &(pInMsg->pData[0]), 4 );
   \   000014   ........     CALLA   #?Subroutine15
   1992          
   1993              // Message Control
   1994              cmd.messageCtrl.transmissionMode = pInMsg->pData[4] & 0x03;    // bit 0&1
   \                     ??CrossCallReturnLabel_15:
   \   000018   5E4F0400     MOV.B   0x4(R15), R14
   \   00001C   7EF00300     AND.B   #0x3, R14
   \   000020   C14E0400     MOV.B   R14, 0x4(SP)
   1995              cmd.messageCtrl.importance = ( pInMsg->pData[4] >> SE_PROFILE_MSGCTRL_IMPORTANCE ) & 0x03; // bit 2&3
   \   000024   2F48         MOV.W   @R8, R15
   \   000026   5E4F0400     MOV.B   0x4(R15), R14
   \   00002A                RPT     #0x2
   \   00002A   41194E10     RRUX.B  R14
   \   00002E   7EF00300     AND.B   #0x3, R14
   \   000032   C14E0500     MOV.B   R14, 0x5(SP)
   1996              cmd.messageCtrl.confirmationRequired = ( pInMsg->pData[4] >> SE_PROFILE_MSGCTRL_CONFREQUIRED ) & 0x01;  // bit 7
   \   000036   2F48         MOV.W   @R8, R15
   \   000038   FFB080000400 BIT.B   #0x80, 0x4(R15)
   \   00003E   4E7E         SUBC.B  R14, R14
   \   000040   5E53         ADD.B   #0x1, R14
   \   000042   C14E0600     MOV.B   R14, 0x6(SP)
   1997          
   1998              pCBs->pfnMessage_CancelMessage( &cmd, &(pInMsg->msg->srcAddr),
   1999                                             pInMsg->hdr.transSeqNum );
   \   000046   ........     CALLA   #?Subroutine54
   2000          
   2001              return ZSuccess;
   2002            }
   \                     ??CrossCallReturnLabel_115:
   \   00004A   0C41         MOV.W   SP, R12
   \   00004C   1A4B2800     MOV.W   0x28(R11), R10
   \   000050   1B4B2A00     MOV.W   0x2a(R11), R11
   \   000054   ........     CALLA   #?Subroutine30
   \                     ??CrossCallReturnLabel_40:
   \   000058   013C         JMP     ??zclSE_ProcessInCmd_Message_CancelMessage_1
   2003            else
   2004            {
   2005              return ZFailure;
   \                     ??zclSE_ProcessInCmd_Message_CancelMessage_0:
   \   00005A   5C43         MOV.B   #0x1, R12
   \                     ??zclSE_ProcessInCmd_Message_CancelMessage_1:
   \   00005C   3152         ADD.W   #0x8, SP
   \   00005E   3817         POPM.W  #0x4, R11
   \   000060   1001         RETA
   2006            }
   2007          }
   2008          
   2009          /*********************************************************************
   2010           * @fn      zclSE_ProcessInCmd_Message_GetLastMessage
   2011           *
   2012           * @brief   Process in the received Get Last Message Command.
   2013           *
   2014           * @param   pInMsg - pointer to the incoming message
   2015           * @param   pCBs - pointer to the application call back function
   2016           *
   2017           * @return  ZStatus_t - ZFailure @ Unsupported
   2018           *                      ZCL_STATUS_CMD_HAS_RSP @ Supported and do
   2019           *                                           not need default rsp
   2020           */
   2021          static ZStatus_t zclSE_ProcessInCmd_Message_GetLastMessage( zclIncoming_t *pInMsg,
   2022                                                                       zclSE_AppCallbacks_t *pCBs )
   2023          {
   2024            if ( pCBs->pfnMessage_GetLastMessage )
   2025            {
   2026              pCBs->pfnMessage_GetLastMessage( &(pInMsg->msg->srcAddr), pInMsg->hdr.transSeqNum );
   2027              return ZCL_STATUS_CMD_HAS_RSP;
   2028            }
   2029            else
   2030            {
   2031              return ZFailure;
   2032            }
   2033          }
   2034          
   2035          /*********************************************************************
   2036           * @fn      zclSE_ProcessInCmd_Message_MessageConfirmation
   2037           *
   2038           * @brief   Process in the received Message Confirmation.
   2039           *
   2040           * @param   pInMsg - pointer to the incoming message
   2041           * @param   pCBs - pointer to the application call back function
   2042           *
   2043           * @return  ZStatus_t - ZFailure @ Unsupported
   2044           *                      ZSuccess @ Supported and send default rsp
   2045           */

   \                                 In  segment CODE, align 2, keep-with-next
   2046          static ZStatus_t zclSE_ProcessInCmd_Message_MessageConfirmation( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_Message_MessageConfirmation:
   2047                                                                            zclSE_AppCallbacks_t *pCBs )
   2048          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   3182         SUB.W   #0x8, SP
   \   000004   0A4C         MOV.W   R12, R10
   \   000006   0B4D         MOV.W   R13, R11
   2049            if ( pCBs->pfnMessage_MessageConfirmation )
   \   000008   1F4D3000     MOV.W   0x30(R13), R15
   \   00000C   1FDD3200     BIS.W   0x32(R13), R15
   \   000010   0F93         CMP.W   #0x0, R15
   \   000012   1324         JEQ     ??zclSE_ProcessInCmd_Message_MessageConfirmatio_0
   2050            {
   2051              zclCCMessageConfirmation_t cmd;
   2052          
   2053              cmd.messageId = osal_build_uint32( &(pInMsg->pData[0]), 4 );
   \   000014   6D42         MOV.B   #0x4, R13
   \   000016   1C4A0800     MOV.W   0x8(R10), R12
   \   00001A   ........     CALLA   #?Subroutine19
   2054              cmd.confirmTime = osal_build_uint32( &(pInMsg->pData[4]), 4 );
   \                     ??CrossCallReturnLabel_19:
   \   00001E   1C4A0800     MOV.W   0x8(R10), R12
   \   000022   ........     CALLA   #?Subroutine20
   2055          
   2056              pCBs->pfnMessage_MessageConfirmation( &cmd, &(pInMsg->msg->srcAddr),
   2057                                                   pInMsg->hdr.transSeqNum );
   \                     ??CrossCallReturnLabel_21:
   \   000026   ........     CALLA   #?Subroutine54
   2058              return ZSuccess;
   2059            }
   \                     ??CrossCallReturnLabel_114:
   \   00002A   0C41         MOV.W   SP, R12
   \   00002C   1A4B3000     MOV.W   0x30(R11), R10
   \   000030   1B4B3200     MOV.W   0x32(R11), R11
   \   000034   ........     CALLA   #?Subroutine30
   \                     ??CrossCallReturnLabel_39:
   \   000038   013C         JMP     ??zclSE_ProcessInCmd_Message_MessageConfirmatio_1
   2060            else
   2061            {
   2062              return ZFailure;
   \                     ??zclSE_ProcessInCmd_Message_MessageConfirmatio_0:
   \   00003A   5C43         MOV.B   #0x1, R12
   2063            }
   \                     ??zclSE_ProcessInCmd_Message_MessageConfirmatio_1:
   \   00003C                REQUIRE ?Subroutine6
   \   00003C                // Fall through to label ?Subroutine6
   2064          }
   2065          #endif  // ZCL_MESSAGE
   2066          
   2067          
   2068          #ifdef ZCL_LOAD_CONTROL
   2069          /*********************************************************************
   2070           * @fn      zclSE_ProcessInLoadControlCmds
   2071           *
   2072           * @brief   Callback from ZCL to process incoming Commands specific
   2073           *          to this cluster library on a command ID basis
   2074           *
   2075           * @param   pInMsg - pointer to the incoming message
   2076           * @param   pCBs - pointer to the application call back function
   2077           *
   2078           * @return  ZStatus_t
   2079           */

   \                                 In  segment CODE, align 2, keep-with-next
   2080          static ZStatus_t zclSE_ProcessInLoadControlCmds( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInLoadControlCmds:
   2081                                                            zclSE_AppCallbacks_t *pCBs )
   2082          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   2183         SUB.W   #0x2, SP
   \   000004   ........     CALLA   #?Subroutine33
   2083            ZStatus_t stat;
   2084          
   2085            if ( zcl_ServerCmd( pInMsg->hdr.fc.direction ) )
   \                     ??CrossCallReturnLabel_105:
   \   000008   0B2C         JC      ??zclSE_ProcessInLoadControlCmds_0
   2086            {
   2087              // Process Client commands, received by server
   2088              switch ( pInMsg->hdr.commandID )
   \   00000A   4E83         SUB.B   #0x0, R14
   \   00000C   0324         JEQ     ??zclSE_ProcessInLoadControlCmds_1
   \   00000E   5E83         SUB.B   #0x1, R14
   \   000010   0424         JEQ     ??zclSE_ProcessInLoadControlCmds_2
   \   000012   233C         JMP     ??zclSE_ProcessInLoadControlCmds_3
   2089              {
   2090                case COMMAND_SE_REPORT_EVENT_STATUS:
   2091                  stat = zclSE_ProcessInCmd_LoadControl_ReportEventStatus( pInMsg, pCBs );
   \                     ??zclSE_ProcessInLoadControlCmds_1:
   \   000014   ........     CALLA   #zclSE_ProcessInCmd_LoadControl_ReportEventStatus
   2092                  break;
   \   000018   213C         JMP     ??zclSE_ProcessInLoadControlCmds_4
   2093          
   2094                case COMMAND_SE_GET_SCHEDULED_EVENT:
   2095                  stat = zclSE_ProcessInCmd_LoadControl_GetScheduledEvents( pInMsg, pCBs );
   \                     ??zclSE_ProcessInLoadControlCmds_2:
   \   00001A   ........     CALLA   #zclSE_ProcessInCmd_LoadControl_GetScheduledEvents
   2096                  break;
   \   00001E   1E3C         JMP     ??zclSE_ProcessInLoadControlCmds_4
   2097          
   2098                default:
   2099                  stat = ZFailure;
   2100                  break;
   2101              }
   2102            }
   2103            else
   2104            {
   2105              // Process Server commands, received by client
   2106              switch ( pInMsg->hdr.commandID )
   \                     ??zclSE_ProcessInLoadControlCmds_0:
   \   000020   4E83         SUB.B   #0x0, R14
   \   000022   0524         JEQ     ??zclSE_ProcessInLoadControlCmds_5
   \   000024   5E83         SUB.B   #0x1, R14
   \   000026   0624         JEQ     ??zclSE_ProcessInLoadControlCmds_6
   \   000028   5E83         SUB.B   #0x1, R14
   \   00002A   0724         JEQ     ??zclSE_ProcessInLoadControlCmds_7
   \   00002C   163C         JMP     ??zclSE_ProcessInLoadControlCmds_3
   2107              {
   2108                case COMMAND_SE_LOAD_CONTROL_EVENT:
   2109                  stat = zclSE_ProcessInCmd_LoadControl_LoadControlEvent( pInMsg, pCBs );
   \                     ??zclSE_ProcessInLoadControlCmds_5:
   \   00002E   ........     CALLA   #zclSE_ProcessInCmd_LoadControl_LoadControlEvent
   2110                  break;
   \   000032   143C         JMP     ??zclSE_ProcessInLoadControlCmds_4
   2111          
   2112                case COMMAND_SE_CANCEL_LOAD_CONTROL_EVENT:
   2113                  stat = zclSE_ProcessInCmd_LoadControl_CancelLoadControlEvent( pInMsg, pCBs );
   \                     ??zclSE_ProcessInLoadControlCmds_6:
   \   000034   ........     CALLA   #zclSE_ProcessInCmd_LoadControl_CancelLoadControlEvent
   2114                  break;
   \   000038   113C         JMP     ??zclSE_ProcessInLoadControlCmds_4
   2115          
   2116                case COMMAND_SE_CANCEL_ALL_LOAD_CONTROL_EVENT:
   2117                  stat = zclSE_ProcessInCmd_LoadControl_CancelAllLoadControlEvents( pInMsg, pCBs );
   \                     ??zclSE_ProcessInLoadControlCmds_7:
   \   00003A   1E4D3C00     MOV.W   0x3c(R13), R14
   \   00003E   1EDD3E00     BIS.W   0x3e(R13), R14
   \   000042   0E93         CMP.W   #0x0, R14
   \   000044   0A24         JEQ     ??zclSE_ProcessInLoadControlCmds_3
   \   000046   ........     CALLA   #?Subroutine32
   2118                  break;
   2119          
   2120                default:
   2121                  stat = ZFailure;
   2122                  break;
   2123              }
   2124            }
   \                     ??CrossCallReturnLabel_126:
   \   00004A   0C41         MOV.W   SP, R12
   \   00004C   1A4F3C00     MOV.W   0x3c(R15), R10
   \   000050   1B4F3E00     MOV.W   0x3e(R15), R11
   \   000054   ........     CALLA   #?Subroutine30
   \                     ??CrossCallReturnLabel_45:
   \   000058   013C         JMP     ??zclSE_ProcessInLoadControlCmds_4
   \                     ??zclSE_ProcessInLoadControlCmds_3:
   \   00005A   5C43         MOV.B   #0x1, R12
   2125          
   2126            return ( stat );
   \                     ??zclSE_ProcessInLoadControlCmds_4:
   \   00005C   ........     BRA     #?Subroutine5
   2127          }
   2128          
   2129          /*********************************************************************
   2130           * @fn      zclSE_ProcessInCmd_LoadControl_LoadControlEvent
   2131           *
   2132           * @brief   Process in the received Load Control Event.
   2133           *
   2134           * @param   pInMsg - pointer to the incoming message
   2135           * @param   pCBs - pointer to the application call back function
   2136           *
   2137           * @return  ZStatus_t - ZFailure @ Unsupported
   2138           *                      ZCL_STATUS_CMD_HAS_RSP @ Supported and do
   2139           *                                           not need default rsp
   2140           */

   \                                 In  segment CODE, align 2, keep-with-next
   2141          static ZStatus_t zclSE_ProcessInCmd_LoadControl_LoadControlEvent( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_LoadControl_LoadControlEvent:
   2142                                                                            zclSE_AppCallbacks_t *pCBs )
   2143          {
   \   000000   3B15         PUSHM.W #0x4, R11
   \   000002   31801A00     SUB.W   #0x1a, SP
   \   000006   0A4C         MOV.W   R12, R10
   \   000008   0B4D         MOV.W   R13, R11
   2144            uint8 status = ZSuccess;
   \   00000A   4843         MOV.B   #0x0, R8
   2145          
   2146            if ( pCBs->pfnLoadControl_LoadControlEvent )
   \   00000C   1F4D3400     MOV.W   0x34(R13), R15
   \   000010   1FDD3600     BIS.W   0x36(R13), R15
   \   000014   0F93         CMP.W   #0x0, R15
   \   000016   5324         JEQ     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_0
   2147            {
   2148              zclCCLoadControlEvent_t cmd;
   2149          
   2150              zclSE_ParseInCmd_LoadControlEvent( &cmd, &(pInMsg->pData[0]), pInMsg->pDataLen );
   \   000018   ........     CALLA   #?Subroutine29
   \                     ??CrossCallReturnLabel_32:
   \   00001C   0C41         MOV.W   SP, R12
   \   00001E   ........     CALLA   #zclSE_ParseInCmd_LoadControlEvent
   2151          
   2152              // Range checking
   2153              if ( cmd.durationInMinutes > MAX_DURATION_IN_MINUTES_SE_LOAD_CONTROL )
   \   000022   7E408500     MOV.B   #0x85, R14
   \   000026   B190A1050C00 CMP.W   #0x5a1, 0xc(SP)
   \   00002C   0128         JNC     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_1
   2154              {
   2155                status = ZCL_STATUS_INVALID_FIELD;
   \   00002E   484E         MOV.B   R14, R8
   2156              }
   2157          
   2158              if ( cmd.criticalityLevel > MAX_CRITICAL_LEVEL_SE_LOAD_CONTROL )
   \                     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_1:
   \   000030   F19010000E00 CMP.B   #0x10, 0xe(SP)
   \   000036   0128         JNC     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_2
   2159              {
   2160                status = ZCL_STATUS_INVALID_FIELD;
   \   000038   484E         MOV.B   R14, R8
   2161              }
   2162          
   2163              if ( cmd. coolingTemperatureSetPoint != SE_OPTIONAL_FIELD_TEMPERATURE_SET_POINT &&
   2164                   cmd. coolingTemperatureSetPoint > MAX_TEMPERATURE_SETPOINT_SE_LOAD_CONTROL )
   \                     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_2:
   \   00003A   1F411200     MOV.W   0x12(SP), R15
   \   00003E   3D400080     MOV.W   #0x8000, R13
   \   000042   0F9D         CMP.W   R13, R15
   \   000044   0224         JEQ     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_3
   \   000046   0128         JNC     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_3
   2165              {
   2166                status = ZCL_STATUS_INVALID_FIELD;
   \   000048   484E         MOV.B   R14, R8
   2167              }
   2168          
   2169              if ( cmd. heatingTemperatureSetPoint != SE_OPTIONAL_FIELD_TEMPERATURE_SET_POINT &&
   2170                   cmd. heatingTemperatureSetPoint > MAX_TEMPERATURE_SETPOINT_SE_LOAD_CONTROL )
   \                     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_3:
   \   00004A   1C411400     MOV.W   0x14(SP), R12
   \   00004E   0C9D         CMP.W   R13, R12
   \   000050   0224         JEQ     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_4
   \   000052   0128         JNC     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_4
   2171              {
   2172                status = ZCL_STATUS_INVALID_FIELD;
   \   000054   484E         MOV.B   R14, R8
   2173              }
   2174          
   2175              if ( cmd.averageLoadAdjustmentPercentage != SE_OPTIONAL_FIELD_INT8 &&
   2176                  (cmd.averageLoadAdjustmentPercentage < MIN_AVERAGE_LOAD_ADJUSTMENT_PERCENTAGE_SE ||
   2177                   cmd.averageLoadAdjustmentPercentage > MAX_AVERAGE_LOAD_ADJUSTMENT_PERCENTAGE_SE ) )
   \                     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_4:
   \   000056   5D411600     MOV.B   0x16(SP), R13
   \   00005A   7D908000     CMP.B   #0x80, R13
   \   00005E   0624         JEQ     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_5
   \   000060   7D506400     ADD.B   #0x64, R13
   \   000064   7D90C900     CMP.B   #0xc9, R13
   \   000068   0128         JNC     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_5
   2178              {
   2179                status = ZCL_STATUS_INVALID_FIELD;
   \   00006A   484E         MOV.B   R14, R8
   2180              }
   2181          
   2182              if ( cmd. dutyCycle != SE_OPTIONAL_FIELD_UINT8 &&
   2183                   cmd. dutyCycle > MAX_DUTY_CYCLE_SE_LOAD_CONTROL )
   \                     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_5:
   \   00006C   5D411700     MOV.B   0x17(SP), R13
   \   000070   7D93         CMP.B   #0xff, R13
   \   000072   0424         JEQ     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_6
   \   000074   7D906500     CMP.B   #0x65, R13
   \   000078   0128         JNC     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_6
   2184              {
   2185                status = ZCL_STATUS_INVALID_FIELD;
   \   00007A   484E         MOV.B   R14, R8
   2186              }
   2187          
   2188              // If any of the four fields is optional, set them all to optional
   2189              if ( cmd.coolingTemperatureOffset == SE_OPTIONAL_FIELD_UINT8 ||
   2190                   cmd.heatingTemperatureOffset == SE_OPTIONAL_FIELD_UINT8 ||
   2191                   cmd.coolingTemperatureSetPoint == SE_OPTIONAL_FIELD_UINT16 ||
   2192                   cmd.heatingTemperatureSetPoint == SE_OPTIONAL_FIELD_UINT16 )
   \                     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_6:
   \   00007C   F1930F00     CMP.B   #0xff, 0xf(SP)
   \   000080   0724         JEQ     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_7
   \   000082   F1931000     CMP.B   #0xff, 0x10(SP)
   \   000086   0424         JEQ     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_7
   \   000088   3F93         CMP.W   #0xffff, R15
   \   00008A   0224         JEQ     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_7
   \   00008C   3C93         CMP.W   #0xffff, R12
   \   00008E   0820         JNE     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_8
   2193              {
   2194                cmd.coolingTemperatureOffset = SE_OPTIONAL_FIELD_UINT8;
   \                     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_7:
   \   000090   F1430F00     MOV.B   #0xff, 0xf(SP)
   2195                cmd.heatingTemperatureOffset = SE_OPTIONAL_FIELD_UINT8;
   \   000094   F1431000     MOV.B   #0xff, 0x10(SP)
   2196                cmd.coolingTemperatureSetPoint = SE_OPTIONAL_FIELD_UINT16;
   \   000098   B1431200     MOV.W   #0xffff, 0x12(SP)
   2197                cmd.heatingTemperatureSetPoint = SE_OPTIONAL_FIELD_UINT16;
   \   00009C   B1431400     MOV.W   #0xffff, 0x14(SP)
   2198              }
   2199          
   2200              pCBs->pfnLoadControl_LoadControlEvent( &cmd, &(pInMsg->msg->srcAddr), status, pInMsg->hdr.transSeqNum );
   \                     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_8:
   \   0000A0   5F4A0600     MOV.B   0x6(R10), R15
   \   0000A4   4E48         MOV.B   R8, R14
   \   0000A6   2D4A         MOV.W   @R10, R13
   \   0000A8   3D500600     ADD.W   #0x6, R13
   \   0000AC   0C41         MOV.W   SP, R12
   \   0000AE   1A4B3400     MOV.W   0x34(R11), R10
   \   0000B2   1B4B3600     MOV.W   0x36(R11), R11
   \   0000B6   ........     CALLA   #?IndCallR11
   2201          
   2202              // The Load Control Event command has response, therefore,
   2203              // inform zclto not to send default response.
   2204              return ZCL_STATUS_CMD_HAS_RSP;
   \   0000BA   7C43         MOV.B   #0xff, R12
   \   0000BC   013C         JMP     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_9
   2205            }
   2206            else
   2207            {
   2208              return ZFailure;  // Not supported
   \                     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_0:
   \   0000BE   5C43         MOV.B   #0x1, R12
   2209            }
   \                     ??zclSE_ProcessInCmd_LoadControl_LoadControlEve_9:
   \   0000C0                REQUIRE ?Subroutine3
   \   0000C0                // Fall through to label ?Subroutine3
   2210          }
   2211          
   2212          /*********************************************************************
   2213           * @fn      zclSE_ProcessInCmd_LoadControl_CancelLoadControlEvent
   2214           *
   2215           * @brief   Process in the received Cancel Load Control Event.
   2216           *
   2217           * @param   pInMsg - pointer to the incoming message
   2218           * @param   pCBs - pointer to the application call back function
   2219           *
   2220           * @return  ZStatus_t - ZFailure @ Unsupported
   2221           *                      ZSuccess @ Supported and send default rsp
   2222           */

   \                                 In  segment CODE, align 2, keep-with-next
   2223          static ZStatus_t zclSE_ProcessInCmd_LoadControl_CancelLoadControlEvent( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_LoadControl_CancelLoadControlEvent:
   2224                                                                                   zclSE_AppCallbacks_t *pCBs )
   2225          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   31800E00     SUB.W   #0xe, SP
   \   000006   0A4C         MOV.W   R12, R10
   \   000008   0B4D         MOV.W   R13, R11
   2226            if ( pCBs->pfnLoadControl_CancelLoadControlEvent )
   \   00000A   1F4D3800     MOV.W   0x38(R13), R15
   \   00000E   1FDD3A00     BIS.W   0x3a(R13), R15
   \   000012   0F93         CMP.W   #0x0, R15
   \   000014   0F24         JEQ     ??zclSE_ProcessInCmd_LoadControl_CancelLoadCont_0
   2227            {
   2228              zclCCCancelLoadControlEvent_t cmd;
   2229          
   2230              zclSE_ParseInCmd_CancelLoadControlEvent( &cmd, &(pInMsg->pData[0]), pInMsg->pDataLen );
   \   000016   ........     CALLA   #?Subroutine29
   \                     ??CrossCallReturnLabel_31:
   \   00001A   0C41         MOV.W   SP, R12
   \   00001C   ........     CALLA   #zclSE_ParseInCmd_CancelLoadControlEvent
   2231          
   2232              pCBs->pfnLoadControl_CancelLoadControlEvent( &cmd, &(pInMsg->msg->srcAddr), pInMsg->hdr.transSeqNum );
   \   000020   ........     CALLA   #?Subroutine54
   2233              return ZSuccess;
   2234            }
   \                     ??CrossCallReturnLabel_113:
   \   000024   0C41         MOV.W   SP, R12
   \   000026   1A4B3800     MOV.W   0x38(R11), R10
   \   00002A   1B4B3A00     MOV.W   0x3a(R11), R11
   \   00002E   ........     CALLA   #?Subroutine30
   \                     ??CrossCallReturnLabel_38:
   \   000032   013C         JMP     ??zclSE_ProcessInCmd_LoadControl_CancelLoadCont_1
   2235            else
   2236            {
   2237              return ZFailure;
   \                     ??zclSE_ProcessInCmd_LoadControl_CancelLoadCont_0:
   \   000034   5C43         MOV.B   #0x1, R12
   \                     ??zclSE_ProcessInCmd_LoadControl_CancelLoadCont_1:
   \   000036   31500E00     ADD.W   #0xe, SP
   \   00003A   1A17         POPM.W  #0x2, R11
   \   00003C   1001         RETA
   2238            }
   2239          }
   2240          
   2241          /*********************************************************************
   2242           * @fn      zclSE_ProcessInCmd_LoadControl_CancelAllLoadControlEvent
   2243           *
   2244           * @brief   Process in the received Cancel All Load Control Event.
   2245           *
   2246           * @param   pInMsg - pointer to the incoming message
   2247           * @param   pCBs - pointer to the application call back function
   2248           *
   2249           * @return  ZStatus_t - ZFailure @ Unsupported
   2250           *                      ZSuccess @ Supported and send default rsp
   2251           */
   2252          static ZStatus_t zclSE_ProcessInCmd_LoadControl_CancelAllLoadControlEvents( zclIncoming_t *pInMsg,
   2253                                                                                       zclSE_AppCallbacks_t *pCBs )
   2254          {
   2255            if ( pCBs->pfnLoadControl_CancelAllLoadControlEvents )
   2256            {
   2257              zclCCCancelAllLoadControlEvents_t cmd;
   2258          
   2259              cmd.cancelControl = pInMsg->pData[0];
   2260          
   2261              pCBs->pfnLoadControl_CancelAllLoadControlEvents( &cmd, &(pInMsg->msg->srcAddr), pInMsg->hdr.transSeqNum );
   2262              return ZSuccess;
   2263            }
   2264            else
   2265            {
   2266              return ZFailure;
   2267            }
   2268          }
   2269          
   2270          /*********************************************************************
   2271           * @fn      zclSE_ProcessInCmd_LoadControl_ReportEventStatus
   2272           *
   2273           * @brief   Process in the received Load Control Event.
   2274           *
   2275           * @param   pInMsg - pointer to the incoming message
   2276           * @param   pCBs - pointer to the application call back function
   2277           *
   2278           * @return  ZStatus_t - ZFailure @ Unsupported
   2279           *                      ZSuccess @ Supported and send default rsp
   2280           *                      ZCL_STATUS_INVALID_FIELD @ Range checking
   2281           *                                           failure
   2282           */

   \                                 In  segment CODE, align 2, keep-with-next
   2283          static ZStatus_t zclSE_ProcessInCmd_LoadControl_ReportEventStatus( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_LoadControl_ReportEventStatus:
   2284                                                                              zclSE_AppCallbacks_t *pCBs )
   2285          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   31803C00     SUB.W   #0x3c, SP
   \   000006   0A4C         MOV.W   R12, R10
   \   000008   0B4D         MOV.W   R13, R11
   2286            if ( pCBs->pfnLoadControl_ReportEventStatus )
   \   00000A   1F4D4000     MOV.W   0x40(R13), R15
   \   00000E   1FDD4200     BIS.W   0x42(R13), R15
   \   000012   0F93         CMP.W   #0x0, R15
   \   000014   3C24         JEQ     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_0
   2287            {
   2288          
   2289              zclCCReportEventStatus_t cmd;
   2290          
   2291              zclSE_ParseInCmd_ReportEventStatus( &cmd, &(pInMsg->pData[0]), pInMsg->pDataLen );
   \   000016   ........     CALLA   #?Subroutine29
   \                     ??CrossCallReturnLabel_30:
   \   00001A   0C41         MOV.W   SP, R12
   \   00001C   ........     CALLA   #zclSE_ParseInCmd_ReportEventStatus
   2292          
   2293              // Range Checking
   2294              if ( cmd.eventStatus != EVENT_STATUS_LOAD_CONTROL_EVENT_REJECTED &&
   2295                  (cmd.eventStatus == 0 ||
   2296                   cmd.eventStatus > EVENT_STATUS_LOAD_CONTROL_EVENT_SUPERSEDED ) )
   \   000020   5E410800     MOV.B   0x8(SP), R14
   \   000024   7E90FE00     CMP.B   #0xfe, R14
   \   000028   0424         JEQ     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_1
   \   00002A   4E93         CMP.B   #0x0, R14
   \   00002C   2324         JEQ     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_2
   \   00002E   7E92         CMP.B   #0x8, R14
   \   000030   212C         JC      ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_2
   2297              {
   2298                return ZCL_STATUS_INVALID_FIELD;
   2299              }
   2300          
   2301              if ( cmd.criticalityLevelApplied > MAX_CRITICAL_LEVEL_SE_LOAD_CONTROL )
   \                     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_1:
   \   000032   F19010000900 CMP.B   #0x10, 0x9(SP)
   \   000038   1D2C         JC      ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_2
   2302              {
   2303                return ZCL_STATUS_INVALID_FIELD;
   2304              }
   2305          
   2306              if ( cmd.coolingTemperatureSetPointApplied != SE_OPTIONAL_FIELD_TEMPERATURE_SET_POINT &&
   2307                   cmd.coolingTemperatureSetPointApplied > MAX_TEMPERATURE_SETPOINT_SE_LOAD_CONTROL )
   \   00003A   1F410A00     MOV.W   0xa(SP), R15
   \   00003E   3E400080     MOV.W   #0x8000, R14
   \   000042   0F9E         CMP.W   R14, R15
   \   000044   0124         JEQ     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_3
   \   000046   162C         JC      ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_2
   2308              {
   2309                return ZCL_STATUS_INVALID_FIELD;
   2310              }
   2311          
   2312              if ( cmd.heatingTemperatureSetPointApplied != SE_OPTIONAL_FIELD_TEMPERATURE_SET_POINT &&
   2313                   cmd.heatingTemperatureSetPointApplied > MAX_TEMPERATURE_SETPOINT_SE_LOAD_CONTROL )
   \                     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_3:
   \   000048   1F410C00     MOV.W   0xc(SP), R15
   \   00004C   0F9E         CMP.W   R14, R15
   \   00004E   0124         JEQ     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_4
   \   000050   112C         JC      ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_2
   2314              {
   2315                return ZCL_STATUS_INVALID_FIELD;
   2316              }
   2317          
   2318              if ( cmd.averageLoadAdjustment != SE_OPTIONAL_FIELD_INT8 &&
   2319                  (cmd.averageLoadAdjustment < MIN_AVERAGE_LOAD_ADJUSTMENT_PERCENTAGE_SE ||
   2320                   cmd.averageLoadAdjustment > MAX_AVERAGE_LOAD_ADJUSTMENT_PERCENTAGE_SE ) )
   \                     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_4:
   \   000052   5E410E00     MOV.B   0xe(SP), R14
   \   000056   7E908000     CMP.B   #0x80, R14
   \   00005A   0524         JEQ     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_5
   \   00005C   7E506400     ADD.B   #0x64, R14
   \   000060   7E90C900     CMP.B   #0xc9, R14
   \   000064   072C         JC      ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_2
   2321              {
   2322                return ZCL_STATUS_INVALID_FIELD;
   2323              }
   2324          
   2325              if ( cmd.dutyCycleApplied != SE_OPTIONAL_FIELD_UINT8 &&
   2326                   cmd.dutyCycleApplied > MAX_DUTY_CYCLE_SE_LOAD_CONTROL )
   \                     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_5:
   \   000066   5E410F00     MOV.B   0xf(SP), R14
   \   00006A   7E93         CMP.B   #0xff, R14
   \   00006C   0624         JEQ     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_6
   \   00006E   7E906500     CMP.B   #0x65, R14
   \   000072   0328         JNC     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_6
   2327              {
   2328                return ZCL_STATUS_INVALID_FIELD;
   \                     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_2:
   \   000074   7C408500     MOV.B   #0x85, R12
   \   000078   0B3C         JMP     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_7
   2329              }
   2330          
   2331              pCBs->pfnLoadControl_ReportEventStatus( &cmd, &(pInMsg->msg->srcAddr), pInMsg->hdr.transSeqNum );
   \                     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_6:
   \   00007A   ........     CALLA   #?Subroutine54
   2332          
   2333              return ZSuccess;
   2334            }
   \                     ??CrossCallReturnLabel_112:
   \   00007E   0C41         MOV.W   SP, R12
   \   000080   1A4B4000     MOV.W   0x40(R11), R10
   \   000084   1B4B4200     MOV.W   0x42(R11), R11
   \   000088   ........     CALLA   #?Subroutine30
   \                     ??CrossCallReturnLabel_37:
   \   00008C   013C         JMP     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_7
   2335            else
   2336            {
   2337              return ZFailure;
   \                     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_0:
   \   00008E   5C43         MOV.B   #0x1, R12
   \                     ??zclSE_ProcessInCmd_LoadControl_ReportEventSta_7:
   \   000090   31503C00     ADD.W   #0x3c, SP
   \   000094   1A17         POPM.W  #0x2, R11
   \   000096   1001         RETA
   2338            }
   2339          }
   2340          
   2341          /*********************************************************************
   2342           * @fn      zclSE_ProcessInCmd_LoadControl_GetScheduledEvents
   2343           *
   2344           * @brief   Process in the received Get Scheduled Event.
   2345           *
   2346           * @param   pInMsg - pointer to the incoming message
   2347           * @param   pCBs - pointer to the application call back function
   2348           *
   2349           * @return  ZStatus_t - ZFailure @ Unsupported
   2350           *                      ZSuccess @ Supported and send default rsp
   2351           */

   \                                 In  segment CODE, align 2, keep-with-next
   2352          static ZStatus_t zclSE_ProcessInCmd_LoadControl_GetScheduledEvents( zclIncoming_t *pInMsg,
   \                     zclSE_ProcessInCmd_LoadControl_GetScheduledEvents:
   2353                                                                              zclSE_AppCallbacks_t *pCBs )
   2354          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   31800600     SUB.W   #0x6, SP
   \   000006   0A4C         MOV.W   R12, R10
   \   000008   0B4D         MOV.W   R13, R11
   2355            if ( pCBs->pfnLoadControl_GetScheduledEvents )
   \   00000A   1F4D4400     MOV.W   0x44(R13), R15
   \   00000E   1FDD4600     BIS.W   0x46(R13), R15
   \   000012   0F93         CMP.W   #0x0, R15
   \   000014   0A24         JEQ     ??zclSE_ProcessInCmd_LoadControl_GetScheduledEv_0
   2356            {
   2357              zclCCGetScheduledEvent_t cmd;
   2358          
   2359              cmd.startTime = osal_build_uint32( pInMsg->pData, 4);
   \   000016   ........     CALLA   #?Subroutine8
   2360              cmd.numEvents = pInMsg->pData[4];
   2361          
   2362              pCBs->pfnLoadControl_GetScheduledEvents( &cmd, &(pInMsg->msg->srcAddr), pInMsg->hdr.transSeqNum );
   2363              return ZSuccess;
   2364            }
   \                     ??CrossCallReturnLabel_109:
   \   00001A   0C41         MOV.W   SP, R12
   \   00001C   1A4B4400     MOV.W   0x44(R11), R10
   \   000020   1B4B4600     MOV.W   0x46(R11), R11
   \   000024   ........     CALLA   #?Subroutine30
   \                     ??CrossCallReturnLabel_36:
   \   000028   013C         JMP     ??zclSE_ProcessInCmd_LoadControl_GetScheduledEv_1
   2365            else
   2366            {
   2367              return ZFailure;
   \                     ??zclSE_ProcessInCmd_LoadControl_GetScheduledEv_0:
   \   00002A   5C43         MOV.B   #0x1, R12
   2368            }
   \                     ??zclSE_ProcessInCmd_LoadControl_GetScheduledEv_1:
   \   00002C   ........     BRA     #?Subroutine2
   2369          }
   2370          
   2371          #endif  // ZCL_LOAD_CONTROL
   2372          
   2373          #ifdef ZCL_PREPAYMENT
   2374          /*********************************************************************
   2375           * @fn      zclSE_ProcessInPrepaymentCmds
   2376           *
   2377           * @brief   Callback from ZCL to process incoming Commands specific
   2378           *          to this cluster library on a command ID basis
   2379           *
   2380           * @param   pInMsg - pointer to the incoming message
   2381           * @param   pCBs - pointer to the application call back function
   2382           *
   2383           * @return  ZStatus_t
   2384           */
   2385          static ZStatus_t zclSE_ProcessInPrepaymentCmds( zclIncoming_t *pInMsg,
   2386                                                          zclSE_AppCallbacks_t *pCBs )
   2387          {
   2388            ZStatus_t stat;
   2389          
   2390            if ( zcl_ServerCmd( pInMsg->hdr.fc.direction ) )
   2391            {
   2392              // Process Client commands, received by server
   2393              switch ( pInMsg->hdr.commandID )
   2394              {
   2395                case COMMAND_SE_SEL_AVAIL_EMERGENCY_CREDIT:
   2396                  stat = zclSE_ProcessInCmd_Prepayment_SelAvailEmergencyCredit( pInMsg, pCBs );
   2397                  break;
   2398          
   2399                case COMMAND_SE_CHANGE_SUPPLY:
   2400                  stat = zclSE_ProcessInCmd_Prepayment_ChangeSupply( pInMsg, pCBs );
   2401                  break;
   2402          
   2403                default:
   2404                  stat = ZFailure;
   2405                  break;
   2406              }
   2407            }
   2408            else
   2409            {
   2410              // Process Server commands, received by client
   2411              switch ( pInMsg->hdr.commandID )
   2412              {
   2413                case COMMAND_SE_SUPPLY_STATUS_RESPONSE:
   2414                  stat = zclSE_ProcessInCmd_Prepayment_SupplyStatusResponse( pInMsg, pCBs );
   2415                  break;
   2416          
   2417                default:
   2418                  stat = ZFailure;
   2419                  break;
   2420              }
   2421            }
   2422          
   2423            return ( stat );
   2424          }
   2425          
   2426          /*********************************************************************
   2427           * @fn      zclSE_ProcessInCmd_Prepayment_SelAvailEmergencyCredit
   2428           *
   2429           * @brief   Callback from ZCL to process incoming - Select Available Emergency
   2430           *          Credit Command
   2431           *
   2432           * @param   pInMsg - pointer to the incoming message
   2433           * @param   pCBs - pointer to the application call back function
   2434           *
   2435           * @return  ZStatus_t - ZFailure @ Unsupported
   2436           *                      ZSuccess @ Supported and send default rsp
   2437           *                      ZCL_STATUS_SOFTWARE_FAILURE @ ZStack memory allocation failure
   2438           */
   2439          static ZStatus_t zclSE_ProcessInCmd_Prepayment_SelAvailEmergencyCredit( zclIncoming_t *pInMsg,
   2440                                                                              zclSE_AppCallbacks_t *pCBs )
   2441          {
   2442            if ( pCBs->pfnPrepayment_SelAvailEmergencyCredit )
   2443            {
   2444              zclCCSelAvailEmergencyCredit_t cmd;
   2445          
   2446              // Parse the command and do range check
   2447              if ( zclSE_ParseInCmd_SelAvailEmergencyCredit( &cmd, &(pInMsg->pData[0]),
   2448                                                                  pInMsg->pDataLen ) == ZSuccess )
   2449              {
   2450                // Callback to process message
   2451                pCBs->pfnPrepayment_SelAvailEmergencyCredit( &cmd, &(pInMsg->msg->srcAddr),
   2452                                                             pInMsg->hdr.transSeqNum );
   2453          
   2454                // Free the memory allocated in zclSE_ParseInCmd_SelAvailEmergencyCredit()
   2455                if ( cmd.siteId.pStr != NULL )
   2456                {
   2457                  osal_mem_free( cmd.siteId.pStr );
   2458                }
   2459          
   2460                if ( cmd.meterSerialNumber.pStr != NULL )
   2461                {
   2462                  osal_mem_free( cmd.meterSerialNumber.pStr );
   2463                }
   2464          
   2465                return ZSuccess;
   2466              }
   2467              else
   2468              {
   2469                return ZCL_STATUS_SOFTWARE_FAILURE;
   2470              }
   2471          
   2472            }
   2473            else
   2474            {
   2475              return ZFailure;
   2476            }
   2477          }
   2478          
   2479          /*********************************************************************
   2480           * @fn      zclSE_ProcessInCmd_Prepayment_ChangeSupply
   2481           *
   2482           * @brief   Callback from ZCL to process incoming - Change Supply Command
   2483           *
   2484           * @param   pInMsg - pointer to the incoming message
   2485           * @param   pCBs - pointer to the application call back function
   2486           *
   2487           * @return  ZStatus_t - ZFailure @ Unsupported
   2488           *                      ZCL_STATUS_CMD_HAS_RSP @ Supported and do
   2489           *                                           not need default rsp
   2490           *                      ZCL_STATUS_SOFTWARE_FAILURE @ ZStack memory allocation failure
   2491           */
   2492          static ZStatus_t zclSE_ProcessInCmd_Prepayment_ChangeSupply( zclIncoming_t *pInMsg,
   2493                                                                       zclSE_AppCallbacks_t *pCBs )
   2494          {
   2495            if ( pCBs->pfnPrepayment_ChangeSupply )
   2496            {
   2497              zclCCChangeSupply_t cmd;
   2498          
   2499              // Parse the command and do range check
   2500              if ( zclSE_ParseInCmd_ChangeSupply( &cmd, &(pInMsg->pData[0]),
   2501                                                          pInMsg->pDataLen ) == ZSuccess )
   2502              {
   2503                // Callback to process message
   2504                pCBs->pfnPrepayment_ChangeSupply( &cmd, &(pInMsg->msg->srcAddr), pInMsg->hdr.transSeqNum );
   2505          
   2506                // Free the memory allocated in zclSE_ParseInCmd_ChangeSupply()
   2507                if ( cmd.siteId.pStr != NULL )
   2508                {
   2509                  osal_mem_free( cmd.siteId.pStr );
   2510                }
   2511          
   2512                if ( cmd.meterSerialNumber.pStr != NULL )
   2513                {
   2514                  osal_mem_free( cmd.meterSerialNumber.pStr );
   2515                }
   2516          
   2517                return ZCL_STATUS_CMD_HAS_RSP;
   2518              }
   2519              else
   2520              {
   2521                return ZCL_STATUS_SOFTWARE_FAILURE;
   2522              }
   2523            }
   2524            else
   2525            {
   2526              return ZFailure;
   2527            }
   2528          }
   2529          
   2530          /*********************************************************************
   2531           * @fn      zclSE_ProcessInCmd_Prepayment_SupplyStatusResponse
   2532           *
   2533           * @brief   Callback from ZCL to process incoming - Supply Status Response Command
   2534           *
   2535           * @param   pInMsg - pointer to the incoming message
   2536           * @param   pCBs - pointer to the application call back function
   2537           *
   2538           * @return  ZStatus_t - ZFailure @ Unsupported
   2539           *                      ZSuccess @ Supported and send default rsp
   2540           */
   2541          static ZStatus_t zclSE_ProcessInCmd_Prepayment_SupplyStatusResponse( zclIncoming_t *pInMsg,
   2542                                                                              zclSE_AppCallbacks_t *pCBs )
   2543          {
   2544            if ( pCBs->pfnPrepayment_SupplyStatusResponse )
   2545            {
   2546              zclCCSupplyStatusResponse_t cmd;
   2547          
   2548              cmd.providerId = osal_build_uint32( pInMsg->pData, 4);
   2549              cmd.implementationDateTime = osal_build_uint32( &pInMsg->pData[4], 4);
   2550              cmd.supplyStatus = pInMsg->pData[8];
   2551          
   2552              pCBs->pfnPrepayment_SupplyStatusResponse( &cmd, &(pInMsg->msg->srcAddr), pInMsg->hdr.transSeqNum );
   2553          
   2554              return ZSuccess;
   2555            }
   2556            else
   2557            {
   2558              return ZFailure;
   2559            }
   2560          }
   2561          #endif // ZCL_PREPAYMENT
   2562          
   2563          #ifdef ZCL_PRICING
   2564          /*********************************************************************
   2565           * @fn      zclSE_ParseInCmd_PublishPrice
   2566           *
   2567           * @brief   Parse received Publish Price Command.
   2568           *
   2569           * @param   cmd - pointer to the output data struct
   2570           * @param   buf - pointer to the input data buffer
   2571           * @param   len - length of the input buffer
   2572           *
   2573           * @return  ZStatus_t - ZSuccess or ZMemError due to memory allocation failure
   2574           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine55:
   \   000000                RPT     #0x8
   \   000000   47180F5F     RLAX.W  R15
   \   000004   0E5F         ADD.W   R15, R14
   \   000006   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   2575          ZStatus_t zclSE_ParseInCmd_PublishPrice( zclCCPublishPrice_t *cmd, uint8 *buf, uint8 len )
   \                     zclSE_ParseInCmd_PublishPrice:
   2576          {
   \   000000   5B15         PUSHM.W #0x6, R11
   \   000002   0B4C         MOV.W   R12, R11
   \   000004   084D         MOV.W   R13, R8
   \   000006   4A4E         MOV.B   R14, R10
   \   000008   ........     CALLA   #?Subroutine10
   \                     ??CrossCallReturnLabel_8:
   \   00000C   8B4C0000     MOV.W   R12, 0(R11)
   \   000010   8B4D0200     MOV.W   R13, 0x2(R11)
   \   000014   2852         ADD.W   #0x4, R8
   2577            uint8 originalLen; // stores octet string original length
   2578          
   2579            // Parse the command buffer
   2580            cmd->providerId = osal_build_uint32( buf, 4 );
   2581            buf += 4;
   2582          
   2583            // Notice that rate label is a variable length UTF-8 string
   2584            cmd->rateLabel.strLen = *buf++;
   \   000016   7E48         MOV.B   @R8+, R14
   2585            if ( cmd->rateLabel.strLen == SE_OPTIONAL_FIELD_UINT8 )
   \   000018   7E93         CMP.B   #0xff, R14
   \   00001A   0120         JNE     ??zclSE_ParseInCmd_PublishPrice_0
   2586            {
   2587              // If character count is 0xFF, set string length to 0
   2588              cmd->rateLabel.strLen = 0;
   \   00001C   4E43         MOV.B   #0x0, R14
   \                     ??zclSE_ParseInCmd_PublishPrice_0:
   \   00001E   CB4E0400     MOV.B   R14, 0x4(R11)
   2589            }
   2590          
   2591            if ( cmd->rateLabel.strLen != 0 )
   \   000022   094B         MOV.W   R11, R9
   \   000024   2952         ADD.W   #0x4, R9
   \   000026   4E93         CMP.B   #0x0, R14
   \   000028   1724         JEQ     ??zclSE_ParseInCmd_PublishPrice_1
   2592            {
   2593              originalLen = cmd->rateLabel.strLen; //save original length
   \   00002A   464E         MOV.B   R14, R6
   2594          
   2595              // truncate rate label to maximum size
   2596              if ( cmd->rateLabel.strLen > (SE_RATE_LABEL_LEN-1) )
   \   00002C   7E900D00     CMP.B   #0xd, R14
   \   000030   0328         JNC     ??zclSE_ParseInCmd_PublishPrice_2
   2597              {
   2598                cmd->rateLabel.strLen = (SE_RATE_LABEL_LEN-1);
   \   000032   FB400C000400 MOV.B   #0xc, 0x4(R11)
   2599              }
   2600          
   2601              cmd->rateLabel.pStr = osal_mem_alloc( cmd->rateLabel.strLen );
   \                     ??zclSE_ParseInCmd_PublishPrice_2:
   \   000038   6C49         MOV.B   @R9, R12
   \   00003A   ........     CALLA   #osal_mem_alloc
   \   00003E   8B4C0600     MOV.W   R12, 0x6(R11)
   2602              if ( cmd->rateLabel.pStr == NULL )
   \   000042   0C93         CMP.W   #0x0, R12
   \   000044   0320         JNE     ??zclSE_ParseInCmd_PublishPrice_3
   2603              {
   2604                return ZMemError;
   \   000046   7C401000     MOV.B   #0x10, R12
   \   00004A   613C         JMP     ??zclSE_ParseInCmd_PublishPrice_4
   2605              }
   2606              osal_memcpy( cmd->rateLabel.pStr, buf, cmd->rateLabel.strLen );
   \                     ??zclSE_ParseInCmd_PublishPrice_3:
   \   00004C   6E49         MOV.B   @R9, R14
   \   00004E   0D48         MOV.W   R8, R13
   \   000050   ........     CALLA   #osal_memcpy
   2607              buf += originalLen; // move pointer original length of received string
   \   000054   0856         ADD.W   R6, R8
   \   000056   023C         JMP     ??zclSE_ParseInCmd_PublishPrice_5
   2608            }
   2609            else
   2610            {
   2611              cmd->rateLabel.pStr = NULL;
   \                     ??zclSE_ParseInCmd_PublishPrice_1:
   \   000058   8B430600     MOV.W   #0x0, 0x6(R11)
   2612            }
   2613          
   2614            cmd->issuerEventId = osal_build_uint32( buf, 4 );
   \                     ??zclSE_ParseInCmd_PublishPrice_5:
   \   00005C   ........     CALLA   #?Subroutine10
   \                     ??CrossCallReturnLabel_7:
   \   000060   8B4C0800     MOV.W   R12, 0x8(R11)
   \   000064   8B4D0A00     MOV.W   R13, 0xa(R11)
   2615            buf += 4;
   \   000068   2852         ADD.W   #0x4, R8
   2616          
   2617            cmd->currentTime = osal_build_uint32( buf, 4 );
   \   00006A   ........     CALLA   #?Subroutine10
   \                     ??CrossCallReturnLabel_6:
   \   00006E   8B4C0C00     MOV.W   R12, 0xc(R11)
   \   000072   8B4D0E00     MOV.W   R13, 0xe(R11)
   2618            buf += 4;
   \   000076   2852         ADD.W   #0x4, R8
   2619          
   2620            cmd->unitOfMeasure = *buf++;
   \   000078   FB481000     MOV.B   @R8+, 0x10(R11)
   2621            cmd->currency = BUILD_UINT16( buf[0], buf[1] );
   \   00007C   ........     CALLA   #?Subroutine28
   \                     ??CrossCallReturnLabel_88:
   \   000080   8B4E1200     MOV.W   R14, 0x12(R11)
   2622            buf += 2;
   \   000084   2853         ADD.W   #0x2, R8
   2623          
   2624            cmd->priceTrailingDigit = *buf++;
   \   000086   FB481400     MOV.B   @R8+, 0x14(R11)
   2625            cmd->numberOfPriceTiers = *buf++;
   \   00008A   FB481500     MOV.B   @R8+, 0x15(R11)
   2626            cmd->startTime = osal_build_uint32( buf, 4 );
   \   00008E   ........     CALLA   #?Subroutine10
   \                     ??CrossCallReturnLabel_5:
   \   000092   8B4C1600     MOV.W   R12, 0x16(R11)
   \   000096   8B4D1800     MOV.W   R13, 0x18(R11)
   2627            buf += 4;
   \   00009A   2852         ADD.W   #0x4, R8
   2628          
   2629            cmd->durationInMinutes = BUILD_UINT16( buf[0], buf[1] );
   \   00009C   ........     CALLA   #?Subroutine28
   \                     ??CrossCallReturnLabel_89:
   \   0000A0   8B4E1A00     MOV.W   R14, 0x1a(R11)
   2630            buf += 2;
   \   0000A4   2853         ADD.W   #0x2, R8
   2631          
   2632            cmd->price = osal_build_uint32( buf, 4 );
   \   0000A6   ........     CALLA   #?Subroutine10
   \                     ??CrossCallReturnLabel_4:
   \   0000AA   8B4C1C00     MOV.W   R12, 0x1c(R11)
   \   0000AE   8B4D1E00     MOV.W   R13, 0x1e(R11)
   2633            buf += 4;
   \   0000B2   2852         ADD.W   #0x4, R8
   2634          
   2635            cmd->priceRatio = *buf++;
   \   0000B4   FB482000     MOV.B   @R8+, 0x20(R11)
   2636            cmd->generationPrice = osal_build_uint32( buf, 4 );
   \   0000B8   ........     CALLA   #?Subroutine10
   \                     ??CrossCallReturnLabel_3:
   \   0000BC   8B4C2200     MOV.W   R12, 0x22(R11)
   \   0000C0   8B4D2400     MOV.W   R13, 0x24(R11)
   2637            buf += 4;
   \   0000C4   2852         ADD.W   #0x4, R8
   2638          
   2639            cmd->generationPriceRatio = *buf++;
   \   0000C6   FB482600     MOV.B   @R8+, 0x26(R11)
   2640          
   2641            // SE 1.1 fields
   2642            if ((len - cmd->rateLabel.strLen) > PACKET_LEN_SE_PUBLISH_PRICE_SE_1_0)
   \   0000CA   6F49         MOV.B   @R9, R15
   \   0000CC   0A8F         SUB.W   R15, R10
   \   0000CE   3A902300     CMP.W   #0x23, R10
   \   0000D2   0F38         JL      ??zclSE_ParseInCmd_PublishPrice_6
   2643            {
   2644              cmd->alternateCostDelivered = osal_build_uint32( buf, 4 );
   \   0000D4   ........     CALLA   #?Subroutine10
   \                     ??CrossCallReturnLabel_2:
   \   0000D8   8B4C2800     MOV.W   R12, 0x28(R11)
   \   0000DC   8B4D2A00     MOV.W   R13, 0x2a(R11)
   2645              buf += 4;
   \   0000E0   2852         ADD.W   #0x4, R8
   2646          
   2647              cmd->alternateCostUnit = *buf++;
   \   0000E2   FB482C00     MOV.B   @R8+, 0x2c(R11)
   2648          
   2649              cmd->alternateCostTrailingDigit = *buf++;
   \   0000E6   FB482D00     MOV.B   @R8+, 0x2d(R11)
   2650          
   2651              cmd->numberOfBlockThresholds = *buf++;
   \   0000EA   FB482E00     MOV.B   @R8+, 0x2e(R11)
   2652          
   2653              cmd->priceControl = *buf;
   \   0000EE   6E48         MOV.B   @R8, R14
   \   0000F0   0B3C         JMP     ??zclSE_ParseInCmd_PublishPrice_7
   2654            }
   2655            else
   2656            {
   2657              // for backwards compatibility with SE 1.0
   2658              cmd->alternateCostDelivered = SE_OPTIONAL_FIELD_UINT32;
   \                     ??zclSE_ParseInCmd_PublishPrice_6:
   \   0000F2   BB432800     MOV.W   #0xffff, 0x28(R11)
   \   0000F6   BB432A00     MOV.W   #0xffff, 0x2a(R11)
   2659              cmd->alternateCostUnit = SE_OPTIONAL_FIELD_UINT8;
   \   0000FA   FB432C00     MOV.B   #0xff, 0x2c(R11)
   2660              cmd->alternateCostTrailingDigit = SE_OPTIONAL_FIELD_UINT8;
   \   0000FE   FB432D00     MOV.B   #0xff, 0x2d(R11)
   2661              cmd->numberOfBlockThresholds = SE_OPTIONAL_FIELD_UINT8;
   \   000102   FB432E00     MOV.B   #0xff, 0x2e(R11)
   2662              cmd->priceControl = SE_OPTIONAL_FIELD_UINT8;
   \   000106   7E43         MOV.B   #0xff, R14
   \                     ??zclSE_ParseInCmd_PublishPrice_7:
   \   000108   CB4E2F00     MOV.B   R14, 0x2f(R11)
   2663            }
   2664          
   2665            return ZSuccess;
   \   00010C   4C43         MOV.B   #0x0, R12
   \                     ??zclSE_ParseInCmd_PublishPrice_4:
   \   00010E   5617         POPM.W  #0x6, R11
   \   000110   1001         RETA
   2666          }

   \                                 In  segment CODE, align 2
   \                     ?Subroutine28:
   \   000000   6E48         MOV.B   @R8, R14
   \   000002   5F480100     MOV.B   0x1(R8), R15
   \   000006   ....         JMP     ?Subroutine55
   \   000008   0343         NOP

   \                                 In  segment CODE, align 2
   \                     ?Subroutine10:
   \   000000   6D42         MOV.B   #0x4, R13
   \   000002   0C48         MOV.W   R8, R12
   \   000004   ........     BRA     #osal_build_uint32
   2667          
   2668          /*********************************************************************
   2669           * @fn      zclSE_ParseInCmd_PublishBlockPeriod
   2670           *
   2671           * @brief   Parse received Publish Block Period Command.
   2672           *
   2673           * @param   cmd - pointer to the output data struct
   2674           * @param   buf - pointer to the input data buffer
   2675           * @param   len - length of the input buffer
   2676           *
   2677           * @return  ZStatus_t - ZSuccess
   2678           */

   \                                 In  segment CODE, align 2, keep-with-next
   2679          ZStatus_t zclSE_ParseInCmd_PublishBlockPeriod( zclCCPublishBlockPeriod_t *cmd,
   \                     zclSE_ParseInCmd_PublishBlockPeriod:
   2680                                                         uint8 *buf, uint8 len )
   2681          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   ........     CALLA   #?Subroutine44
   2682            (void)len;  // Intentionally unreferenced parameter
   2683          
   2684            // Parse the command buffer
   2685            cmd->providerId = osal_build_uint32( buf, 4 );
   2686            buf += 4;
   2687          
   2688            cmd->issuerEventId = osal_build_uint32( buf, 4 );
   \                     ??CrossCallReturnLabel_75:
   \   000006   ........     CALLA   #?Subroutine13
   2689            buf += 4;
   2690          
   2691            cmd->blockPeriodStartTime = osal_build_uint32( buf, 4 );
   \                     ??CrossCallReturnLabel_12:
   \   00000A   ........     CALLA   #?Subroutine14
   2692            buf += 4;
   2693          
   2694            cmd->blockPeriodDurInMins = osal_build_uint32( buf, 3 );
   \                     ??CrossCallReturnLabel_14:
   \   00000E   ........     CALLA   #?Subroutine49
   \                     ??CrossCallReturnLabel_82:
   \   000012   8A4C0C00     MOV.W   R12, 0xc(R10)
   \   000016   8A4D0E00     MOV.W   R13, 0xe(R10)
   2695            buf += 3;
   \   00001A   3B500300     ADD.W   #0x3, R11
   2696          
   2697            cmd->numPriceTiersAndBlock = *buf++;
   \   00001E   FA4B1000     MOV.B   @R11+, 0x10(R10)
   2698          
   2699            cmd->blockPeriodControl = *buf;
   \   000022   EA4B1100     MOV.B   @R11, 0x11(R10)
   2700          
   2701            return ZSuccess;
   \   000026   4C43         MOV.B   #0x0, R12
   \   000028   1A17         POPM.W  #0x2, R11
   \   00002A   1001         RETA
   2702          }

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine49:
   \   000000   7D400300     MOV.B   #0x3, R13
   \   000004   ........     BRA     #??Subroutine53_0

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine14:
   \   000000   ........     CALLA   #?Subroutine53
   \                     ??CrossCallReturnLabel_103:
   \   000004   8A4C0800     MOV.W   R12, 0x8(R10)
   \   000008   8A4D0A00     MOV.W   R13, 0xa(R10)
   \   00000C   2B52         ADD.W   #0x4, R11
   \   00000E   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine53:
   \   000000   6D42         MOV.B   #0x4, R13
   \   000002                REQUIRE ??Subroutine53_0
   \   000002                // Fall through to label ??Subroutine53_0

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ??Subroutine53_0:
   \   000000   0C4B         MOV.W   R11, R12
   \   000002   ........     BRA     #osal_build_uint32

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine13:
   \   000000   ........     CALLA   #?Subroutine53
   \                     ??CrossCallReturnLabel_104:
   \   000004   8A4C0400     MOV.W   R12, 0x4(R10)
   \   000008   8A4D0600     MOV.W   R13, 0x6(R10)
   \   00000C   2B52         ADD.W   #0x4, R11
   \   00000E   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine44:
   \   000000   0A4C         MOV.W   R12, R10
   \   000002   0B4D         MOV.W   R13, R11
   \   000004   ........     CALLA   #?Subroutine53
   \                     ??CrossCallReturnLabel_101:
   \   000008   8A4C0000     MOV.W   R12, 0(R10)
   \   00000C   8A4D0200     MOV.W   R13, 0x2(R10)
   \   000010   2B52         ADD.W   #0x4, R11
   \   000012   1001         RETA
   2703          #endif  // ZCL_PRICING
   2704          
   2705          #ifdef ZCL_MESSAGE
   2706          /*********************************************************************
   2707           * @fn      zclSE_ParseInCmd_DisplayMessage
   2708           *
   2709           * @brief   Parse received Display Message Command.
   2710           *
   2711           * @param   cmd - pointer to the output data struct
   2712           * @param   buf - pointer to the input data buffer
   2713           * @param   len - length of the input buffer
   2714           *
   2715           * @return  ZStatus_t - ZSuccess or ZMemError due to memory allocation failure
   2716           */

   \                                 In  segment CODE, align 2, keep-with-next
   2717          ZStatus_t zclSE_ParseInCmd_DisplayMessage( zclCCDisplayMessage_t *cmd, uint8 *buf, uint8 len )
   \                     zclSE_ParseInCmd_DisplayMessage:
   2718          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   0B4C         MOV.W   R12, R11
   \   000004   0A4D         MOV.W   R13, R10
   2719            (void)len;  // Intentionally unreferenced parameter
   2720          
   2721            cmd->messageId = osal_build_uint32( buf, 4 );
   \   000006   6D42         MOV.B   #0x4, R13
   \   000008   0C4A         MOV.W   R10, R12
   \   00000A   ........     CALLA   #osal_build_uint32
   \   00000E   8B4C0000     MOV.W   R12, 0(R11)
   \   000012   8B4D0200     MOV.W   R13, 0x2(R11)
   2722          
   2723            // Message control bitmap
   2724            cmd->messageCtrl.transmissionMode = buf[4] & 0x03;    // bit 0&1
   \   000016   5E4A0400     MOV.B   0x4(R10), R14
   \   00001A   7EF00300     AND.B   #0x3, R14
   \   00001E   CB4E0400     MOV.B   R14, 0x4(R11)
   2725            cmd->messageCtrl.importance = ( buf[4] >> SE_PROFILE_MSGCTRL_IMPORTANCE ) & 0x03; // bit 2&3
   \   000022   5E4A0400     MOV.B   0x4(R10), R14
   \   000026                RPT     #0x2
   \   000026   41194E10     RRUX.B  R14
   \   00002A   7EF00300     AND.B   #0x3, R14
   \   00002E   CB4E0500     MOV.B   R14, 0x5(R11)
   2726            cmd->messageCtrl.confirmationRequired = (buf[4] >> SE_PROFILE_MSGCTRL_CONFREQUIRED ) & 0x01;  // bit 7
   \   000032   FAB080000400 BIT.B   #0x80, 0x4(R10)
   \   000038   4E7E         SUBC.B  R14, R14
   \   00003A   5E53         ADD.B   #0x1, R14
   \   00003C   CB4E0600     MOV.B   R14, 0x6(R11)
   2727          
   2728            cmd->startTime = osal_build_uint32( &(buf[5]), 4 );
   \   000040   6D42         MOV.B   #0x4, R13
   \   000042   0C4A         MOV.W   R10, R12
   \   000044   3C500500     ADD.W   #0x5, R12
   \   000048   ........     CALLA   #osal_build_uint32
   \   00004C   8B4C0800     MOV.W   R12, 0x8(R11)
   \   000050   8B4D0A00     MOV.W   R13, 0xa(R11)
   2729            cmd->durationInMinutes = BUILD_UINT16( buf[9], buf[10] );
   \   000054   5E4A0900     MOV.B   0x9(R10), R14
   \   000058   5F4A0A00     MOV.B   0xa(R10), R15
   \   00005C                RPT     #0x8
   \   00005C   47180F5F     RLAX.W  R15
   \   000060   0E5F         ADD.W   R15, R14
   \   000062   8B4E0C00     MOV.W   R14, 0xc(R11)
   2730            cmd->msgString.strLen = buf[11];
   \   000066   5C4A0B00     MOV.B   0xb(R10), R12
   \   00006A   CB4C0E00     MOV.B   R12, 0xe(R11)
   2731          
   2732            // Copy the message string
   2733            if( cmd->msgString.strLen != 0 )
   \   00006E   4C93         CMP.B   #0x0, R12
   \   000070   1124         JEQ     ??zclSE_ParseInCmd_DisplayMessage_0
   2734            {
   2735              cmd->msgString.pStr = osal_mem_alloc( cmd->msgString.strLen );
   \   000072   ........     CALLA   #osal_mem_alloc
   \   000076   8B4C1000     MOV.W   R12, 0x10(R11)
   2736              if ( cmd->msgString.pStr == NULL )
   \   00007A   0C93         CMP.W   #0x0, R12
   \   00007C   0320         JNE     ??zclSE_ParseInCmd_DisplayMessage_1
   2737              {
   2738                return ZMemError;
   \   00007E   7C401000     MOV.B   #0x10, R12
   \   000082   0B3C         JMP     ??zclSE_ParseInCmd_DisplayMessage_2
   2739              }
   2740              osal_memcpy( cmd->msgString.pStr, &(buf[12]), cmd->msgString.strLen );
   \                     ??zclSE_ParseInCmd_DisplayMessage_1:
   \   000084   5E4B0E00     MOV.B   0xe(R11), R14
   \   000088   3A500C00     ADD.W   #0xc, R10
   \   00008C   0D4A         MOV.W   R10, R13
   \   00008E   ........     CALLA   #osal_memcpy
   \   000092   023C         JMP     ??zclSE_ParseInCmd_DisplayMessage_3
   2741            }
   2742            else
   2743            {
   2744              cmd->msgString.pStr = NULL;
   \                     ??zclSE_ParseInCmd_DisplayMessage_0:
   \   000094   8B431000     MOV.W   #0x0, 0x10(R11)
   2745            }
   2746          
   2747            return ZSuccess;
   \                     ??zclSE_ParseInCmd_DisplayMessage_3:
   \   000098   4C43         MOV.B   #0x0, R12
   \                     ??zclSE_ParseInCmd_DisplayMessage_2:
   \   00009A   1A17         POPM.W  #0x2, R11
   \   00009C   1001         RETA
   2748          }
   2749          #endif  // ZCL_MESSAGE
   2750          
   2751          #ifdef ZCL_LOAD_CONTROL
   2752          /*********************************************************************
   2753           * @fn      zclSE_ParseInCmd_LoadControlEvent
   2754           *
   2755           * @brief   Parse received Load Control Event.
   2756           *
   2757           * @param   cmd - pointer to the output data struct
   2758           * @param   buf - pointer to the input data buffer
   2759           * @param   len - length of the input buffer
   2760           *
   2761           */

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine48:
   \   000000   6E4B         MOV.B   @R11, R14
   \   000002   5F4B0100     MOV.B   0x1(R11), R15
   \   000006                REQUIRE ?Subroutine55
   \   000006                // Fall through to label ?Subroutine55

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine17:
   \   000000   ........     CALLA   #?Subroutine48
   \                     ??CrossCallReturnLabel_93:
   \   000004   8A4E0C00     MOV.W   R14, 0xc(R10)
   \   000008   2B53         ADD.W   #0x2, R11
   \   00000A   FA4B0E00     MOV.B   @R11+, 0xe(R10)
   \   00000E   FA4B0F00     MOV.B   @R11+, 0xf(R10)
   \   000012   FA4B1000     MOV.B   @R11+, 0x10(R10)
   \   000016   1001         RETA

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine9:
   \   000000   ........     CALLA   #?Subroutine44
   \                     ??CrossCallReturnLabel_73:
   \   000004   ........     CALLA   #?Subroutine49
   \                     ??CrossCallReturnLabel_81:
   \   000008   8A4C0400     MOV.W   R12, 0x4(R10)
   \   00000C   8A4D0600     MOV.W   R13, 0x6(R10)
   \   000010   3B500300     ADD.W   #0x3, R11
   \   000014   1001         RETA

   \                                 In  segment CODE, align 2
   2762          void zclSE_ParseInCmd_LoadControlEvent( zclCCLoadControlEvent_t *cmd, uint8 *buf, uint8 len )
   \                     zclSE_ParseInCmd_LoadControlEvent:
   2763          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   ........     CALLA   #?Subroutine9
   2764            (void)len;  // Intentionally unreferenced parameter
   2765          
   2766            // Maybe add checking for buffer length later
   2767            // Skipped right now to leave MT input to guarantee
   2768            // proper buffer length
   2769            cmd->issuerEvent = osal_build_uint32( buf, 4 );
   2770            buf += 4;
   2771          
   2772            cmd->deviceGroupClass = osal_build_uint32( buf, 3 );
   2773            buf += 3;
   2774          
   2775            cmd->startTime = osal_build_uint32( buf, 4 );
   \                     ??CrossCallReturnLabel_1:
   \   000006   ........     CALLA   #?Subroutine14
   2776            buf += 4;
   2777          
   2778            cmd->durationInMinutes = BUILD_UINT16( buf[0], buf[1] );
   \                     ??CrossCallReturnLabel_13:
   \   00000A   ........     CALLA   #?Subroutine17
   2779            buf += 2;
   2780          
   2781            cmd->criticalityLevel = *buf++;
   2782            cmd->coolingTemperatureOffset = *buf++;
   2783            cmd->heatingTemperatureOffset = *buf++;
   2784          
   2785            cmd->coolingTemperatureSetPoint = BUILD_UINT16( buf[0], buf[1] );
   \                     ??CrossCallReturnLabel_18:
   \   00000E   ........     CALLA   #?Subroutine48
   \                     ??CrossCallReturnLabel_91:
   \   000012   8A4E1200     MOV.W   R14, 0x12(R10)
   2786            buf += 2;
   \   000016   2B53         ADD.W   #0x2, R11
   2787          
   2788            cmd->heatingTemperatureSetPoint = BUILD_UINT16( buf[0], buf[1] );
   \   000018   ........     CALLA   #?Subroutine48
   \                     ??CrossCallReturnLabel_92:
   \   00001C   8A4E1400     MOV.W   R14, 0x14(R10)
   2789            buf += 2;
   \   000020   2B53         ADD.W   #0x2, R11
   2790          
   2791            cmd->averageLoadAdjustmentPercentage = *buf++;
   \   000022   FA4B1600     MOV.B   @R11+, 0x16(R10)
   2792            cmd->dutyCycle = *buf++;
   \   000026   FA4B1700     MOV.B   @R11+, 0x17(R10)
   2793            cmd->eventControl = *buf++;
   \   00002A   EA4B1800     MOV.B   @R11, 0x18(R10)
   2794          
   2795            return;
   \   00002E   1A17         POPM.W  #0x2, R11
   \   000030   1001         RETA
   2796          
   2797          }
   2798          
   2799          /*********************************************************************
   2800           * @fn      zclSE_ParseInCmd_CancelLoadControlEvent
   2801           *
   2802           * @brief   Parse received Cancel Load Control Event Command.
   2803           *
   2804           * @param   cmd - pointer to the output data struct
   2805           * @param   buf - pointer to the input data buffer
   2806           * @param   len - length of the input buffer
   2807           *
   2808           */

   \                                 In  segment CODE, align 2
   2809          void zclSE_ParseInCmd_CancelLoadControlEvent( zclCCCancelLoadControlEvent_t *cmd, uint8 *buf, uint8 len )
   \                     zclSE_ParseInCmd_CancelLoadControlEvent:
   2810          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   ........     CALLA   #?Subroutine9
   2811            (void)len;  // Intentionally unreferenced parameter
   2812          
   2813            // Maybe add checking for buffer length later
   2814            // Skipped right now to leave MT input to guarantee
   2815            // proper buffer length
   2816            cmd->issuerEventID = osal_build_uint32( buf, 4 );
   2817            buf += 4;
   2818          
   2819            cmd->deviceGroupClass = osal_build_uint32( buf, 3 );
   2820            buf += 3;
   2821          
   2822            cmd->cancelControl = *buf++;
   \                     ??CrossCallReturnLabel_0:
   \   000006   FA4B0800     MOV.B   @R11+, 0x8(R10)
   2823            cmd->effectiveTime = osal_build_uint32( buf, 4 );
   \   00000A   ........     CALLA   #?Subroutine53
   \                     ??CrossCallReturnLabel_102:
   \   00000E   8A4C0A00     MOV.W   R12, 0xa(R10)
   \   000012   8A4D0C00     MOV.W   R13, 0xc(R10)
   2824          
   2825            return;
   \   000016   1A17         POPM.W  #0x2, R11
   \   000018   1001         RETA
   2826          
   2827          }
   2828          
   2829          /*********************************************************************
   2830           * @fn      zclSE_ParseInCmd_ReportEventStatus
   2831           *
   2832           * @brief   Parse received Report Event Status.
   2833           *
   2834           * @param   cmd - pointer to the output data struct
   2835           * @param   buf - pointer to the input data buffer
   2836           * @param   len - length of the input buffer
   2837           *
   2838           */

   \                                 In  segment CODE, align 2
   2839          void zclSE_ParseInCmd_ReportEventStatus( zclCCReportEventStatus_t *cmd, uint8 *buf, uint8 len )
   \                     zclSE_ParseInCmd_ReportEventStatus:
   2840          {
   \   000000   1B15         PUSHM.W #0x2, R11
   \   000002   ........     CALLA   #?Subroutine44
   2841            (void)len;  // Intentionally unreferenced parameter
   2842          
   2843            // Maybe add checking for buffer length later
   2844            // Skipped right now to leave MT input to guarantee
   2845            // proper buffer length
   2846            cmd->issuerEventID = osal_build_uint32( buf, 4 );
   2847            buf += 4;
   2848          
   2849            cmd->eventStatus = *buf++;
   \                     ??CrossCallReturnLabel_74:
   \   000006   FA4B0800     MOV.B   @R11+, 0x8(R10)
   2850          
   2851            cmd->eventStartTime = osal_build_uint32( buf, 4 );
   \   00000A   ........     CALLA   #?Subroutine13
   2852            buf += 4;
   2853          
   2854            cmd->criticalityLevelApplied = *buf++;
   \                     ??CrossCallReturnLabel_11:
   \   00000E   FA4B0900     MOV.B   @R11+, 0x9(R10)
   2855            cmd->coolingTemperatureSetPointApplied = BUILD_UINT16( buf[0], buf[1] );
   \   000012   ........     CALLA   #?Subroutine48
   \                     ??CrossCallReturnLabel_90:
   \   000016   8A4E0A00     MOV.W   R14, 0xa(R10)
   2856            buf += 2;
   \   00001A   2B53         ADD.W   #0x2, R11
   2857          
   2858            cmd->heatingTemperatureSetPointApplied = BUILD_UINT16( buf[0], buf[1] );
   \   00001C   ........     CALLA   #?Subroutine17
   2859            buf += 2;
   2860          
   2861            cmd->averageLoadAdjustment = *buf++;
   2862            cmd->dutyCycleApplied = *buf++;
   2863            cmd->eventControl = *buf++;
   2864            cmd->signatureType = *buf++;
   \                     ??CrossCallReturnLabel_17:
   \   000020   FA4B1100     MOV.B   @R11+, 0x11(R10)
   2865          
   2866            osal_memcpy( cmd->signature, buf, SE_PROFILE_SIGNATURE_LENGTH );
   \   000024   3E402A00     MOV.W   #0x2a, R14
   \   000028   0D4B         MOV.W   R11, R13
   \   00002A   3A501200     ADD.W   #0x12, R10
   \   00002E   0C4A         MOV.W   R10, R12
   \   000030   ........     CALLA   #osal_memcpy
   2867          
   2868            return;
   \   000034   1A17         POPM.W  #0x2, R11
   \   000036   1001         RETA
   2869          
   2870          }
   2871          #endif  // ZCL_LOAD_CONTROL
   2872          
   2873          #ifdef ZCL_PREPAYMENT
   2874          /*********************************************************************
   2875           * @fn      zclSE_ParseInCmd_SelAvailEmergencyCredit
   2876           *
   2877           * @brief   Parse received Select Available Emergency Credit Command.
   2878           *
   2879           * @param   cmd - pointer to the output data struct
   2880           * @param   buf - pointer to the input data buffer
   2881           * @param   len - length of the input buffer
   2882           *
   2883           * @return  ZStatus_t - ZSuccess or ZMemError due to memory allocation failure
   2884           */
   2885          ZStatus_t zclSE_ParseInCmd_SelAvailEmergencyCredit( zclCCSelAvailEmergencyCredit_t *cmd, uint8 *buf, uint8 len )
   2886          {
   2887            (void)len;  // Intentionally unreferenced parameter
   2888            uint8 originalLen; // stores octet string original length
   2889          
   2890            // Parse the command buffer
   2891            cmd->commandDateTime = osal_build_uint32( buf, 4 );
   2892            buf += 4;
   2893          
   2894            cmd->originatingDevice = *buf++;
   2895          
   2896            // Notice that site ID is a variable length UTF-8 string
   2897            cmd->siteId.strLen = *buf++;
   2898            if ( cmd->siteId.strLen == SE_OPTIONAL_FIELD_UINT8 )
   2899            {
   2900              // If character count is 0xFF, set string length to 0
   2901              cmd->siteId.strLen = 0;
   2902            }
   2903          
   2904            if ( cmd->siteId.strLen != 0 )
   2905            {
   2906              originalLen = cmd->siteId.strLen; //save original length
   2907          
   2908              // truncate Site ID to maximum size
   2909              if ( cmd->siteId.strLen > (SE_SITE_ID_LEN-1) )
   2910              {
   2911                cmd->siteId.strLen = (SE_SITE_ID_LEN-1);
   2912              }
   2913          
   2914              cmd->siteId.pStr = osal_mem_alloc( cmd->siteId.strLen );
   2915              if ( cmd->siteId.pStr == NULL )
   2916              {
   2917                return ZMemError;
   2918              }
   2919              osal_memcpy( cmd->siteId.pStr, buf, cmd->siteId.strLen );
   2920              buf += originalLen; // move pointer original length of received string
   2921            }
   2922            else
   2923            {
   2924              cmd->siteId.pStr = NULL;
   2925            }
   2926          
   2927            // Notice that meterSerialNumber is a variable length UTF-8 string
   2928            cmd->meterSerialNumber.strLen = *buf++;
   2929            if ( cmd->meterSerialNumber.strLen == SE_OPTIONAL_FIELD_UINT8 )
   2930            {
   2931              // If character count is 0xFF, set string length to 0
   2932              cmd->meterSerialNumber.strLen = 0;
   2933            }
   2934          
   2935            if ( cmd->meterSerialNumber.strLen != 0 )
   2936            {
   2937              originalLen = cmd->meterSerialNumber.strLen; //save original length
   2938          
   2939              // truncate Meter Serial Number to maximum size
   2940              if ( cmd->meterSerialNumber.strLen > (SE_METER_SERIAL_NUM_LEN-1) )
   2941              {
   2942                cmd->meterSerialNumber.strLen = (SE_METER_SERIAL_NUM_LEN-1);
   2943              }
   2944          
   2945              cmd->meterSerialNumber.pStr = osal_mem_alloc( cmd->meterSerialNumber.strLen );
   2946              if ( cmd->meterSerialNumber.pStr == NULL )
   2947              {
   2948                return ZMemError;
   2949              }
   2950              osal_memcpy( cmd->meterSerialNumber.pStr, buf, cmd->meterSerialNumber.strLen );
   2951              buf += originalLen; // move pointer original length of received string
   2952            }
   2953            else
   2954            {
   2955              cmd->meterSerialNumber.pStr = NULL;
   2956            }
   2957          
   2958            return ZSuccess;
   2959          }
   2960          
   2961          /*********************************************************************
   2962           * @fn      zclSE_ParseInCmd_ChangeSupply
   2963           *
   2964           * @brief   Parse received Change Supply Command.
   2965           *
   2966           * @param   cmd - pointer to the output data struct
   2967           * @param   buf - pointer to the input data buffer
   2968           * @param   len - length of the input buffer
   2969           *
   2970           * @return  ZStatus_t - ZSuccess or ZMemError due to memory allocation failure
   2971           */
   2972          ZStatus_t zclSE_ParseInCmd_ChangeSupply( zclCCChangeSupply_t *cmd, uint8 *buf, uint8 len )
   2973          {
   2974            (void)len;  // Intentionally unreferenced parameter
   2975            uint8 originalLen; // stores octet string original length
   2976          
   2977            // Parse the command buffer
   2978            cmd->providerId = osal_build_uint32( buf, 4 );
   2979            buf += 4;
   2980          
   2981            cmd->requestDateTime = osal_build_uint32( buf, 4 );
   2982            buf += 4;
   2983          
   2984            // Notice that site ID is a variable length UTF-8 string
   2985            cmd->siteId.strLen = *buf++;
   2986            if ( cmd->siteId.strLen == SE_OPTIONAL_FIELD_UINT8 )
   2987            {
   2988              // If character count is 0xFF, set string length to 0
   2989              cmd->siteId.strLen = 0;
   2990            }
   2991          
   2992            if ( cmd->siteId.strLen != 0 )
   2993            {
   2994              originalLen = cmd->siteId.strLen; //save original length
   2995          
   2996              // truncate Site ID to maximum size
   2997              if ( cmd->siteId.strLen > (SE_SITE_ID_LEN-1) )
   2998              {
   2999                cmd->siteId.strLen = (SE_SITE_ID_LEN-1);
   3000              }
   3001          
   3002              cmd->siteId.pStr = osal_mem_alloc( cmd->siteId.strLen );
   3003              if ( cmd->siteId.pStr == NULL )
   3004              {
   3005                return ZMemError;
   3006              }
   3007              osal_memcpy( cmd->siteId.pStr, buf, cmd->siteId.strLen );
   3008              buf += originalLen; // move pointer original length of received string
   3009            }
   3010            else
   3011            {
   3012              cmd->siteId.pStr = NULL;
   3013            }
   3014          
   3015            // Notice that meterSerialNumber is a variable length UTF-8 string
   3016            cmd->meterSerialNumber.strLen = *buf++;
   3017            if ( cmd->meterSerialNumber.strLen == SE_OPTIONAL_FIELD_UINT8 )
   3018            {
   3019              // If character count is 0xFF, set string length to 0
   3020              cmd->meterSerialNumber.strLen = 0;
   3021            }
   3022          
   3023            if ( cmd->meterSerialNumber.strLen != 0 )
   3024            {
   3025              originalLen = cmd->meterSerialNumber.strLen; //save original length
   3026          
   3027              // truncate Meter Serial Number to maximum size
   3028              if ( cmd->meterSerialNumber.strLen > (SE_METER_SERIAL_NUM_LEN-1) )
   3029              {
   3030                cmd->meterSerialNumber.strLen = (SE_METER_SERIAL_NUM_LEN-1);
   3031              }
   3032          
   3033              cmd->meterSerialNumber.pStr = osal_mem_alloc( cmd->meterSerialNumber.strLen );
   3034              if ( cmd->meterSerialNumber.pStr == NULL )
   3035              {
   3036                return ZMemError;
   3037              }
   3038              osal_memcpy( cmd->meterSerialNumber.pStr, buf, cmd->meterSerialNumber.strLen );
   3039              buf += originalLen; // move pointer original length of received string
   3040            }
   3041            else
   3042            {
   3043              cmd->meterSerialNumber.pStr = NULL;
   3044            }
   3045          
   3046            cmd->implementationDateTime = osal_build_uint32( buf, 4 );
   3047            buf += 4;
   3048          
   3049            cmd->proposedSupplyStatus = *buf++;
   3050          
   3051            cmd->origIdSupplyControlBits = *buf;
   3052          
   3053            return ZSuccess;
   3054          }
   3055          #endif // ZCL_PREPAYMENT
   3056          /********************************************************************************************
   3057          *********************************************************************************************/

   Maximum stack usage in bytes:

   CSTACK Function
   ------ --------
       4  zclSE_HdlInSpecificCommands
             4 -> zclSE_ProcessInLoadControlCmds
             4 -> zclSE_ProcessInMessageCmds
             4 -> zclSE_ProcessInPricingCmds
             4 -> zclSE_ProcessInSimpleMeteringCmds
       4  zclSE_HdlIncoming
             4 -> zclSE_HdlInSpecificCommands
      38  zclSE_LoadControl_Send_CancelLoadControlEvent
            24 -> osal_buffer_uint24
            24 -> osal_buffer_uint32
            38 -> zcl_SendCommand
      32  zclSE_LoadControl_Send_GetScheduledEvent
            18 -> osal_buffer_uint32
            32 -> zcl_SendCommand
      30  zclSE_LoadControl_Send_LoadControlEvent
            16 -> osal_buffer_uint24
            16 -> osal_buffer_uint32
            16 -> osal_mem_alloc
            30 -> osal_mem_free
            30 -> zcl_SendCommand
      30  zclSE_LoadControl_Send_ReportEventStatus
            16 -> osal_buffer_uint32
            16 -> osal_mem_alloc
            30 -> osal_mem_free
            16 -> zclGeneral_KeyEstablishment_ECDSASign
            30 -> zcl_SendCommand
      28  zclSE_Message_Send_CancelMessage
            14 -> osal_buffer_uint32
            28 -> zcl_SendCommand
      30  zclSE_Message_Send_DisplayMessage
            16 -> osal_buffer_uint32
            16 -> osal_mem_alloc
            30 -> osal_mem_free
            16 -> osal_memcpy
            30 -> zcl_SendCommand
      34  zclSE_Message_Send_MessageConfirmation
            20 -> osal_buffer_uint32
            34 -> zcl_SendCommand
       8  zclSE_ParseInCmd_CancelLoadControlEvent
             8 -> osal_build_uint32
       8  zclSE_ParseInCmd_DisplayMessage
             8 -> osal_build_uint32
             8 -> osal_mem_alloc
             8 -> osal_memcpy
       8  zclSE_ParseInCmd_LoadControlEvent
             8 -> osal_build_uint32
       8  zclSE_ParseInCmd_PublishBlockPeriod
             8 -> osal_build_uint32
      16  zclSE_ParseInCmd_PublishPrice
            16 -> osal_build_uint32
            16 -> osal_mem_alloc
            16 -> osal_memcpy
       8  zclSE_ParseInCmd_ReportEventStatus
             8 -> osal_build_uint32
             8 -> osal_memcpy
      32  zclSE_Pricing_Send_GetBlockPeriod
            18 -> osal_buffer_uint32
            32 -> zcl_SendCommand
      32  zclSE_Pricing_Send_GetScheduledPrice
            18 -> osal_buffer_uint32
            32 -> zcl_SendCommand
      30  zclSE_Pricing_Send_PriceAcknowledgement
            16 -> osal_buffer_uint32
            16 -> osal_mem_alloc
            30 -> osal_mem_free
            30 -> zcl_SendCommand
      30  zclSE_Pricing_Send_PublishBlockPeriod
            16 -> osal_buffer_uint24
            16 -> osal_buffer_uint32
            16 -> osal_mem_alloc
            30 -> osal_mem_free
            30 -> zcl_SendCommand
      30  zclSE_Pricing_Send_PublishPrice
            16 -> osal_buffer_uint32
            16 -> osal_mem_alloc
            30 -> osal_mem_free
            16 -> osal_memcpy
            30 -> zcl_SendCommand
      22  zclSE_ProcessInCmd_LoadControl_CancelLoadControlEvent
            22 -- Indirect call
            22 -> zclSE_ParseInCmd_CancelLoadControlEvent
      14  zclSE_ProcessInCmd_LoadControl_GetScheduledEvents
            14 -- Indirect call
            14 -> osal_build_uint32
      38  zclSE_ProcessInCmd_LoadControl_LoadControlEvent
            38 -- Indirect call
            38 -> zclSE_ParseInCmd_LoadControlEvent
      68  zclSE_ProcessInCmd_LoadControl_ReportEventStatus
            68 -- Indirect call
            68 -> zclSE_ParseInCmd_ReportEventStatus
      20  zclSE_ProcessInCmd_Message_CancelMessage
            20 -- Indirect call
            20 -> osal_build_uint32
      26  zclSE_ProcessInCmd_Message_DisplayMessage
            26 -- Indirect call
            26 -> osal_mem_free
            26 -> zclSE_ParseInCmd_DisplayMessage
      16  zclSE_ProcessInCmd_Message_MessageConfirmation
            16 -- Indirect call
            16 -> osal_build_uint32
      14  zclSE_ProcessInCmd_Pricing_GetBlockPeriod
            14 -- Indirect call
            14 -> osal_build_uint32
      14  zclSE_ProcessInCmd_Pricing_GetScheduledPrice
            14 -- Indirect call
            14 -> osal_build_uint32
      26  zclSE_ProcessInCmd_Pricing_PriceAcknowledgement
            26 -- Indirect call
            26 -> osal_build_uint32
      26  zclSE_ProcessInCmd_Pricing_PublishBlockPeriod
            26 -- Indirect call
            26 -> zclSE_ParseInCmd_PublishBlockPeriod
      60  zclSE_ProcessInCmd_Pricing_PublishPrice
            60 -- Indirect call
            60 -> osal_mem_free
            60 -> zclSE_ParseInCmd_PublishPrice
      16  zclSE_ProcessInCmd_SimpleMeter_GetProfileCmd
            16 -- Indirect call
            16 -> osal_build_uint32
      26  zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp
            26 -- Indirect call
            26 -> osal_build_uint32
            26 -> osal_mem_alloc
            26 -> osal_mem_free
      10  zclSE_ProcessInCmd_SimpleMeter_MirrorRemRsp
            10 -- Indirect call
      20  zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeCmd
            20 -- Indirect call
            20 -> zclFindAttrRec
            20 -> zclReadAttrData
      14  zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeRsp
            14 -- Indirect call
            14 -> osal_build_uint32
      10  zclSE_ProcessInCmd_SimpleMeter_ReqMirrorRsp
            10 -- Indirect call
      10  zclSE_ProcessInLoadControlCmds
            10 -- Indirect call
            10 -> zclSE_ProcessInCmd_LoadControl_CancelLoadControlEvent
            10 -> zclSE_ProcessInCmd_LoadControl_GetScheduledEvents
            10 -> zclSE_ProcessInCmd_LoadControl_LoadControlEvent
            10 -> zclSE_ProcessInCmd_LoadControl_ReportEventStatus
       4  zclSE_ProcessInMessageCmds
             4 -- Indirect call
             4 -> zclSE_ProcessInCmd_Message_CancelMessage
             4 -> zclSE_ProcessInCmd_Message_DisplayMessage
             4 -> zclSE_ProcessInCmd_Message_MessageConfirmation
      10  zclSE_ProcessInPricingCmds
            10 -- Indirect call
            10 -> zclSE_ProcessInCmd_Pricing_GetBlockPeriod
            10 -> zclSE_ProcessInCmd_Pricing_GetScheduledPrice
            10 -> zclSE_ProcessInCmd_Pricing_PriceAcknowledgement
            10 -> zclSE_ProcessInCmd_Pricing_PublishBlockPeriod
            10 -> zclSE_ProcessInCmd_Pricing_PublishPrice
       4  zclSE_ProcessInSimpleMeteringCmds
             4 -- Indirect call
             4 -> zclSE_ProcessInCmd_SimpleMeter_GetProfileCmd
             4 -> zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp
             4 -> zclSE_ProcessInCmd_SimpleMeter_MirrorRemRsp
             4 -> zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeCmd
             4 -> zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeRsp
             4 -> zclSE_ProcessInCmd_SimpleMeter_ReqMirrorRsp
       8  zclSE_RegisterCmdCallbacks
             8 -> osal_mem_alloc
             8 -> zcl_registerPlugin
      32  zclSE_SimpleMetering_Send_GetProfileCmd
            18 -> osal_buffer_uint32
            32 -> zcl_SendCommand
      34  zclSE_SimpleMetering_Send_GetProfileRsp
            20 -> osal_buffer_uint24
            20 -> osal_buffer_uint32
            20 -> osal_mem_alloc
            34 -> osal_mem_free
            34 -> zcl_SendCommand
      20  zclSE_SimpleMetering_Send_RemMirrorRsp
            20 -> zcl_SendCommand
      20  zclSE_SimpleMetering_Send_ReqFastPollModeCmd
            20 -> zcl_SendCommand
      32  zclSE_SimpleMetering_Send_ReqFastPollModeRsp
            18 -> osal_buffer_uint32
            32 -> zcl_SendCommand
      20  zclSE_SimpleMetering_Send_ReqMirrorRsp
            20 -> zcl_SendCommand


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
      12  ??Subroutine0_0
       6  ??Subroutine27_0
      10  ??Subroutine32_0
      10  ??Subroutine33_0
       6  ??Subroutine52_0
       6  ??Subroutine53_0
       6  ??Subroutine60_0
       6  ??Subroutine62_0
      10  ??Subroutine65_0
       4  ?Subroutine0
      14  ?Subroutine1
       8  ?Subroutine10
      30  ?Subroutine12
      16  ?Subroutine13
      16  ?Subroutine14
      16  ?Subroutine15
       4  ?Subroutine16
      24  ?Subroutine17
       8  ?Subroutine19
       8  ?Subroutine2
       8  ?Subroutine20
       6  ?Subroutine21
       2  ?Subroutine22
      10  ?Subroutine23
      16  ?Subroutine24
       8  ?Subroutine25
       4  ?Subroutine27
      10  ?Subroutine28
      10  ?Subroutine29
       8  ?Subroutine3
       8  ?Subroutine30
       8  ?Subroutine31
       8  ?Subroutine32
       2  ?Subroutine33
      26  ?Subroutine34
      14  ?Subroutine35
      16  ?Subroutine36
      14  ?Subroutine37
       8  ?Subroutine38
      12  ?Subroutine39
       8  ?Subroutine4
      10  ?Subroutine40
      10  ?Subroutine41
      12  ?Subroutine42
      14  ?Subroutine43
      20  ?Subroutine44
      14  ?Subroutine45
      14  ?Subroutine47
       6  ?Subroutine48
       8  ?Subroutine49
       6  ?Subroutine5
      14  ?Subroutine50
      12  ?Subroutine51
       2  ?Subroutine52
       2  ?Subroutine53
       6  ?Subroutine54
       8  ?Subroutine55
       8  ?Subroutine56
       6  ?Subroutine6
       8  ?Subroutine7
      20  ?Subroutine8
      22  ?Subroutine9
       2  zclSECBs
       1  zclSEPluginRegisted
      80  zclSE_HdlInSpecificCommands
      20  zclSE_HdlIncoming
      66  zclSE_LoadControl_Send_CancelLoadControlEvent
      46  zclSE_LoadControl_Send_GetScheduledEvent
     166  zclSE_LoadControl_Send_LoadControlEvent
     154  zclSE_LoadControl_Send_ReportEventStatus
      56  zclSE_Message_Send_CancelMessage
     122  zclSE_Message_Send_DisplayMessage
      64  zclSE_Message_Send_MessageConfirmation
      26  zclSE_ParseInCmd_CancelLoadControlEvent
     158  zclSE_ParseInCmd_DisplayMessage
      50  zclSE_ParseInCmd_LoadControlEvent
      44  zclSE_ParseInCmd_PublishBlockPeriod
     274  zclSE_ParseInCmd_PublishPrice
      56  zclSE_ParseInCmd_ReportEventStatus
      44  zclSE_Pricing_Send_GetBlockPeriod
      42  zclSE_Pricing_Send_GetScheduledPrice
      72  zclSE_Pricing_Send_PriceAcknowledgement
      92  zclSE_Pricing_Send_PublishBlockPeriod
     258  zclSE_Pricing_Send_PublishPrice
      62  zclSE_ProcessInCmd_LoadControl_CancelLoadControlEvent
      48  zclSE_ProcessInCmd_LoadControl_GetScheduledEvents
     192  zclSE_ProcessInCmd_LoadControl_LoadControlEvent
     152  zclSE_ProcessInCmd_LoadControl_ReportEventStatus
      98  zclSE_ProcessInCmd_Message_CancelMessage
      78  zclSE_ProcessInCmd_Message_DisplayMessage
      60  zclSE_ProcessInCmd_Message_MessageConfirmation
      48  zclSE_ProcessInCmd_Pricing_GetBlockPeriod
      44  zclSE_ProcessInCmd_Pricing_GetScheduledPrice
      88  zclSE_ProcessInCmd_Pricing_PriceAcknowledgement
      68  zclSE_ProcessInCmd_Pricing_PublishBlockPeriod
     102  zclSE_ProcessInCmd_Pricing_PublishPrice
      66  zclSE_ProcessInCmd_SimpleMeter_GetProfileCmd
     166  zclSE_ProcessInCmd_SimpleMeter_GetProfileRsp
      44  zclSE_ProcessInCmd_SimpleMeter_MirrorRemRsp
     144  zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeCmd
      52  zclSE_ProcessInCmd_SimpleMeter_ReqFastPollModeRsp
      48  zclSE_ProcessInCmd_SimpleMeter_ReqMirrorRsp
      96  zclSE_ProcessInLoadControlCmds
      66  zclSE_ProcessInMessageCmds
     106  zclSE_ProcessInPricingCmds
     104  zclSE_ProcessInSimpleMeteringCmds
      98  zclSE_RegisterCmdCallbacks
      64  zclSE_SimpleMetering_Send_GetProfileCmd
     138  zclSE_SimpleMetering_Send_GetProfileRsp
      30  zclSE_SimpleMetering_Send_RemMirrorRsp
      34  zclSE_SimpleMetering_Send_ReqFastPollModeCmd
      58  zclSE_SimpleMetering_Send_ReqFastPollModeRsp
      30  zclSE_SimpleMetering_Send_ReqMirrorRsp

 
 4 922 bytes in segment CODE
     3 bytes in segment DATA16_Z
 
 4 922 bytes of CODE memory
     3 bytes of DATA memory

Errors: none
Warnings: none
